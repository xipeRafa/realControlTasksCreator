(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function xd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fp={exports:{}},rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function VC(){if(Ab)return rc;Ab=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return rc.Fragment=t,rc.jsx=e,rc.jsxs=e,rc}var wb;function NC(){return wb||(wb=1,fp.exports=VC()),fp.exports}var k=NC(),dp={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function OC(){if(Sb)return Vt;Sb=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,Q={};function F(V,tt,ot){this.props=V,this.context=tt,this.refs=Q,this.updater=ot||D}F.prototype.isReactComponent={},F.prototype.setState=function(V,tt){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,tt,"setState")},F.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ct(){}ct.prototype=F.prototype;function lt(V,tt,ot){this.props=V,this.context=tt,this.refs=Q,this.updater=ot||D}var it=lt.prototype=new ct;it.constructor=lt,j(it,F.prototype),it.isPureReactComponent=!0;var dt=Array.isArray,ft={H:null,A:null,T:null,S:null,V:null},pt=Object.prototype.hasOwnProperty;function x(V,tt,ot,st,vt,Z){return ot=Z.ref,{$$typeof:r,type:V,key:tt,ref:ot!==void 0?ot:null,props:Z}}function S(V,tt){return x(V.type,tt,void 0,void 0,void 0,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function O(V){var tt={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ot){return tt[ot]})}var M=/\/+/g;function P(V,tt){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):tt.toString(36)}function C(){}function pe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(tt){V.status==="pending"&&(V.status="fulfilled",V.value=tt)},function(tt){V.status==="pending"&&(V.status="rejected",V.reason=tt)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $t(V,tt,ot,st,vt){var Z=typeof V;(Z==="undefined"||Z==="boolean")&&(V=null);var yt=!1;if(V===null)yt=!0;else switch(Z){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(V.$$typeof){case r:case t:yt=!0;break;case y:return yt=V._init,$t(yt(V._payload),tt,ot,st,vt)}}if(yt)return vt=vt(V),yt=st===""?"."+P(V,0):st,dt(vt)?(ot="",yt!=null&&(ot=yt.replace(M,"$&/")+"/"),$t(vt,tt,ot,"",function(un){return un})):vt!=null&&(I(vt)&&(vt=S(vt,ot+(vt.key==null||V&&V.key===vt.key?"":(""+vt.key).replace(M,"$&/")+"/")+yt)),tt.push(vt)),1;yt=0;var Ht=st===""?".":st+":";if(dt(V))for(var jt=0;jt<V.length;jt++)st=V[jt],Z=Ht+P(st,jt),yt+=$t(st,tt,ot,Z,vt);else if(jt=b(V),typeof jt=="function")for(V=jt.call(V),jt=0;!(st=V.next()).done;)st=st.value,Z=Ht+P(st,jt++),yt+=$t(st,tt,ot,Z,vt);else if(Z==="object"){if(typeof V.then=="function")return $t(pe(V),tt,ot,st,vt);throw tt=String(V),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return yt}function X(V,tt,ot){if(V==null)return V;var st=[],vt=0;return $t(V,st,"","",function(Z){return tt.call(ot,Z,vt++)}),st}function at(V){if(V._status===-1){var tt=V._result;tt=tt(),tt.then(function(ot){(V._status===0||V._status===-1)&&(V._status=1,V._result=ot)},function(ot){(V._status===0||V._status===-1)&&(V._status=2,V._result=ot)}),V._status===-1&&(V._status=0,V._result=tt)}if(V._status===1)return V._result.default;throw V._result}var mt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function xt(){}return Vt.Children={map:X,forEach:function(V,tt,ot){X(V,function(){tt.apply(this,arguments)},ot)},count:function(V){var tt=0;return X(V,function(){tt++}),tt},toArray:function(V){return X(V,function(tt){return tt})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Vt.Component=F,Vt.Fragment=e,Vt.Profiler=a,Vt.PureComponent=lt,Vt.StrictMode=i,Vt.Suspense=m,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ft.H.useMemoCache(V)}},Vt.cache=function(V){return function(){return V.apply(null,arguments)}},Vt.cloneElement=function(V,tt,ot){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var st=j({},V.props),vt=V.key,Z=void 0;if(tt!=null)for(yt in tt.ref!==void 0&&(Z=void 0),tt.key!==void 0&&(vt=""+tt.key),tt)!pt.call(tt,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&tt.ref===void 0||(st[yt]=tt[yt]);var yt=arguments.length-2;if(yt===1)st.children=ot;else if(1<yt){for(var Ht=Array(yt),jt=0;jt<yt;jt++)Ht[jt]=arguments[jt+2];st.children=Ht}return x(V.type,vt,void 0,void 0,Z,st)},Vt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Vt.createElement=function(V,tt,ot){var st,vt={},Z=null;if(tt!=null)for(st in tt.key!==void 0&&(Z=""+tt.key),tt)pt.call(tt,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(vt[st]=tt[st]);var yt=arguments.length-2;if(yt===1)vt.children=ot;else if(1<yt){for(var Ht=Array(yt),jt=0;jt<yt;jt++)Ht[jt]=arguments[jt+2];vt.children=Ht}if(V&&V.defaultProps)for(st in yt=V.defaultProps,yt)vt[st]===void 0&&(vt[st]=yt[st]);return x(V,Z,void 0,void 0,null,vt)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(V){return{$$typeof:d,render:V}},Vt.isValidElement=I,Vt.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:at}},Vt.memo=function(V,tt){return{$$typeof:p,type:V,compare:tt===void 0?null:tt}},Vt.startTransition=function(V){var tt=ft.T,ot={};ft.T=ot;try{var st=V(),vt=ft.S;vt!==null&&vt(ot,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(xt,mt)}catch(Z){mt(Z)}finally{ft.T=tt}},Vt.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()},Vt.use=function(V){return ft.H.use(V)},Vt.useActionState=function(V,tt,ot){return ft.H.useActionState(V,tt,ot)},Vt.useCallback=function(V,tt){return ft.H.useCallback(V,tt)},Vt.useContext=function(V){return ft.H.useContext(V)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(V,tt){return ft.H.useDeferredValue(V,tt)},Vt.useEffect=function(V,tt,ot){var st=ft.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(V,tt)},Vt.useId=function(){return ft.H.useId()},Vt.useImperativeHandle=function(V,tt,ot){return ft.H.useImperativeHandle(V,tt,ot)},Vt.useInsertionEffect=function(V,tt){return ft.H.useInsertionEffect(V,tt)},Vt.useLayoutEffect=function(V,tt){return ft.H.useLayoutEffect(V,tt)},Vt.useMemo=function(V,tt){return ft.H.useMemo(V,tt)},Vt.useOptimistic=function(V,tt){return ft.H.useOptimistic(V,tt)},Vt.useReducer=function(V,tt,ot){return ft.H.useReducer(V,tt,ot)},Vt.useRef=function(V){return ft.H.useRef(V)},Vt.useState=function(V){return ft.H.useState(V)},Vt.useSyncExternalStore=function(V,tt,ot){return ft.H.useSyncExternalStore(V,tt,ot)},Vt.useTransition=function(){return ft.H.useTransition()},Vt.version="19.1.0",Vt}var Rb;function N_(){return Rb||(Rb=1,dp.exports=OC()),dp.exports}var Y=N_();const Ua=xd(Y);var mp={exports:{}},ic={},gp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function MC(){return Ib||(Ib=1,function(r){function t(X,at){var mt=X.length;X.push(at);t:for(;0<mt;){var xt=mt-1>>>1,V=X[xt];if(0<a(V,at))X[xt]=at,X[mt]=V,mt=xt;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var at=X[0],mt=X.pop();if(mt!==at){X[0]=mt;t:for(var xt=0,V=X.length,tt=V>>>1;xt<tt;){var ot=2*(xt+1)-1,st=X[ot],vt=ot+1,Z=X[vt];if(0>a(st,mt))vt<V&&0>a(Z,st)?(X[xt]=Z,X[vt]=mt,xt=vt):(X[xt]=st,X[ot]=mt,xt=ot);else if(vt<V&&0>a(Z,mt))X[xt]=Z,X[vt]=mt,xt=vt;else break t}}return at}function a(X,at){var mt=X.sortIndex-at.sortIndex;return mt!==0?mt:X.id-at.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var m=[],p=[],y=1,T=null,b=3,D=!1,j=!1,Q=!1,F=!1,ct=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function dt(X){for(var at=e(p);at!==null;){if(at.callback===null)i(p);else if(at.startTime<=X)i(p),at.sortIndex=at.expirationTime,t(m,at);else break;at=e(p)}}function ft(X){if(Q=!1,dt(X),!j)if(e(m)!==null)j=!0,pt||(pt=!0,P());else{var at=e(p);at!==null&&$t(ft,at.startTime-X)}}var pt=!1,x=-1,S=5,I=-1;function O(){return F?!0:!(r.unstable_now()-I<S)}function M(){if(F=!1,pt){var X=r.unstable_now();I=X;var at=!0;try{t:{j=!1,Q&&(Q=!1,lt(x),x=-1),D=!0;var mt=b;try{e:{for(dt(X),T=e(m);T!==null&&!(T.expirationTime>X&&O());){var xt=T.callback;if(typeof xt=="function"){T.callback=null,b=T.priorityLevel;var V=xt(T.expirationTime<=X);if(X=r.unstable_now(),typeof V=="function"){T.callback=V,dt(X),at=!0;break e}T===e(m)&&i(m),dt(X)}else i(m);T=e(m)}if(T!==null)at=!0;else{var tt=e(p);tt!==null&&$t(ft,tt.startTime-X),at=!1}}break t}finally{T=null,b=mt,D=!1}at=void 0}}finally{at?P():pt=!1}}}var P;if(typeof it=="function")P=function(){it(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,pe=C.port2;C.port1.onmessage=M,P=function(){pe.postMessage(null)}}else P=function(){ct(M,0)};function $t(X,at){x=ct(function(){X(r.unstable_now())},at)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(X){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var mt=b;b=at;try{return X()}finally{b=mt}},r.unstable_requestPaint=function(){F=!0},r.unstable_runWithPriority=function(X,at){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var mt=b;b=X;try{return at()}finally{b=mt}},r.unstable_scheduleCallback=function(X,at,mt){var xt=r.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?xt+mt:xt):mt=xt,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=mt+V,X={id:y++,callback:at,priorityLevel:X,startTime:mt,expirationTime:V,sortIndex:-1},mt>xt?(X.sortIndex=mt,t(p,X),e(m)===null&&X===e(p)&&(Q?(lt(x),x=-1):Q=!0,$t(ft,mt-xt))):(X.sortIndex=V,t(m,X),j||D||(j=!0,pt||(pt=!0,P()))),X},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(X){var at=b;return function(){var mt=b;b=at;try{return X.apply(this,arguments)}finally{b=mt}}}}(pp)),pp}var Cb;function PC(){return Cb||(Cb=1,gp.exports=MC()),gp.exports}var _p={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function kC(){if(Db)return dn;Db=1;var r=N_();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:y}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},dn.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},dn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},dn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},dn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:D}):y==="script"&&i.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},dn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},dn.requestFormReset=function(m){i.d.r(m)},dn.unstable_batchedUpdates=function(m,p){return m(p)},dn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var xb;function HA(){if(xb)return _p.exports;xb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),_p.exports=kC(),_p.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function UC(){if(Vb)return ic;Vb=1;var r=PC(),t=N_(),e=HA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),lt=Symbol.for("react.consumer"),it=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function pe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case F:return"Profiler";case Q:return"StrictMode";case ft:return"Suspense";case pt:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case it:return(n.displayName||"Context")+".Provider";case lt:return(n._context.displayName||"Context")+".Consumer";case dt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return s=n.displayName||null,s!==null?s:pe(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return pe(n(s))}catch{}}return null}var $t=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},xt=[],V=-1;function tt(n){return{current:n}}function ot(n){0>V||(n.current=xt[V],xt[V]=null,V--)}function st(n,s){V++,xt[V]=n.current,n.current=s}var vt=tt(null),Z=tt(null),yt=tt(null),Ht=tt(null);function jt(n,s){switch(st(yt,s),st(Z,n),st(vt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?ZT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=ZT(s),n=WT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ot(vt),st(vt,n)}function un(){ot(vt),ot(Z),ot(yt)}function En(n){n.memoizedState!==null&&st(Ht,n);var s=vt.current,o=WT(s,n.type);s!==o&&(st(Z,n),st(vt,o))}function Vn(n){Z.current===n&&(ot(vt),ot(Z)),Ht.current===n&&(ot(Ht),Wu._currentValue=mt)}var Nn=Object.prototype.hasOwnProperty,jn=r.unstable_scheduleCallback,On=r.unstable_cancelCallback,Xt=r.unstable_shouldYield,Xr=r.unstable_requestPaint,Ke=r.unstable_now,Xl=r.unstable_getCurrentPriorityLevel,Gs=r.unstable_ImmediatePriority,Bi=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Zl=r.unstable_LowPriority,ji=r.unstable_IdlePriority,zi=r.log,so=r.unstable_setDisableYieldValue,wt=null,Ut=null;function cn(n){if(typeof zi=="function"&&so(n),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(wt,n)}catch{}}var hn=Math.clz32?Math.clz32:Hs,ch=Math.log,mm=Math.LN2;function Hs(n){return n>>>=0,n===0?32:31-(ch(n)/mm|0)|0}var Ks=256,Qs=4194304;function mr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ao(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=mr(u):(E&=A,E!==0?f=mr(E):o||(o=A&~n,o!==0&&(f=mr(o))))):(A=u&~g,A!==0?f=mr(A):E!==0?f=mr(E):o||(o=u&~n,o!==0&&(f=mr(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function $s(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Wl(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jl(){var n=Ks;return Ks<<=1,(Ks&4194048)===0&&(Ks=256),n}function tu(){var n=Qs;return Qs<<=1,(Qs&62914560)===0&&(Qs=4194304),n}function Wr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Jr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function eu(n,s,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,R=n.expirationTimes,q=n.hiddenUpdates;for(o=E&~o;0<o;){var W=31-hn(o),et=1<<W;A[W]=0,R[W]=-1;var G=q[W];if(G!==null)for(q[W]=null,W=0;W<G.length;W++){var H=G[W];H!==null&&(H.lane&=-536870913)}o&=~et}u!==0&&wr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~s))}function wr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-hn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function nu(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-hn(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function qi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function oo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fi(){var n=at.p;return n!==0?n:(n=window.event,n===void 0?32:_b(n.type))}function hh(n,s){var o=at.p;try{return at.p=n,s()}finally{at.p=o}}var _e=Math.random().toString(36).slice(2),je="__reactFiber$"+_e,Me="__reactProps$"+_e,Wn="__reactContainer$"+_e,ru="__reactEvents$"+_e,gm="__reactListeners$"+_e,Gi="__reactHandles$"+_e,fh="__reactResources$"+_e,Ys="__reactMarker$"+_e;function Hi(n){delete n[je],delete n[Me],delete n[ru],delete n[gm],delete n[Gi]}function ti(n){var s=n[je];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Wn]||o[je]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=nb(n);n!==null;){if(o=n[je])return o;n=nb(n)}return s}n=o,o=n.parentNode}return null}function Sr(n){if(n=n[je]||n[Wn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Rr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Tn(n){var s=n[fh];return s||(s=n[fh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ie(n){n[Ys]=!0}var iu=new Set,lo={};function gr(n,s){ei(n,s),ei(n+"Capture",s)}function ei(n,s){for(lo[n]=s,n=0;n<s.length;n++)iu.add(s[n])}var dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mh={},Xs={};function gh(n){return Nn.call(Xs,n)?!0:Nn.call(mh,n)?!1:dh.test(n)?Xs[n]=!0:(mh[n]=!0,!1)}function Ki(n,s,o){if(gh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Ir(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function tn(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Zs,ph;function ni(n){if(Zs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Zs=s&&s[1]||"",ph=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zs+n+ph}var uo=!1;function co(n,s){if(!n||uo)return"";uo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(H){var G=H}Reflect.construct(n,[],et)}else{try{et.call()}catch(H){G=H}n.call(et.prototype)}}else{try{throw Error()}catch(H){G=H}(et=n())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(H){if(H&&G&&typeof H.stack=="string")return[H.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var R=E.split(`
`),q=A.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===q.length)for(u=R.length-1,f=q.length-1;1<=u&&0<=f&&R[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==q[f]){var W=`
`+R[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{uo=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ni(o):""}function su(n){switch(n.tag){case 26:case 27:case 5:return ni(n.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return co(n.type,!1);case 11:return co(n.type.render,!1);case 1:return co(n.type,!0);case 31:return ni("Activity");default:return""}}function ho(n){try{var s="";do s+=su(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function bn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function au(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pm(n){var s=au(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function fo(n){n._valueTracker||(n._valueTracker=pm(n))}function ou(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=au(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Ws(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var _m=/[\n"\\]/g;function Pe(n){return n.replace(_m,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zn(n,s,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+bn(s)):n.value!==""+bn(s)&&(n.value=""+bn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Qi(n,E,bn(s)):o!=null?Qi(n,E,bn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+bn(A):n.removeAttribute("name")}function Js(n,s,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+bn(o):"",s=s!=null?""+bn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Qi(n,s,o){s==="number"&&Ws(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ri(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+bn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ie(n,s,o){if(s!=null&&(s=""+bn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+bn(o):""}function ta(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if($t(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=bn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Jn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ea=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _h(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||ea.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function lu(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&_h(n,f,u)}else for(var g in s)s.hasOwnProperty(g)&&_h(n,g,s[g])}function uu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ym=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(n){return vm.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ii=null;function tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var si=null,ai=null;function cu(n){var s=Sr(n);if(s&&(n=s.stateNode)){var o=n[Me]||null;t:switch(n=s.stateNode,s.type){case"input":if(zn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Me]||null;if(!f)throw Error(i(90));zn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ou(u)}break t;case"textarea":ie(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&ri(n,!!o.multiple,s,!1)}}}var Cr=!1;function yh(n,s,o){if(Cr)return n(s,o);Cr=!0;try{var u=n(s);return u}finally{if(Cr=!1,(si!==null||ai!==null)&&(ff(),si&&(s=si,n=ai,ai=si=null,cu(s),n)))for(s=0;s<n.length;s++)cu(n[s])}}function na(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Me]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),er=!1;if(pr)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){er=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{er=!1}var Dr=null,$i=null,oi=null;function hu(){if(oi)return oi;var n,s=$i,o=s.length,u,f="value"in Dr?Dr.value:Dr.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&s[o-u]===f[g-u];u++);return oi=f.slice(n,1<u?1-u:void 0)}function xr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Vr(){return!0}function fu(){return!1}function Qe(n){function s(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Vr:fu,this.isPropagationStopped=fu,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),s}var Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=Qe(Zt),ia=y({},Zt,{view:0,detail:0}),vh=Qe(ia),po,_o,Nr,sa=y({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nr&&(Nr&&n.type==="mousemove"?(po=n.screenX-Nr.screenX,_o=n.screenY-Nr.screenY):_o=po=0,Nr=n),po)},movementY:function(n){return"movementY"in n?n.movementY:_o}}),nr=Qe(sa),Eh=y({},sa,{dataTransfer:0}),Em=Qe(Eh),aa=y({},ia,{relatedTarget:0}),yo=Qe(aa),du=y({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0}),vo=Qe(du),Th=y({},Zt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Eo=Qe(Th),Tm=y({},Zt,{data:0}),mu=Qe(Tm),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ah[n])?!!s[n]:!1}function la(){return gu}var wh=y({},ia,{key:function(n){if(n.key){var s=oa[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(n){return n.type==="keypress"?xr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),To=Qe(wh),Sh=y({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=Qe(Sh),li=y({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),Rh=Qe(li),Ih=y({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ch=Qe(Ih),Dh=y({},sa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bo=Qe(Dh),An=y({},Zt,{newState:0,oldState:0}),xh=Qe(An),Vh=[9,13,27,32],Or=pr&&"CompositionEvent"in window,h=null;pr&&"documentMode"in document&&(h=document.documentMode);var _=pr&&"TextEvent"in window&&!h,v=pr&&(!Or||h&&8<h&&11>=h),w=" ",L=!1;function $(n,s){switch(n){case"keyup":return Vh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ut(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zt=!1;function ze(n,s){switch(n){case"compositionend":return ut(s);case"keypress":return s.which!==32?null:(L=!0,w);case"textInput":return n=s.data,n===w&&L?null:n;default:return null}}function qt(n,s){if(zt)return n==="compositionend"||!Or&&$(n,s)?(n=hu(),oi=$i=Dr=null,zt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var $e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qe(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!$e[n.type]:s==="textarea"}function ui(n,s,o,u){si?ai?ai.push(u):ai=[u]:si=u,s=yf(s,"onChange"),0<s.length&&(o=new go("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var en=null,Mr=null;function _u(n){KT(n,0)}function Nh(n){var s=Rr(n);if(ou(s))return n}function dv(n,s){if(n==="change")return s}var mv=!1;if(pr){var bm;if(pr){var Am="oninput"in document;if(!Am){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),Am=typeof gv.oninput=="function"}bm=Am}else bm=!1;mv=bm&&(!document.documentMode||9<document.documentMode)}function pv(){en&&(en.detachEvent("onpropertychange",_v),Mr=en=null)}function _v(n){if(n.propertyName==="value"&&Nh(Mr)){var s=[];ui(s,Mr,n,tr(n)),yh(_u,s)}}function oI(n,s,o){n==="focusin"?(pv(),en=s,Mr=o,en.attachEvent("onpropertychange",_v)):n==="focusout"&&pv()}function lI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nh(Mr)}function uI(n,s){if(n==="click")return Nh(s)}function cI(n,s){if(n==="input"||n==="change")return Nh(s)}function hI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var qn=typeof Object.is=="function"?Object.is:hI;function yu(n,s){if(qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Nn.call(s,f)||!qn(n[f],s[f]))return!1}return!0}function yv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vv(n,s){var o=yv(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=yv(o)}}function Ev(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ev(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Tv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ws(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Ws(n.document)}return s}function wm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var fI=pr&&"documentMode"in document&&11>=document.documentMode,Ao=null,Sm=null,vu=null,Rm=!1;function bv(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Rm||Ao==null||Ao!==Ws(u)||(u=Ao,"selectionStart"in u&&wm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),vu&&yu(vu,u)||(vu=u,u=yf(Sm,"onSelect"),0<u.length&&(s=new go("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ao)))}function ua(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var wo={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Im={},Av={};pr&&(Av=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function ca(n){if(Im[n])return Im[n];if(!wo[n])return n;var s=wo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Av)return Im[n]=s[o];return n}var wv=ca("animationend"),Sv=ca("animationiteration"),Rv=ca("animationstart"),dI=ca("transitionrun"),mI=ca("transitionstart"),gI=ca("transitioncancel"),Iv=ca("transitionend"),Cv=new Map,Cm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cm.push("scrollEnd");function _r(n,s){Cv.set(n,s),gr(s,[n])}var Dv=new WeakMap;function rr(n,s){if(typeof n=="object"&&n!==null){var o=Dv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ho(s)},Dv.set(n,s),s)}return{value:n,source:s,stack:ho(s)}}var ir=[],So=0,Dm=0;function Oh(){for(var n=So,s=Dm=So=0;s<n;){var o=ir[s];ir[s++]=null;var u=ir[s];ir[s++]=null;var f=ir[s];ir[s++]=null;var g=ir[s];if(ir[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&xv(o,f,g)}}function Mh(n,s,o,u){ir[So++]=n,ir[So++]=s,ir[So++]=o,ir[So++]=u,Dm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function xm(n,s,o,u){return Mh(n,s,o,u),Ph(n)}function Ro(n,s){return Mh(n,null,null,s),Ph(n)}function xv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-hn(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),g):null}function Ph(n){if(50<Gu)throw Gu=0,kg=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Io={};function pI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(n,s,o,u){return new pI(n,s,o,u)}function Vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ci(n,s){var o=n.alternate;return o===null?(o=Fn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Vv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function kh(n,s,o,u,f,g){var E=0;if(u=n,typeof n=="function")Vm(n)&&(E=1);else if(typeof n=="string")E=yC(n,o,vt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case I:return n=Fn(31,o,s,f),n.elementType=I,n.lanes=g,n;case j:return ha(o.children,f,g,s);case Q:E=8,f|=24;break;case F:return n=Fn(12,o,s,f|2),n.elementType=F,n.lanes=g,n;case ft:return n=Fn(13,o,s,f),n.elementType=ft,n.lanes=g,n;case pt:return n=Fn(19,o,s,f),n.elementType=pt,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ct:case it:E=10;break t;case lt:E=9;break t;case dt:E=11;break t;case x:E=14;break t;case S:E=16,u=null;break t}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Fn(E,o,s,f),s.elementType=n,s.type=u,s.lanes=g,s}function ha(n,s,o,u){return n=Fn(7,n,u,s),n.lanes=o,n}function Nm(n,s,o){return n=Fn(6,n,null,s),n.lanes=o,n}function Om(n,s,o){return s=Fn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Co=[],Do=0,Uh=null,Lh=0,sr=[],ar=0,fa=null,hi=1,fi="";function da(n,s){Co[Do++]=Lh,Co[Do++]=Uh,Uh=n,Lh=s}function Nv(n,s,o){sr[ar++]=hi,sr[ar++]=fi,sr[ar++]=fa,fa=n;var u=hi;n=fi;var f=32-hn(u)-1;u&=~(1<<f),o+=1;var g=32-hn(s)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,hi=1<<32-hn(s)+f|o<<f|u,fi=g+n}else hi=1<<g|o<<f|u,fi=n}function Mm(n){n.return!==null&&(da(n,1),Nv(n,1,0))}function Pm(n){for(;n===Uh;)Uh=Co[--Do],Co[Do]=null,Lh=Co[--Do],Co[Do]=null;for(;n===fa;)fa=sr[--ar],sr[ar]=null,fi=sr[--ar],sr[ar]=null,hi=sr[--ar],sr[ar]=null}var wn=null,we=null,Yt=!1,ma=null,Pr=!1,km=Error(i(519));function ga(n){var s=Error(i(418,""));throw bu(rr(s,n)),km}function Ov(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[je]=n,s[Me]=u,o){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(o=0;o<Ku.length;o++)Pt(Ku[o],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),Js(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),fo(s);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),ta(s,u.value,u.defaultValue,u.children),fo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||XT(s.textContent,o)?(u.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),u.onScroll!=null&&Pt("scroll",s),u.onScrollEnd!=null&&Pt("scrollend",s),u.onClick!=null&&(s.onclick=vf),s=!0):s=!1,s||ga(n)}function Mv(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:wn=wn.return}}function Eu(n){if(n!==wn)return!1;if(!Yt)return Mv(n),Yt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Wg(n.type,n.memoizedProps)),o=!o),o&&we&&ga(n),Mv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){we=vr(n.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}we=null}}else s===27?(s=we,cs(n.type)?(n=np,np=null,we=n):we=s):we=wn?vr(n.stateNode.nextSibling):null;return!0}function Tu(){we=wn=null,Yt=!1}function Pv(){var n=ma;return n!==null&&(kn===null?kn=n:kn.push.apply(kn,n),ma=null),n}function bu(n){ma===null?ma=[n]:ma.push(n)}var Um=tt(null),pa=null,di=null;function Yi(n,s,o){st(Um,s._currentValue),s._currentValue=o}function mi(n){n._currentValue=Um.current,ot(Um)}function Lm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Bm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=f;for(var R=0;R<s.length;R++)if(A.context===s[R]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Lm(g.return,o,n),u||(E=null);break t}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Lm(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Au(n,s,o,u){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var A=f.type;qn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ht.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Wu):n=[Wu])}f=f.return}n!==null&&Bm(s,n,o,u),s.flags|=262144}function Bh(n){for(n=n.firstContext;n!==null;){if(!qn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function _a(n){pa=n,di=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function fn(n){return kv(pa,n)}function jh(n,s){return pa===null&&_a(n),kv(n,s)}function kv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},di===null){if(n===null)throw Error(i(308));di=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else di=di.next=s;return o}var _I=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},yI=r.unstable_scheduleCallback,vI=r.unstable_NormalPriority,Fe={$$typeof:it,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new _I,data:new Map,refCount:0}}function wu(n){n.refCount--,n.refCount===0&&yI(vI,function(){n.controller.abort()})}var Su=null,zm=0,xo=0,Vo=null;function EI(n,s){if(Su===null){var o=Su=[];zm=0,xo=Fg(),Vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zm++,s.then(Uv,Uv),s}function Uv(){if(--zm===0&&Su!==null){Vo!==null&&(Vo.status="fulfilled");var n=Su;Su=null,xo=0,Vo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function TI(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Lv=X.S;X.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&EI(n,s),Lv!==null&&Lv(n,s)};var ya=tt(null);function qm(){var n=ya.current;return n!==null?n:he.pooledCache}function zh(n,s){s===null?st(ya,ya.current):st(ya,s.pool)}function Bv(){var n=qm();return n===null?null:{parent:Fe._currentValue,pool:n}}var Ru=Error(i(460)),jv=Error(i(474)),qh=Error(i(542)),Fm={then:function(){}};function zv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Fh(){}function qv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Fh,Fh),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gv(n),n;default:if(typeof s.status=="string")s.then(Fh,Fh);else{if(n=he,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gv(n),n}throw Iu=s,Ru}}var Iu=null;function Fv(){if(Iu===null)throw Error(i(459));var n=Iu;return Iu=null,n}function Gv(n){if(n===Ru||n===qh)throw Error(i(483))}var Xi=!1;function Gm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Wi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Jt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Ph(n),xv(n,null,o),s}return Mh(n,u,s,o),Ph(n)}function Cu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,nu(n,o)}}function Km(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Qm=!1;function Du(){if(Qm){var n=Vo;if(n!==null)throw n}}function xu(n,s,o,u){Qm=!1;var f=n.updateQueue;Xi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var R=A,q=R.next;R.next=null,E===null?g=q:E.next=q,E=R;var W=n.alternate;W!==null&&(W=W.updateQueue,A=W.lastBaseUpdate,A!==E&&(A===null?W.firstBaseUpdate=q:A.next=q,W.lastBaseUpdate=R))}if(g!==null){var et=f.baseState;E=0,W=q=R=null,A=g;do{var G=A.lane&-536870913,H=G!==A.lane;if(H?(Ft&G)===G:(u&G)===G){G!==0&&G===xo&&(Qm=!0),W!==null&&(W=W.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Ct=n,St=A;G=s;var oe=o;switch(St.tag){case 1:if(Ct=St.payload,typeof Ct=="function"){et=Ct.call(oe,et,G);break t}et=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=St.payload,G=typeof Ct=="function"?Ct.call(oe,et,G):Ct,G==null)break t;et=y({},et,G);break t;case 2:Xi=!0}}G=A.callback,G!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[G]:H.push(G))}else H={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},W===null?(q=W=H,R=et):W=W.next=H,E|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);W===null&&(R=et),f.baseState=R,f.firstBaseUpdate=q,f.lastBaseUpdate=W,g===null&&(f.shared.lanes=0),as|=E,n.lanes=E,n.memoizedState=et}}function Hv(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Kv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Hv(o[n],s)}var No=tt(null),Gh=tt(0);function Qv(n,s){n=Ti,st(Gh,n),st(No,s),Ti=n|s.baseLanes}function $m(){st(Gh,Ti),st(No,No.current)}function Ym(){Ti=Gh.current,ot(No),ot(Gh)}var Ji=0,Nt=null,se=null,ke=null,Hh=!1,Oo=!1,va=!1,Kh=0,Vu=0,Mo=null,bI=0;function Ce(){throw Error(i(321))}function Xm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!qn(n[o],s[o]))return!1;return!0}function Zm(n,s,o,u,f,g){return Ji=g,Nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?xE:VE,va=!1,g=o(u,f),va=!1,Oo&&(g=Yv(s,o,u,f)),$v(n),g}function $v(n){X.H=Wh;var s=se!==null&&se.next!==null;if(Ji=0,ke=se=Nt=null,Hh=!1,Vu=0,Mo=null,s)throw Error(i(300));n===null||Ye||(n=n.dependencies,n!==null&&Bh(n)&&(Ye=!0))}function Yv(n,s,o,u){Nt=n;var f=0;do{if(Oo&&(Mo=null),Vu=0,Oo=!1,25<=f)throw Error(i(301));if(f+=1,ke=se=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=DI,g=s(o,u)}while(Oo);return g}function AI(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Nu(s):s,n=n.useState()[0],(se!==null?se.memoizedState:null)!==n&&(Nt.flags|=1024),s}function Wm(){var n=Kh!==0;return Kh=0,n}function Jm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function tg(n){if(Hh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hh=!1}Ji=0,ke=se=Nt=null,Oo=!1,Vu=Kh=0,Mo=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Nt.memoizedState=ke=n:ke=ke.next=n,ke}function Ue(){if(se===null){var n=Nt.alternate;n=n!==null?n.memoizedState:null}else n=se.next;var s=ke===null?Nt.memoizedState:ke.next;if(s!==null)ke=s,se=n;else{if(n===null)throw Nt.alternate===null?Error(i(467)):Error(i(310));se=n,n={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ke===null?Nt.memoizedState=ke=n:ke=ke.next=n}return ke}function eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nu(n){var s=Vu;return Vu+=1,Mo===null&&(Mo=[]),n=qv(Mo,n,s),s=Nt,(ke===null?s.memoizedState:ke.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?xE:VE),n}function Qh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Nu(n);if(n.$$typeof===it)return fn(n)}throw Error(i(438,String(n)))}function ng(n){var s=null,o=Nt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Nt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=eg(),Nt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=O;return s.index++,o}function gi(n,s){return typeof s=="function"?s(n):s}function $h(n){var s=Ue();return rg(s,se,n)}function rg(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}s.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var A=E=null,R=null,q=s,W=!1;do{var et=q.lane&-536870913;if(et!==q.lane?(Ft&et)===et:(Ji&et)===et){var G=q.revertLane;if(G===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),et===xo&&(W=!0);else if((Ji&G)===G){q=q.next,G===xo&&(W=!0);continue}else et={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(A=R=et,E=g):R=R.next=et,Nt.lanes|=G,as|=G;et=q.action,va&&o(g,et),g=q.hasEagerState?q.eagerState:o(g,et)}else G={lane:et,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(A=R=G,E=g):R=R.next=G,Nt.lanes|=et,as|=et;q=q.next}while(q!==null&&q!==s);if(R===null?E=g:R.next=A,!qn(g,n.memoizedState)&&(Ye=!0,W&&(o=Vo,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=R,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ig(n){var s=Ue(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);qn(g,s.memoizedState)||(Ye=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function Xv(n,s,o){var u=Nt,f=Ue(),g=Yt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!qn((se||f).memoizedState,o);E&&(f.memoizedState=o,Ye=!0),f=f.queue;var A=Jv.bind(null,u,f,n);if(Ou(2048,8,A,[n]),f.getSnapshot!==s||E||ke!==null&&ke.memoizedState.tag&1){if(u.flags|=2048,Po(9,Yh(),Wv.bind(null,u,f,o,s),null),he===null)throw Error(i(349));g||(Ji&124)!==0||Zv(u,s,o)}return o}function Zv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Nt.updateQueue,s===null?(s=eg(),Nt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Wv(n,s,o,u){s.value=o,s.getSnapshot=u,tE(s)&&eE(n)}function Jv(n,s,o){return o(function(){tE(s)&&eE(n)})}function tE(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!qn(n,o)}catch{return!0}}function eE(n){var s=Ro(n,2);s!==null&&$n(s,n,2)}function sg(n){var s=Mn();if(typeof n=="function"){var o=n;if(n=o(),va){cn(!0);try{o()}finally{cn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:n},s}function nE(n,s,o,u){return n.baseState=o,rg(n,se,typeof u=="function"?u:gi)}function wI(n,s,o,u,f){if(Zh(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};X.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,rE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function rE(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var g=X.T,E={};X.T=E;try{var A=o(f,u),R=X.S;R!==null&&R(E,A),iE(n,s,A)}catch(q){ag(n,s,q)}finally{X.T=g}}else try{g=o(f,u),iE(n,s,g)}catch(q){ag(n,s,q)}}function iE(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){sE(n,s,u)},function(u){return ag(n,s,u)}):sE(n,s,o)}function sE(n,s,o){s.status="fulfilled",s.value=o,aE(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,rE(n,o)))}function ag(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,aE(s),s=s.next;while(s!==u)}n.action=null}function aE(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function oE(n,s){return s}function lE(n,s){if(Yt){var o=he.formState;if(o!==null){t:{var u=Nt;if(Yt){if(we){e:{for(var f=we,g=Pr;f.nodeType!==8;){if(!g){f=null;break e}if(f=vr(f.nextSibling),f===null){f=null;break e}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){we=vr(f.nextSibling),u=f.data==="F!";break t}}ga(u)}u=!1}u&&(s=o[0])}}return o=Mn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oE,lastRenderedState:s},o.queue=u,o=IE.bind(null,Nt,u),u.dispatch=o,u=sg(!1),g=hg.bind(null,Nt,!1,u.queue),u=Mn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=wI.bind(null,Nt,f,g,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function uE(n){var s=Ue();return cE(s,se,n)}function cE(n,s,o){if(s=rg(n,s,oE)[0],n=$h(gi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Nu(s)}catch(E){throw E===Ru?qh:E}else u=s;s=Ue();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(Nt.flags|=2048,Po(9,Yh(),SI.bind(null,f,o),null)),[u,g,n]}function SI(n,s){n.action=s}function hE(n){var s=Ue(),o=se;if(o!==null)return cE(s,o,n);Ue(),s=s.memoizedState,o=Ue();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Po(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Nt.updateQueue,s===null&&(s=eg(),Nt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Yh(){return{destroy:void 0,resource:void 0}}function fE(){return Ue().memoizedState}function Xh(n,s,o,u){var f=Mn();u=u===void 0?null:u,Nt.flags|=n,f.memoizedState=Po(1|s,Yh(),o,u)}function Ou(n,s,o,u){var f=Ue();u=u===void 0?null:u;var g=f.memoizedState.inst;se!==null&&u!==null&&Xm(u,se.memoizedState.deps)?f.memoizedState=Po(s,g,o,u):(Nt.flags|=n,f.memoizedState=Po(1|s,g,o,u))}function dE(n,s){Xh(8390656,8,n,s)}function mE(n,s){Ou(2048,8,n,s)}function gE(n,s){return Ou(4,2,n,s)}function pE(n,s){return Ou(4,4,n,s)}function _E(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function yE(n,s,o){o=o!=null?o.concat([n]):null,Ou(4,4,_E.bind(null,s,n),o)}function og(){}function vE(n,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function EE(n,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xm(s,u[1]))return u[0];if(u=n(),va){cn(!0);try{n()}finally{cn(!1)}}return o.memoizedState=[u,s],u}function lg(n,s,o){return o===void 0||(Ji&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=AT(),Nt.lanes|=n,as|=n,o)}function TE(n,s,o,u){return qn(o,s)?o:No.current!==null?(n=lg(n,o,u),qn(n,s)||(Ye=!0),n):(Ji&42)===0?(Ye=!0,n.memoizedState=o):(n=AT(),Nt.lanes|=n,as|=n,s)}function bE(n,s,o,u,f){var g=at.p;at.p=g!==0&&8>g?g:8;var E=X.T,A={};X.T=A,hg(n,!1,s,o);try{var R=f(),q=X.S;if(q!==null&&q(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=TI(R,u);Mu(n,s,W,Qn(n))}else Mu(n,s,u,Qn(n))}catch(et){Mu(n,s,{then:function(){},status:"rejected",reason:et},Qn())}finally{at.p=g,X.T=E}}function RI(){}function ug(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=AE(n).queue;bE(n,f,s,mt,o===null?RI:function(){return wE(n),o(u)})}function AE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:mt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function wE(n){var s=AE(n).next.queue;Mu(n,s,{},Qn())}function cg(){return fn(Wu)}function SE(){return Ue().memoizedState}function RE(){return Ue().memoizedState}function II(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Qn();n=Zi(o);var u=Wi(s,n,o);u!==null&&($n(u,s,o),Cu(u,s,o)),s={cache:jm()},n.payload=s;return}s=s.return}}function CI(n,s,o){var u=Qn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Zh(n)?CE(s,o):(o=xm(n,s,o,u),o!==null&&($n(o,n,u),DE(o,s,u)))}function IE(n,s,o){var u=Qn();Mu(n,s,o,u)}function Mu(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zh(n))CE(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,qn(A,E))return Mh(n,s,f,0),he===null&&Oh(),!1}catch{}finally{}if(o=xm(n,s,f,u),o!==null)return $n(o,n,u),DE(o,s,u),!0}return!1}function hg(n,s,o,u){if(u={lane:2,revertLane:Fg(),action:u,hasEagerState:!1,eagerState:null,next:null},Zh(n)){if(s)throw Error(i(479))}else s=xm(n,o,u,2),s!==null&&$n(s,n,2)}function Zh(n){var s=n.alternate;return n===Nt||s!==null&&s===Nt}function CE(n,s){Oo=Hh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function DE(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,nu(n,o)}}var Wh={readContext:fn,use:Qh,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce},xE={readContext:fn,use:Qh,useCallback:function(n,s){return Mn().memoizedState=[n,s===void 0?null:s],n},useContext:fn,useEffect:dE,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Xh(4194308,4,_E.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Xh(4194308,4,n,s)},useInsertionEffect:function(n,s){Xh(4,2,n,s)},useMemo:function(n,s){var o=Mn();s=s===void 0?null:s;var u=n();if(va){cn(!0);try{n()}finally{cn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Mn();if(o!==void 0){var f=o(s);if(va){cn(!0);try{o(s)}finally{cn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=CI.bind(null,Nt,n),[u.memoizedState,n]},useRef:function(n){var s=Mn();return n={current:n},s.memoizedState=n},useState:function(n){n=sg(n);var s=n.queue,o=IE.bind(null,Nt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:og,useDeferredValue:function(n,s){var o=Mn();return lg(o,n,s)},useTransition:function(){var n=sg(!1);return n=bE.bind(null,Nt,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Nt,f=Mn();if(Yt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),he===null)throw Error(i(349));(Ft&124)!==0||Zv(u,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,dE(Jv.bind(null,u,g,n),[n]),u.flags|=2048,Po(9,Yh(),Wv.bind(null,u,g,o,s),null),o},useId:function(){var n=Mn(),s=he.identifierPrefix;if(Yt){var o=fi,u=hi;o=(u&~(1<<32-hn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Kh++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=bI++,s="«"+s+"r"+o.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:cg,useFormState:lE,useActionState:lE,useOptimistic:function(n){var s=Mn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=hg.bind(null,Nt,!0,o),o.dispatch=s,[n,s]},useMemoCache:ng,useCacheRefresh:function(){return Mn().memoizedState=II.bind(null,Nt)}},VE={readContext:fn,use:Qh,useCallback:vE,useContext:fn,useEffect:mE,useImperativeHandle:yE,useInsertionEffect:gE,useLayoutEffect:pE,useMemo:EE,useReducer:$h,useRef:fE,useState:function(){return $h(gi)},useDebugValue:og,useDeferredValue:function(n,s){var o=Ue();return TE(o,se.memoizedState,n,s)},useTransition:function(){var n=$h(gi)[0],s=Ue().memoizedState;return[typeof n=="boolean"?n:Nu(n),s]},useSyncExternalStore:Xv,useId:SE,useHostTransitionStatus:cg,useFormState:uE,useActionState:uE,useOptimistic:function(n,s){var o=Ue();return nE(o,se,n,s)},useMemoCache:ng,useCacheRefresh:RE},DI={readContext:fn,use:Qh,useCallback:vE,useContext:fn,useEffect:mE,useImperativeHandle:yE,useInsertionEffect:gE,useLayoutEffect:pE,useMemo:EE,useReducer:ig,useRef:fE,useState:function(){return ig(gi)},useDebugValue:og,useDeferredValue:function(n,s){var o=Ue();return se===null?lg(o,n,s):TE(o,se.memoizedState,n,s)},useTransition:function(){var n=ig(gi)[0],s=Ue().memoizedState;return[typeof n=="boolean"?n:Nu(n),s]},useSyncExternalStore:Xv,useId:SE,useHostTransitionStatus:cg,useFormState:hE,useActionState:hE,useOptimistic:function(n,s){var o=Ue();return se!==null?nE(o,se,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:ng,useCacheRefresh:RE},ko=null,Pu=0;function Jh(n){var s=Pu;return Pu+=1,ko===null&&(ko=[]),qv(ko,n,s)}function ku(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function tf(n,s){throw s.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function NE(n){var s=n._init;return s(n._payload)}function OE(n){function s(U,N){if(n){var z=U.deletions;z===null?(U.deletions=[N],U.flags|=16):z.push(N)}}function o(U,N){if(!n)return null;for(;N!==null;)s(U,N),N=N.sibling;return null}function u(U){for(var N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function f(U,N){return U=ci(U,N),U.index=0,U.sibling=null,U}function g(U,N,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<N?(U.flags|=67108866,N):z):(U.flags|=67108866,N)):(U.flags|=1048576,N)}function E(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function A(U,N,z,J){return N===null||N.tag!==6?(N=Nm(z,U.mode,J),N.return=U,N):(N=f(N,z),N.return=U,N)}function R(U,N,z,J){var Et=z.type;return Et===j?W(U,N,z.props.children,J,z.key):N!==null&&(N.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===S&&NE(Et)===N.type)?(N=f(N,z.props),ku(N,z),N.return=U,N):(N=kh(z.type,z.key,z.props,null,U.mode,J),ku(N,z),N.return=U,N)}function q(U,N,z,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=Om(z,U.mode,J),N.return=U,N):(N=f(N,z.children||[]),N.return=U,N)}function W(U,N,z,J,Et){return N===null||N.tag!==7?(N=ha(z,U.mode,J,Et),N.return=U,N):(N=f(N,z),N.return=U,N)}function et(U,N,z){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Nm(""+N,U.mode,z),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return z=kh(N.type,N.key,N.props,null,U.mode,z),ku(z,N),z.return=U,z;case D:return N=Om(N,U.mode,z),N.return=U,N;case S:var J=N._init;return N=J(N._payload),et(U,N,z)}if($t(N)||P(N))return N=ha(N,U.mode,z,null),N.return=U,N;if(typeof N.then=="function")return et(U,Jh(N),z);if(N.$$typeof===it)return et(U,jh(U,N),z);tf(U,N)}return null}function G(U,N,z,J){var Et=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Et!==null?null:A(U,N,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return z.key===Et?R(U,N,z,J):null;case D:return z.key===Et?q(U,N,z,J):null;case S:return Et=z._init,z=Et(z._payload),G(U,N,z,J)}if($t(z)||P(z))return Et!==null?null:W(U,N,z,J,null);if(typeof z.then=="function")return G(U,N,Jh(z),J);if(z.$$typeof===it)return G(U,N,jh(U,z),J);tf(U,z)}return null}function H(U,N,z,J,Et){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(z)||null,A(N,U,""+J,Et);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return U=U.get(J.key===null?z:J.key)||null,R(N,U,J,Et);case D:return U=U.get(J.key===null?z:J.key)||null,q(N,U,J,Et);case S:var Ot=J._init;return J=Ot(J._payload),H(U,N,z,J,Et)}if($t(J)||P(J))return U=U.get(z)||null,W(N,U,J,Et,null);if(typeof J.then=="function")return H(U,N,z,Jh(J),Et);if(J.$$typeof===it)return H(U,N,z,jh(N,J),Et);tf(N,J)}return null}function Ct(U,N,z,J){for(var Et=null,Ot=null,At=N,Rt=N=0,Ze=null;At!==null&&Rt<z.length;Rt++){At.index>Rt?(Ze=At,At=null):Ze=At.sibling;var Kt=G(U,At,z[Rt],J);if(Kt===null){At===null&&(At=Ze);break}n&&At&&Kt.alternate===null&&s(U,At),N=g(Kt,N,Rt),Ot===null?Et=Kt:Ot.sibling=Kt,Ot=Kt,At=Ze}if(Rt===z.length)return o(U,At),Yt&&da(U,Rt),Et;if(At===null){for(;Rt<z.length;Rt++)At=et(U,z[Rt],J),At!==null&&(N=g(At,N,Rt),Ot===null?Et=At:Ot.sibling=At,Ot=At);return Yt&&da(U,Rt),Et}for(At=u(At);Rt<z.length;Rt++)Ze=H(At,U,Rt,z[Rt],J),Ze!==null&&(n&&Ze.alternate!==null&&At.delete(Ze.key===null?Rt:Ze.key),N=g(Ze,N,Rt),Ot===null?Et=Ze:Ot.sibling=Ze,Ot=Ze);return n&&At.forEach(function(gs){return s(U,gs)}),Yt&&da(U,Rt),Et}function St(U,N,z,J){if(z==null)throw Error(i(151));for(var Et=null,Ot=null,At=N,Rt=N=0,Ze=null,Kt=z.next();At!==null&&!Kt.done;Rt++,Kt=z.next()){At.index>Rt?(Ze=At,At=null):Ze=At.sibling;var gs=G(U,At,Kt.value,J);if(gs===null){At===null&&(At=Ze);break}n&&At&&gs.alternate===null&&s(U,At),N=g(gs,N,Rt),Ot===null?Et=gs:Ot.sibling=gs,Ot=gs,At=Ze}if(Kt.done)return o(U,At),Yt&&da(U,Rt),Et;if(At===null){for(;!Kt.done;Rt++,Kt=z.next())Kt=et(U,Kt.value,J),Kt!==null&&(N=g(Kt,N,Rt),Ot===null?Et=Kt:Ot.sibling=Kt,Ot=Kt);return Yt&&da(U,Rt),Et}for(At=u(At);!Kt.done;Rt++,Kt=z.next())Kt=H(At,U,Rt,Kt.value,J),Kt!==null&&(n&&Kt.alternate!==null&&At.delete(Kt.key===null?Rt:Kt.key),N=g(Kt,N,Rt),Ot===null?Et=Kt:Ot.sibling=Kt,Ot=Kt);return n&&At.forEach(function(xC){return s(U,xC)}),Yt&&da(U,Rt),Et}function oe(U,N,z,J){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case b:t:{for(var Et=z.key;N!==null;){if(N.key===Et){if(Et=z.type,Et===j){if(N.tag===7){o(U,N.sibling),J=f(N,z.props.children),J.return=U,U=J;break t}}else if(N.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===S&&NE(Et)===N.type){o(U,N.sibling),J=f(N,z.props),ku(J,z),J.return=U,U=J;break t}o(U,N);break}else s(U,N);N=N.sibling}z.type===j?(J=ha(z.props.children,U.mode,J,z.key),J.return=U,U=J):(J=kh(z.type,z.key,z.props,null,U.mode,J),ku(J,z),J.return=U,U=J)}return E(U);case D:t:{for(Et=z.key;N!==null;){if(N.key===Et)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){o(U,N.sibling),J=f(N,z.children||[]),J.return=U,U=J;break t}else{o(U,N);break}else s(U,N);N=N.sibling}J=Om(z,U.mode,J),J.return=U,U=J}return E(U);case S:return Et=z._init,z=Et(z._payload),oe(U,N,z,J)}if($t(z))return Ct(U,N,z,J);if(P(z)){if(Et=P(z),typeof Et!="function")throw Error(i(150));return z=Et.call(z),St(U,N,z,J)}if(typeof z.then=="function")return oe(U,N,Jh(z),J);if(z.$$typeof===it)return oe(U,N,jh(U,z),J);tf(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,N!==null&&N.tag===6?(o(U,N.sibling),J=f(N,z),J.return=U,U=J):(o(U,N),J=Nm(z,U.mode,J),J.return=U,U=J),E(U)):o(U,N)}return function(U,N,z,J){try{Pu=0;var Et=oe(U,N,z,J);return ko=null,Et}catch(At){if(At===Ru||At===qh)throw At;var Ot=Fn(29,At,null,U.mode);return Ot.lanes=J,Ot.return=U,Ot}finally{}}}var Uo=OE(!0),ME=OE(!1),or=tt(null),kr=null;function ts(n){var s=n.alternate;st(Ge,Ge.current&1),st(or,n),kr===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(kr=n)}function PE(n){if(n.tag===22){if(st(Ge,Ge.current),st(or,n),kr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(kr=n)}}else es()}function es(){st(Ge,Ge.current),st(or,or.current)}function pi(n){ot(or),kr===n&&(kr=null),ot(Ge)}var Ge=tt(0);function ef(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ep(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fg(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var dg={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Qn(),f=Zi(u);f.payload=s,o!=null&&(f.callback=o),s=Wi(n,f,u),s!==null&&($n(s,n,u),Cu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Qn(),f=Zi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Wi(n,f,u),s!==null&&($n(s,n,u),Cu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Qn(),u=Zi(o);u.tag=2,s!=null&&(u.callback=s),s=Wi(n,u,o),s!==null&&($n(s,n,o),Cu(s,n,o))}};function kE(n,s,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!yu(o,u)||!yu(f,g):!0}function UE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&dg.enqueueReplaceState(s,s.state,null)}function Ea(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var nf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function LE(n){nf(n)}function BE(n){console.error(n)}function jE(n){nf(n)}function rf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function zE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mg(n,s,o){return o=Zi(o),o.tag=3,o.payload={element:null},o.callback=function(){rf(n,s)},o}function qE(n){return n=Zi(n),n.tag=3,n}function FE(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){zE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){zE(s,o,u),typeof f!="function"&&(os===null?os=new Set([this]):os.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function xI(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Au(s,o,f,!0),o=or.current,o!==null){switch(o.tag){case 13:return kr===null?Lg():o.alternate===null&&Se===0&&(Se=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Fm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),jg(n,u,f)),!1;case 22:return o.flags|=65536,u===Fm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),jg(n,u,f)),!1}throw Error(i(435,o.tag))}return jg(n,u,f),Lg(),!1}if(Yt)return s=or.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==km&&(n=Error(i(422),{cause:u}),bu(rr(n,o)))):(u!==km&&(s=Error(i(423),{cause:u}),bu(rr(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=rr(u,o),f=mg(n.stateNode,u,f),Km(n,f),Se!==4&&(Se=2)),!1;var g=Error(i(520),{cause:u});if(g=rr(g,o),Fu===null?Fu=[g]:Fu.push(g),Se!==4&&(Se=2),s===null)return!0;u=rr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=mg(o.stateNode,u,n),Km(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(os===null||!os.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=qE(f),FE(f,n,o,u),Km(o,f),!1}o=o.return}while(o!==null);return!1}var GE=Error(i(461)),Ye=!1;function nn(n,s,o,u){s.child=n===null?ME(s,null,o,u):Uo(s,n.child,o,u)}function HE(n,s,o,u,f){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return _a(s),u=Zm(n,s,o,E,g,f),A=Wm(),n!==null&&!Ye?(Jm(n,s,f),_i(n,s,f)):(Yt&&A&&Mm(s),s.flags|=1,nn(n,s,u,f),s.child)}function KE(n,s,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!Vm(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,QE(n,s,g,u,f)):(n=kh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!bg(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:yu,o(E,u)&&n.ref===s.ref)return _i(n,s,f)}return s.flags|=1,n=ci(g,u),n.ref=s.ref,n.return=s,s.child=n}function QE(n,s,o,u,f){if(n!==null){var g=n.memoizedProps;if(yu(g,u)&&n.ref===s.ref)if(Ye=!1,s.pendingProps=u=g,bg(n,f))(n.flags&131072)!==0&&(Ye=!0);else return s.lanes=n.lanes,_i(n,s,f)}return gg(n,s,o,u,f)}function $E(n,s,o){var u=s.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=s.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return YE(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&zh(s,g!==null?g.cachePool:null),g!==null?Qv(s,g):$m(),PE(s);else return s.lanes=s.childLanes=536870912,YE(n,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(zh(s,g.cachePool),Qv(s,g),es(),s.memoizedState=null):(n!==null&&zh(s,null),$m(),es());return nn(n,s,f,o),s.child}function YE(n,s,o,u){var f=qm();return f=f===null?null:{parent:Fe._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&zh(s,null),$m(),PE(s),n!==null&&Au(n,s,u,!0),null}function sf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function gg(n,s,o,u,f){return _a(s),o=Zm(n,s,o,u,void 0,f),u=Wm(),n!==null&&!Ye?(Jm(n,s,f),_i(n,s,f)):(Yt&&u&&Mm(s),s.flags|=1,nn(n,s,o,f),s.child)}function XE(n,s,o,u,f,g){return _a(s),s.updateQueue=null,o=Yv(s,u,o,f),$v(n),u=Wm(),n!==null&&!Ye?(Jm(n,s,g),_i(n,s,g)):(Yt&&u&&Mm(s),s.flags|=1,nn(n,s,o,g),s.child)}function ZE(n,s,o,u,f){if(_a(s),s.stateNode===null){var g=Io,E=o.contextType;typeof E=="object"&&E!==null&&(g=fn(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=dg,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Gm(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?fn(E):Io,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(fg(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&dg.enqueueReplaceState(g,g.state,null),xu(s,u,g,f),Du(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var A=s.memoizedProps,R=Ea(o,A);g.props=R;var q=g.context,W=o.contextType;E=Io,typeof W=="object"&&W!==null&&(E=fn(W));var et=o.getDerivedStateFromProps;W=typeof et=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||q!==E)&&UE(s,g,u,E),Xi=!1;var G=s.memoizedState;g.state=G,xu(s,u,g,f),Du(),q=s.memoizedState,A||G!==q||Xi?(typeof et=="function"&&(fg(s,o,et,u),q=s.memoizedState),(R=Xi||kE(s,o,R,u,G,q,E))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=q),g.props=u,g.state=q,g.context=E,u=R):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Hm(n,s),E=s.memoizedProps,W=Ea(o,E),g.props=W,et=s.pendingProps,G=g.context,q=o.contextType,R=Io,typeof q=="object"&&q!==null&&(R=fn(q)),A=o.getDerivedStateFromProps,(q=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==et||G!==R)&&UE(s,g,u,R),Xi=!1,G=s.memoizedState,g.state=G,xu(s,u,g,f),Du();var H=s.memoizedState;E!==et||G!==H||Xi||n!==null&&n.dependencies!==null&&Bh(n.dependencies)?(typeof A=="function"&&(fg(s,o,A,u),H=s.memoizedState),(W=Xi||kE(s,o,W,u,G,H,R)||n!==null&&n.dependencies!==null&&Bh(n.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,R)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),g.props=u,g.state=H,g.context=R,u=W):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,sf(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Uo(s,n.child,null,f),s.child=Uo(s,null,o,f)):nn(n,s,o,f),s.memoizedState=g.state,n=s.child):n=_i(n,s,f),n}function WE(n,s,o,u){return Tu(),s.flags|=256,nn(n,s,o,u),s.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _g(n){return{baseLanes:n,cachePool:Bv()}}function yg(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=lr),n}function JE(n,s,o){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Ge.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Yt){if(f?ts(s):es(),Yt){var A=we,R;if(R=A){t:{for(R=A,A=Pr;R.nodeType!==8;){if(!A){A=null;break t}if(R=vr(R.nextSibling),R===null){A=null;break t}}A=R}A!==null?(s.memoizedState={dehydrated:A,treeContext:fa!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},R=Fn(18,null,null,0),R.stateNode=A,R.return=s,s.child=R,wn=s,we=null,R=!0):R=!1}R||ga(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return ep(A)?s.lanes=32:s.lanes=536870912,null;pi(s)}return A=u.children,u=u.fallback,f?(es(),f=s.mode,A=af({mode:"hidden",children:A},f),u=ha(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=_g(o),f.childLanes=yg(n,E,o),s.memoizedState=pg,u):(ts(s),vg(s,A))}if(R=n.memoizedState,R!==null&&(A=R.dehydrated,A!==null)){if(g)s.flags&256?(ts(s),s.flags&=-257,s=Eg(n,s,o)):s.memoizedState!==null?(es(),s.child=n.child,s.flags|=128,s=null):(es(),f=u.fallback,A=s.mode,u=af({mode:"visible",children:u.children},A),f=ha(f,A,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Uo(s,n.child,null,o),u=s.child,u.memoizedState=_g(o),u.childLanes=yg(n,E,o),s.memoizedState=pg,s=f);else if(ts(s),ep(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var q=E.dgst;E=q,u=Error(i(419)),u.stack="",u.digest=E,bu({value:u,source:null,stack:null}),s=Eg(n,s,o)}else if(Ye||Au(n,s,o,!1),E=(o&n.childLanes)!==0,Ye||E){if(E=he,E!==null&&(u=o&-o,u=(u&42)!==0?1:qi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,Ro(n,u),$n(E,n,u),GE;A.data==="$?"||Lg(),s=Eg(n,s,o)}else A.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=R.treeContext,we=vr(A.nextSibling),wn=s,Yt=!0,ma=null,Pr=!1,n!==null&&(sr[ar++]=hi,sr[ar++]=fi,sr[ar++]=fa,hi=n.id,fi=n.overflow,fa=s),s=vg(s,u.children),s.flags|=4096);return s}return f?(es(),f=u.fallback,A=s.mode,R=n.child,q=R.sibling,u=ci(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,q!==null?f=ci(q,f):(f=ha(f,A,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=n.child.memoizedState,A===null?A=_g(o):(R=A.cachePool,R!==null?(q=Fe._currentValue,R=R.parent!==q?{parent:q,pool:q}:R):R=Bv(),A={baseLanes:A.baseLanes|o,cachePool:R}),f.memoizedState=A,f.childLanes=yg(n,E,o),s.memoizedState=pg,u):(ts(s),o=n.child,n=o.sibling,o=ci(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function vg(n,s){return s=af({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function af(n,s){return n=Fn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Eg(n,s,o){return Uo(s,n.child,null,o),n=vg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tT(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Lm(n.return,s,o)}function Tg(n,s,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function eT(n,s,o){var u=s.pendingProps,f=u.revealOrder,g=u.tail;if(nn(n,s,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tT(n,o,s);else if(n.tag===19)tT(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(st(Ge,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&ef(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Tg(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&ef(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Tg(s,!0,o,null,g);break;case"together":Tg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _i(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),as|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Au(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ci(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ci(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function bg(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Bh(n)))}function VI(n,s,o){switch(s.tag){case 3:jt(s,s.stateNode.containerInfo),Yi(s,Fe,n.memoizedState.cache),Tu();break;case 27:case 5:En(s);break;case 4:jt(s,s.stateNode.containerInfo);break;case 10:Yi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ts(s),s.flags|=128,null):(o&s.child.childLanes)!==0?JE(n,s,o):(ts(s),n=_i(n,s,o),n!==null?n.sibling:null);ts(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Au(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return eT(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,$E(n,s,o);case 24:Yi(s,Fe,n.memoizedState.cache)}return _i(n,s,o)}function nT(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ye=!0;else{if(!bg(n,o)&&(s.flags&128)===0)return Ye=!1,VI(n,s,o);Ye=(n.flags&131072)!==0}else Ye=!1,Yt&&(s.flags&1048576)!==0&&Nv(s,Lh,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Vm(u)?(n=Ea(u,n),s.tag=1,s=ZE(null,s,u,n,o)):(s.tag=0,s=gg(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===dt){s.tag=11,s=HE(null,s,u,n,o);break t}else if(f===x){s.tag=14,s=KE(null,s,u,n,o);break t}}throw s=pe(u)||u,Error(i(306,s,""))}}return s;case 0:return gg(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Ea(u,s.pendingProps),ZE(n,s,u,f,o);case 3:t:{if(jt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,Hm(n,s),xu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Yi(s,Fe,u),u!==g.cache&&Bm(s,[Fe],o,!0),Du(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=WE(n,s,u,o);break t}else if(u!==f){f=rr(Error(i(424)),s),bu(f),s=WE(n,s,u,o);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(we=vr(n.firstChild),wn=s,Yt=!0,ma=null,Pr=!0,o=ME(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Tu(),u===f){s=_i(n,s,o);break t}nn(n,s,u,o)}s=s.child}return s;case 26:return sf(n,s),n===null?(o=ab(s.type,null,s.pendingProps,null))?s.memoizedState=o:Yt||(o=s.type,n=s.pendingProps,u=Ef(yt.current).createElement(o),u[je]=s,u[Me]=n,sn(u,o,n),Ie(u),s.stateNode=u):s.memoizedState=ab(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return En(s),n===null&&Yt&&(u=s.stateNode=rb(s.type,s.pendingProps,yt.current),wn=s,Pr=!0,f=we,cs(s.type)?(np=f,we=vr(u.firstChild)):we=f),nn(n,s,s.pendingProps.children,o),sf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Yt&&((f=u=we)&&(u=sC(u,s.type,s.pendingProps,Pr),u!==null?(s.stateNode=u,wn=s,we=vr(u.firstChild),Pr=!1,f=!0):f=!1),f||ga(s)),En(s),f=s.type,g=s.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,Wg(f,g)?u=null:E!==null&&Wg(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Zm(n,s,AI,null,null,o),Wu._currentValue=f),sf(n,s),nn(n,s,u,o),s.child;case 6:return n===null&&Yt&&((n=o=we)&&(o=aC(o,s.pendingProps,Pr),o!==null?(s.stateNode=o,wn=s,we=null,n=!0):n=!1),n||ga(s)),null;case 13:return JE(n,s,o);case 4:return jt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Uo(s,null,u,o):nn(n,s,u,o),s.child;case 11:return HE(n,s,s.type,s.pendingProps,o);case 7:return nn(n,s,s.pendingProps,o),s.child;case 8:return nn(n,s,s.pendingProps.children,o),s.child;case 12:return nn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Yi(s,s.type,u.value),nn(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,_a(s),f=fn(f),u=u(f),s.flags|=1,nn(n,s,u,o),s.child;case 14:return KE(n,s,s.type,s.pendingProps,o);case 15:return QE(n,s,s.type,s.pendingProps,o);case 19:return eT(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=af(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ci(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return $E(n,s,o);case 24:return _a(s),u=fn(Fe),n===null?(f=qm(),f===null&&(f=he,g=jm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:u,cache:f},Gm(s),Yi(s,Fe,f)):((n.lanes&o)!==0&&(Hm(n,s),xu(s,null,null,o),Du()),f=n.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Yi(s,Fe,u)):(u=g.cache,Yi(s,Fe,u),u!==f.cache&&Bm(s,[Fe],o,!0))),nn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function yi(n){n.flags|=4}function rT(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!hb(s)){if(s=or.current,s!==null&&((Ft&4194048)===Ft?kr!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||s!==kr))throw Iu=Fm,jv;n.flags|=8192}}function of(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?tu():536870912,n.lanes|=s,zo|=s)}function Uu(n,s){if(!Yt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function be(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function NI(n,s,o){var u=s.pendingProps;switch(Pm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(s),null;case 1:return be(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),mi(Fe),un(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Eu(s)?yi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pv())),be(s),null;case 26:return o=s.memoizedState,n===null?(yi(s),o!==null?(be(s),rT(s,o)):(be(s),s.flags&=-16777217)):o?o!==n.memoizedState?(yi(s),be(s),rT(s,o)):(be(s),s.flags&=-16777217):(n.memoizedProps!==u&&yi(s),be(s),s.flags&=-16777217),null;case 27:Vn(s),o=yt.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&yi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return be(s),null}n=vt.current,Eu(s)?Ov(s):(n=rb(f,u,o),s.stateNode=n,yi(s))}return be(s),null;case 5:if(Vn(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&yi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return be(s),null}if(n=vt.current,Eu(s))Ov(s);else{switch(f=Ef(yt.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[je]=s,n[Me]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;t:switch(sn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&yi(s)}}return be(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&yi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=yt.current,Eu(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=wn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[je]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||XT(n.nodeValue,o)),n||ga(s)}else n=Ef(n).createTextNode(u),n[je]=s,s.stateNode=n}return be(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Eu(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[je]=s}else Tu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;be(s),f=!1}else f=Pv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(pi(s),s):(pi(s),null)}if(pi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),of(s,s.updateQueue),be(s),null;case 4:return un(),n===null&&Qg(s.stateNode.containerInfo),be(s),null;case 10:return mi(s.type),be(s),null;case 19:if(ot(Ge),f=s.memoizedState,f===null)return be(s),null;if(u=(s.flags&128)!==0,g=f.rendering,g===null)if(u)Uu(f,!1);else{if(Se!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=ef(n),g!==null){for(s.flags|=128,Uu(f,!1),n=g.updateQueue,s.updateQueue=n,of(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Vv(o,n),o=o.sibling;return st(Ge,Ge.current&1|2),s.child}n=n.sibling}f.tail!==null&&Ke()>cf&&(s.flags|=128,u=!0,Uu(f,!1),s.lanes=4194304)}else{if(!u)if(n=ef(g),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,of(s,n),Uu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Yt)return be(s),null}else 2*Ke()-f.renderingStartTime>cf&&o!==536870912&&(s.flags|=128,u=!0,Uu(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(n=f.last,n!==null?n.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ke(),s.sibling=null,n=Ge.current,st(Ge,u?n&1|2:n&1),s):(be(s),null);case 22:case 23:return pi(s),Ym(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(be(s),s.subtreeFlags&6&&(s.flags|=8192)):be(s),o=s.updateQueue,o!==null&&of(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ot(ya),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mi(Fe),be(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function OI(n,s){switch(Pm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return mi(Fe),un(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Vn(s),null;case 13:if(pi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Tu()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ot(Ge),null;case 4:return un(),null;case 10:return mi(s.type),null;case 22:case 23:return pi(s),Ym(),n!==null&&ot(ya),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return mi(Fe),null;case 25:return null;default:return null}}function iT(n,s){switch(Pm(s),s.tag){case 3:mi(Fe),un();break;case 26:case 27:case 5:Vn(s);break;case 4:un();break;case 13:pi(s);break;case 19:ot(Ge);break;case 10:mi(s.type);break;case 22:case 23:pi(s),Ym(),n!==null&&ot(ya);break;case 24:mi(Fe)}}function Lu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){ce(s,s.return,A)}}function ns(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=s;var R=o,q=A;try{q()}catch(W){ce(f,R,W)}}}u=u.next}while(u!==g)}}catch(W){ce(s,s.return,W)}}function sT(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Kv(s,o)}catch(u){ce(n,n.return,u)}}}function aT(n,s,o){o.props=Ea(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ce(n,s,u)}}function Bu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ce(n,s,f)}}function Ur(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ce(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ce(n,s,f)}else o.current=null}function oT(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ce(n,n.return,f)}}function Ag(n,s,o){try{var u=n.stateNode;tC(u,n.type,o,s),u[Me]=s}catch(f){ce(n,n.return,f)}}function lT(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cs(n.type)||n.tag===4}function wg(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||lT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sg(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=vf));else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Sg(n,s,o),n=n.sibling;n!==null;)Sg(n,s,o),n=n.sibling}function lf(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(lf(n,s,o),n=n.sibling;n!==null;)lf(n,s,o),n=n.sibling}function uT(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);sn(s,u,o),s[je]=n,s[Me]=o}catch(g){ce(n,n.return,g)}}var vi=!1,De=!1,Rg=!1,cT=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function MI(n,s){if(n=n.containerInfo,Xg=Rf,n=Tv(n),wm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var E=0,A=-1,R=-1,q=0,W=0,et=n,G=null;e:for(;;){for(var H;et!==o||f!==0&&et.nodeType!==3||(A=E+f),et!==g||u!==0&&et.nodeType!==3||(R=E+u),et.nodeType===3&&(E+=et.nodeValue.length),(H=et.firstChild)!==null;)G=et,et=H;for(;;){if(et===n)break e;if(G===o&&++q===f&&(A=E),G===g&&++W===u&&(R=E),(H=et.nextSibling)!==null)break;et=G,G=et.parentNode}et=H}o=A===-1||R===-1?null:{start:A,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Zg={focusedElem:n,selectionRange:o},Rf=!1,Xe=s;Xe!==null;)if(s=Xe,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Xe=n;else for(;Xe!==null;){switch(s=Xe,g=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ct=Ea(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Ct,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(St){ce(o,o.return,St)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)tp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":tp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Xe=n;break}Xe=s.return}}function hT(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:rs(n,o),u&4&&Lu(5,o);break;case 1:if(rs(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){ce(o,o.return,E)}else{var f=Ea(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ce(o,o.return,E)}}u&64&&sT(o),u&512&&Bu(o,o.return);break;case 3:if(rs(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Kv(n,s)}catch(E){ce(o,o.return,E)}}break;case 27:s===null&&u&4&&uT(o);case 26:case 5:rs(n,o),s===null&&u&4&&oT(o),u&512&&Bu(o,o.return);break;case 12:rs(n,o);break;case 13:rs(n,o),u&4&&mT(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=FI.bind(null,o),oC(n,o))));break;case 22:if(u=o.memoizedState!==null||vi,!u){s=s!==null&&s.memoizedState!==null||De,f=vi;var g=De;vi=u,(De=s)&&!g?is(n,o,(o.subtreeFlags&8772)!==0):rs(n,o),vi=f,De=g}break;case 30:break;default:rs(n,o)}}function fT(n){var s=n.alternate;s!==null&&(n.alternate=null,fT(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Hi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ye=null,Pn=!1;function Ei(n,s,o){for(o=o.child;o!==null;)dT(n,s,o),o=o.sibling}function dT(n,s,o){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(wt,o)}catch{}switch(o.tag){case 26:De||Ur(o,s),Ei(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:De||Ur(o,s);var u=ye,f=Pn;cs(o.type)&&(ye=o.stateNode,Pn=!1),Ei(n,s,o),$u(o.stateNode),ye=u,Pn=f;break;case 5:De||Ur(o,s);case 6:if(u=ye,f=Pn,ye=null,Ei(n,s,o),ye=u,Pn=f,ye!==null)if(Pn)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(o.stateNode)}catch(g){ce(o,s,g)}else try{ye.removeChild(o.stateNode)}catch(g){ce(o,s,g)}break;case 18:ye!==null&&(Pn?(n=ye,eb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),nc(n)):eb(ye,o.stateNode));break;case 4:u=ye,f=Pn,ye=o.stateNode.containerInfo,Pn=!0,Ei(n,s,o),ye=u,Pn=f;break;case 0:case 11:case 14:case 15:De||ns(2,o,s),De||ns(4,o,s),Ei(n,s,o);break;case 1:De||(Ur(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&aT(o,s,u)),Ei(n,s,o);break;case 21:Ei(n,s,o);break;case 22:De=(u=De)||o.memoizedState!==null,Ei(n,s,o),De=u;break;default:Ei(n,s,o)}}function mT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{nc(n)}catch(o){ce(s,s.return,o)}}function PI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new cT),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new cT),s;default:throw Error(i(435,n.tag))}}function Ig(n,s){var o=PI(n);s.forEach(function(u){var f=GI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Gn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=s,A=E;t:for(;A!==null;){switch(A.tag){case 27:if(cs(A.type)){ye=A.stateNode,Pn=!1;break t}break;case 5:ye=A.stateNode,Pn=!1;break t;case 3:case 4:ye=A.stateNode.containerInfo,Pn=!0;break t}A=A.return}if(ye===null)throw Error(i(160));dT(g,E,f),ye=null,Pn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)gT(s,n),s=s.sibling}var yr=null;function gT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gn(s,n),Hn(n),u&4&&(ns(3,n,n.return),Lu(3,n),ns(5,n,n.return));break;case 1:Gn(s,n),Hn(n),u&512&&(De||o===null||Ur(o,o.return)),u&64&&vi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=yr;if(Gn(s,n),Hn(n),u&512&&(De||o===null||Ur(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ys]||g[je]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),sn(g,u,o),g[je]=n,Ie(g),u=g;break t;case"link":var E=ub("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break e}}g=f.createElement(u),sn(g,u,o),f.head.appendChild(g);break;case"meta":if(E=ub("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break e}}g=f.createElement(u),sn(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[je]=n,Ie(g),u=g}n.stateNode=u}else cb(f,n.type,n.stateNode);else n.stateNode=lb(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?cb(f,n.type,n.stateNode):lb(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ag(n,n.memoizedProps,o.memoizedProps)}break;case 27:Gn(s,n),Hn(n),u&512&&(De||o===null||Ur(o,o.return)),o!==null&&u&4&&Ag(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Gn(s,n),Hn(n),u&512&&(De||o===null||Ur(o,o.return)),n.flags&32){f=n.stateNode;try{Jn(f,"")}catch(H){ce(n,n.return,H)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Ag(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Rg=!0);break;case 6:if(Gn(s,n),Hn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(H){ce(n,n.return,H)}}break;case 3:if(Af=null,f=yr,yr=Tf(s.containerInfo),Gn(s,n),yr=f,Hn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{nc(s.containerInfo)}catch(H){ce(n,n.return,H)}Rg&&(Rg=!1,pT(n));break;case 4:u=yr,yr=Tf(n.stateNode.containerInfo),Gn(s,n),Hn(n),yr=u;break;case 12:Gn(s,n),Hn(n);break;case 13:Gn(s,n),Hn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Og=Ke()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ig(n,u)));break;case 22:f=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,q=vi,W=De;if(vi=q||f,De=W||R,Gn(s,n),De=W,vi=q,Hn(n),u&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||R||vi||De||Ta(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){R=o=s;try{if(g=R.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=R.stateNode;var et=R.memoizedProps.style,G=et!=null&&et.hasOwnProperty("display")?et.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(H){ce(R,R.return,H)}}}else if(s.tag===6){if(o===null){R=s;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(H){ce(R,R.return,H)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ig(n,o))));break;case 19:Gn(s,n),Hn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ig(n,u)));break;case 30:break;case 21:break;default:Gn(s,n),Hn(n)}}function Hn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(lT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=wg(n);lf(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Jn(E,""),o.flags&=-33);var A=wg(n);lf(n,A,E);break;case 3:case 4:var R=o.stateNode.containerInfo,q=wg(n);Sg(n,q,R);break;default:throw Error(i(161))}}catch(W){ce(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function pT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;pT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function rs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)hT(n,s.alternate,s),s=s.sibling}function Ta(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),Ta(s);break;case 1:Ur(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&aT(s,s.return,o),Ta(s);break;case 27:$u(s.stateNode);case 26:case 5:Ur(s,s.return),Ta(s);break;case 22:s.memoizedState===null&&Ta(s);break;case 30:Ta(s);break;default:Ta(s)}n=n.sibling}}function is(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:is(f,g,o),Lu(4,g);break;case 1:if(is(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){ce(u,u.return,q)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)Hv(R[f],A)}catch(q){ce(u,u.return,q)}}o&&E&64&&sT(g),Bu(g,g.return);break;case 27:uT(g);case 26:case 5:is(f,g,o),o&&u===null&&E&4&&oT(g),Bu(g,g.return);break;case 12:is(f,g,o);break;case 13:is(f,g,o),o&&E&4&&mT(f,g);break;case 22:g.memoizedState===null&&is(f,g,o),Bu(g,g.return);break;case 30:break;default:is(f,g,o)}s=s.sibling}}function Cg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&wu(o))}function Dg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wu(n))}function Lr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_T(n,s,o,u),s=s.sibling}function _T(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Lr(n,s,o,u),f&2048&&Lu(9,s);break;case 1:Lr(n,s,o,u);break;case 3:Lr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wu(n)));break;case 12:if(f&2048){Lr(n,s,o,u),n=s.stateNode;try{var g=s.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){ce(s,s.return,R)}}else Lr(n,s,o,u);break;case 13:Lr(n,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?Lr(n,s,o,u):ju(n,s):g._visibility&2?Lr(n,s,o,u):(g._visibility|=2,Lo(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Cg(E,s);break;case 24:Lr(n,s,o,u),f&2048&&Dg(s.alternate,s);break;default:Lr(n,s,o,u)}}function Lo(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=n,E=s,A=o,R=u,q=E.flags;switch(E.tag){case 0:case 11:case 15:Lo(g,E,A,R,f),Lu(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?Lo(g,E,A,R,f):ju(g,E):(W._visibility|=2,Lo(g,E,A,R,f)),f&&q&2048&&Cg(E.alternate,E);break;case 24:Lo(g,E,A,R,f),f&&q&2048&&Dg(E.alternate,E);break;default:Lo(g,E,A,R,f)}s=s.sibling}}function ju(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:ju(o,u),f&2048&&Cg(u.alternate,u);break;case 24:ju(o,u),f&2048&&Dg(u.alternate,u);break;default:ju(o,u)}s=s.sibling}}var zu=8192;function Bo(n){if(n.subtreeFlags&zu)for(n=n.child;n!==null;)yT(n),n=n.sibling}function yT(n){switch(n.tag){case 26:Bo(n),n.flags&zu&&n.memoizedState!==null&&EC(yr,n.memoizedState,n.memoizedProps);break;case 5:Bo(n);break;case 3:case 4:var s=yr;yr=Tf(n.stateNode.containerInfo),Bo(n),yr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=zu,zu=16777216,Bo(n),zu=s):Bo(n));break;default:Bo(n)}}function vT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function qu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Xe=u,TT(u,n)}vT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ET(n),n=n.sibling}function ET(n){switch(n.tag){case 0:case 11:case 15:qu(n),n.flags&2048&&ns(9,n,n.return);break;case 3:qu(n);break;case 12:qu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,uf(n)):qu(n);break;default:qu(n)}}function uf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Xe=u,TT(u,n)}vT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ns(8,s,s.return),uf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,uf(s));break;default:uf(s)}n=n.sibling}}function TT(n,s){for(;Xe!==null;){var o=Xe;switch(o.tag){case 0:case 11:case 15:ns(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Xe=u;else t:for(o=n;Xe!==null;){u=Xe;var f=u.sibling,g=u.return;if(fT(u),u===o){Xe=null;break t}if(f!==null){f.return=g,Xe=f;break t}Xe=g}}}var kI={getCacheForType:function(n){var s=fn(Fe),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},UI=typeof WeakMap=="function"?WeakMap:Map,Jt=0,he=null,Mt=null,Ft=0,te=0,Kn=null,ss=!1,jo=!1,xg=!1,Ti=0,Se=0,as=0,ba=0,Vg=0,lr=0,zo=0,Fu=null,kn=null,Ng=!1,Og=0,cf=1/0,hf=null,os=null,rn=0,ls=null,qo=null,Fo=0,Mg=0,Pg=null,bT=null,Gu=0,kg=null;function Qn(){if((Jt&2)!==0&&Ft!==0)return Ft&-Ft;if(X.T!==null){var n=xo;return n!==0?n:Fg()}return Fi()}function AT(){lr===0&&(lr=(Ft&536870912)===0||Yt?Jl():536870912);var n=or.current;return n!==null&&(n.flags|=32),lr}function $n(n,s,o){(n===he&&(te===2||te===9)||n.cancelPendingCommit!==null)&&(Go(n,0),us(n,Ft,lr,!1)),Jr(n,o),((Jt&2)===0||n!==he)&&(n===he&&((Jt&2)===0&&(ba|=o),Se===4&&us(n,Ft,lr,!1)),Br(n))}function wT(n,s,o){if((Jt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||$s(n,s),f=u?jI(n,s):Bg(n,s,!0),g=u;do{if(f===0){jo&&!u&&us(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!LI(o)){f=Bg(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var A=n;f=Fu;var R=A.current.memoizedState.isDehydrated;if(R&&(Go(A,E).flags|=256),E=Bg(A,E,!1),E!==2){if(xg&&!R){A.errorRecoveryDisabledLanes|=g,ba|=g,f=4;break t}g=kn,kn=f,g!==null&&(kn===null?kn=g:kn.push.apply(kn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Go(n,0),us(n,s,0,!0);break}t:{switch(u=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:us(u,s,lr,!ss);break t;case 2:kn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Og+300-Ke(),10<f)){if(us(u,s,lr,!ss),ao(u,0,!0)!==0)break t;u.timeoutHandle=JT(ST.bind(null,u,o,kn,hf,Ng,s,lr,ba,zo,ss,g,2,-0,0),f);break t}ST(u,o,kn,hf,Ng,s,lr,ba,zo,ss,g,0,-0,0)}}break}while(!0);Br(n)}function ST(n,s,o,u,f,g,E,A,R,q,W,et,G,H){if(n.timeoutHandle=-1,et=s.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(Zu={stylesheets:null,count:0,unsuspend:vC},yT(s),et=TC(),et!==null)){n.cancelPendingCommit=et(NT.bind(null,n,s,g,o,u,f,E,A,R,W,1,G,H)),us(n,g,E,!q);return}NT(n,s,g,o,u,f,E,A,R)}function LI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!qn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s,o,u){s&=~Vg,s&=~ba,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var g=31-hn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&wr(n,o,s)}function ff(){return(Jt&6)===0?(Hu(0),!1):!0}function Ug(){if(Mt!==null){if(te===0)var n=Mt.return;else n=Mt,di=pa=null,tg(n),ko=null,Pu=0,n=Mt;for(;n!==null;)iT(n.alternate,n),n=n.return;Mt=null}}function Go(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,nC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ug(),he=n,Mt=o=ci(n.current,null),Ft=s,te=0,Kn=null,ss=!1,jo=$s(n,s),xg=!1,zo=lr=Vg=ba=as=Se=0,kn=Fu=null,Ng=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-hn(u),g=1<<f;s|=n[f],u&=~g}return Ti=s,Oh(),o}function RT(n,s){Nt=null,X.H=Wh,s===Ru||s===qh?(s=Fv(),te=3):s===jv?(s=Fv(),te=4):te=s===GE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Mt===null&&(Se=1,rf(n,rr(s,n.current)))}function IT(){var n=X.H;return X.H=Wh,n===null?Wh:n}function CT(){var n=X.A;return X.A=kI,n}function Lg(){Se=4,ss||(Ft&4194048)!==Ft&&or.current!==null||(jo=!0),(as&134217727)===0&&(ba&134217727)===0||he===null||us(he,Ft,lr,!1)}function Bg(n,s,o){var u=Jt;Jt|=2;var f=IT(),g=CT();(he!==n||Ft!==s)&&(hf=null,Go(n,s)),s=!1;var E=Se;t:do try{if(te!==0&&Mt!==null){var A=Mt,R=Kn;switch(te){case 8:Ug(),E=6;break t;case 3:case 2:case 9:case 6:or.current===null&&(s=!0);var q=te;if(te=0,Kn=null,Ho(n,A,R,q),o&&jo){E=0;break t}break;default:q=te,te=0,Kn=null,Ho(n,A,R,q)}}BI(),E=Se;break}catch(W){RT(n,W)}while(!0);return s&&n.shellSuspendCounter++,di=pa=null,Jt=u,X.H=f,X.A=g,Mt===null&&(he=null,Ft=0,Oh()),E}function BI(){for(;Mt!==null;)DT(Mt)}function jI(n,s){var o=Jt;Jt|=2;var u=IT(),f=CT();he!==n||Ft!==s?(hf=null,cf=Ke()+500,Go(n,s)):jo=$s(n,s);t:do try{if(te!==0&&Mt!==null){s=Mt;var g=Kn;e:switch(te){case 1:te=0,Kn=null,Ho(n,s,g,1);break;case 2:case 9:if(zv(g)){te=0,Kn=null,xT(s);break}s=function(){te!==2&&te!==9||he!==n||(te=7),Br(n)},g.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:zv(g)?(te=0,Kn=null,xT(s)):(te=0,Kn=null,Ho(n,s,g,7));break;case 5:var E=null;switch(Mt.tag){case 26:E=Mt.memoizedState;case 5:case 27:var A=Mt;if(!E||hb(E)){te=0,Kn=null;var R=A.sibling;if(R!==null)Mt=R;else{var q=A.return;q!==null?(Mt=q,df(q)):Mt=null}break e}}te=0,Kn=null,Ho(n,s,g,5);break;case 6:te=0,Kn=null,Ho(n,s,g,6);break;case 8:Ug(),Se=6;break t;default:throw Error(i(462))}}zI();break}catch(W){RT(n,W)}while(!0);return di=pa=null,X.H=u,X.A=f,Jt=o,Mt!==null?0:(he=null,Ft=0,Oh(),Se)}function zI(){for(;Mt!==null&&!Xt();)DT(Mt)}function DT(n){var s=nT(n.alternate,n,Ti);n.memoizedProps=n.pendingProps,s===null?df(n):Mt=s}function xT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=XE(o,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=XE(o,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:tg(s);default:iT(o,s),s=Mt=Vv(s,Ti),s=nT(o,s,Ti)}n.memoizedProps=n.pendingProps,s===null?df(n):Mt=s}function Ho(n,s,o,u){di=pa=null,tg(s),ko=null,Pu=0;var f=s.return;try{if(xI(n,f,s,o,Ft)){Se=1,rf(n,rr(o,n.current)),Mt=null;return}}catch(g){if(f!==null)throw Mt=f,g;Se=1,rf(n,rr(o,n.current)),Mt=null;return}s.flags&32768?(Yt||u===1?n=!0:jo||(Ft&536870912)!==0?n=!1:(ss=n=!0,(u===2||u===9||u===3||u===6)&&(u=or.current,u!==null&&u.tag===13&&(u.flags|=16384))),VT(s,n)):df(s)}function df(n){var s=n;do{if((s.flags&32768)!==0){VT(s,ss);return}n=s.return;var o=NI(s.alternate,s,Ti);if(o!==null){Mt=o;return}if(s=s.sibling,s!==null){Mt=s;return}Mt=s=n}while(s!==null);Se===0&&(Se=5)}function VT(n,s){do{var o=OI(n.alternate,n);if(o!==null){o.flags&=32767,Mt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Mt=n;return}Mt=n=o}while(n!==null);Se=6,Mt=null}function NT(n,s,o,u,f,g,E,A,R){n.cancelPendingCommit=null;do mf();while(rn!==0);if((Jt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Dm,eu(n,o,g,E,A,R),n===he&&(Mt=he=null,Ft=0),qo=s,ls=n,Fo=o,Mg=g,Pg=f,bT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HI(Zr,function(){return UT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=at.p,at.p=2,E=Jt,Jt|=4;try{MI(n,s,o)}finally{Jt=E,at.p=f,X.T=u}}rn=1,OT(),MT(),PT()}}function OT(){if(rn===1){rn=0;var n=ls,s=qo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=at.p;at.p=2;var f=Jt;Jt|=4;try{gT(s,n);var g=Zg,E=Tv(n.containerInfo),A=g.focusedElem,R=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Ev(A.ownerDocument.documentElement,A)){if(R!==null&&wm(A)){var q=R.start,W=R.end;if(W===void 0&&(W=q),"selectionStart"in A)A.selectionStart=q,A.selectionEnd=Math.min(W,A.value.length);else{var et=A.ownerDocument||document,G=et&&et.defaultView||window;if(G.getSelection){var H=G.getSelection(),Ct=A.textContent.length,St=Math.min(R.start,Ct),oe=R.end===void 0?St:Math.min(R.end,Ct);!H.extend&&St>oe&&(E=oe,oe=St,St=E);var U=vv(A,St),N=vv(A,oe);if(U&&N&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==N.node||H.focusOffset!==N.offset)){var z=et.createRange();z.setStart(U.node,U.offset),H.removeAllRanges(),St>oe?(H.addRange(z),H.extend(N.node,N.offset)):(z.setEnd(N.node,N.offset),H.addRange(z))}}}}for(et=[],H=A;H=H.parentNode;)H.nodeType===1&&et.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<et.length;A++){var J=et[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Rf=!!Xg,Zg=Xg=null}finally{Jt=f,at.p=u,X.T=o}}n.current=s,rn=2}}function MT(){if(rn===2){rn=0;var n=ls,s=qo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=at.p;at.p=2;var f=Jt;Jt|=4;try{hT(n,s.alternate,s)}finally{Jt=f,at.p=u,X.T=o}}rn=3}}function PT(){if(rn===4||rn===3){rn=0,Xr();var n=ls,s=qo,o=Fo,u=bT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rn=5:(rn=0,qo=ls=null,kT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(os=null),oo(o),s=s.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=at.p,at.p=2,X.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{X.T=s,at.p=f}}(Fo&3)!==0&&mf(),Br(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===kg?Gu++:(Gu=0,kg=n):Gu=0,Hu(0)}}function kT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,wu(s)))}function mf(n){return OT(),MT(),PT(),UT()}function UT(){if(rn!==5)return!1;var n=ls,s=Mg;Mg=0;var o=oo(Fo),u=X.T,f=at.p;try{at.p=32>o?32:o,X.T=null,o=Pg,Pg=null;var g=ls,E=Fo;if(rn=0,qo=ls=null,Fo=0,(Jt&6)!==0)throw Error(i(331));var A=Jt;if(Jt|=4,ET(g.current),_T(g,g.current,E,o),Jt=A,Hu(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{at.p=f,X.T=u,kT(n,s)}}function LT(n,s,o){s=rr(o,s),s=mg(n.stateNode,s,2),n=Wi(n,s,2),n!==null&&(Jr(n,2),Br(n))}function ce(n,s,o){if(n.tag===3)LT(n,n,o);else for(;s!==null;){if(s.tag===3){LT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(os===null||!os.has(u))){n=rr(o,n),o=qE(2),u=Wi(s,o,2),u!==null&&(FE(o,u,s,n),Jr(u,2),Br(u));break}}s=s.return}}function jg(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new UI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(xg=!0,f.add(o),n=qI.bind(null,n,s,o),s.then(n,n))}function qI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,he===n&&(Ft&o)===o&&(Se===4||Se===3&&(Ft&62914560)===Ft&&300>Ke()-Og?(Jt&2)===0&&Go(n,0):Vg|=o,zo===Ft&&(zo=0)),Br(n)}function BT(n,s){s===0&&(s=tu()),n=Ro(n,s),n!==null&&(Jr(n,s),Br(n))}function FI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),BT(n,o)}function GI(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),BT(n,o)}function HI(n,s){return jn(n,s)}var gf=null,Ko=null,zg=!1,pf=!1,qg=!1,Aa=0;function Br(n){n!==Ko&&n.next===null&&(Ko===null?gf=Ko=n:Ko=Ko.next=n),pf=!0,zg||(zg=!0,QI())}function Hu(n,s){if(!qg&&pf){qg=!0;do for(var o=!1,u=gf;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-hn(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,FT(u,g))}else g=Ft,g=ao(u,u===he?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||$s(u,g)||(o=!0,FT(u,g));u=u.next}while(o);qg=!1}}function KI(){jT()}function jT(){pf=zg=!1;var n=0;Aa!==0&&(eC()&&(n=Aa),Aa=0);for(var s=Ke(),o=null,u=gf;u!==null;){var f=u.next,g=zT(u,s);g===0?(u.next=null,o===null?gf=f:o.next=f,f===null&&(Ko=o)):(o=u,(n!==0||(g&3)!==0)&&(pf=!0)),u=f}Hu(n)}function zT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-hn(g),A=1<<E,R=f[E];R===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Wl(A,s)):R<=s&&(n.expiredLanes|=A),g&=~A}if(s=he,o=Ft,o=ao(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(te===2||te===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&On(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||$s(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&On(u),oo(o)){case 2:case 8:o=Bi;break;case 32:o=Zr;break;case 268435456:o=ji;break;default:o=Zr}return u=qT.bind(null,n),o=jn(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&On(u),n.callbackPriority=2,n.callbackNode=null,2}function qT(n,s){if(rn!==0&&rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(mf()&&n.callbackNode!==o)return null;var u=Ft;return u=ao(n,n===he?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(wT(n,u,s),zT(n,Ke()),n.callbackNode!=null&&n.callbackNode===o?qT.bind(null,n):null)}function FT(n,s){if(mf())return null;wT(n,s,!0)}function QI(){rC(function(){(Jt&6)!==0?jn(Gs,KI):jT()})}function Fg(){return Aa===0&&(Aa=Jl()),Aa}function GT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mo(""+n)}function HT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function $I(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var g=GT((f[Me]||null).action),E=u.submitter;E&&(s=(s=E[Me]||null)?GT(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var A=new go("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Aa!==0){var R=E?HT(f,E):new FormData(f);ug(o,{pending:!0,data:R,method:f.method,action:g},null,R)}}else typeof g=="function"&&(A.preventDefault(),R=E?HT(f,E):new FormData(f),ug(o,{pending:!0,data:R,method:f.method,action:g},g,R))},currentTarget:f}]})}}for(var Gg=0;Gg<Cm.length;Gg++){var Hg=Cm[Gg],YI=Hg.toLowerCase(),XI=Hg[0].toUpperCase()+Hg.slice(1);_r(YI,"on"+XI)}_r(wv,"onAnimationEnd"),_r(Sv,"onAnimationIteration"),_r(Rv,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(dI,"onTransitionRun"),_r(mI,"onTransitionStart"),_r(gI,"onTransitionCancel"),_r(Iv,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function KT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var A=u[E],R=A.instance,q=A.currentTarget;if(A=A.listener,R!==g&&f.isPropagationStopped())break t;g=A,f.currentTarget=q;try{g(f)}catch(W){nf(W)}f.currentTarget=null,g=R}else for(E=0;E<u.length;E++){if(A=u[E],R=A.instance,q=A.currentTarget,A=A.listener,R!==g&&f.isPropagationStopped())break t;g=A,f.currentTarget=q;try{g(f)}catch(W){nf(W)}f.currentTarget=null,g=R}}}}function Pt(n,s){var o=s[ru];o===void 0&&(o=s[ru]=new Set);var u=n+"__bubble";o.has(u)||(QT(s,n,2,!1),o.add(u))}function Kg(n,s,o){var u=0;s&&(u|=4),QT(o,n,u,s)}var _f="_reactListening"+Math.random().toString(36).slice(2);function Qg(n){if(!n[_f]){n[_f]=!0,iu.forEach(function(o){o!=="selectionchange"&&(ZI.has(o)||Kg(o,!1,n),Kg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[_f]||(s[_f]=!0,Kg("selectionchange",!1,s))}}function QT(n,s,o,u){switch(_b(s)){case 2:var f=wC;break;case 8:f=SC;break;default:f=op}o=f.bind(null,s,o,n),f=void 0,!er||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function $g(n,s,o,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=ti(A),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){u=g=E;continue t}A=A.parentNode}}u=u.return}yh(function(){var q=g,W=tr(o),et=[];t:{var G=Cv.get(n);if(G!==void 0){var H=go,Ct=n;switch(n){case"keypress":if(xr(o)===0)break t;case"keydown":case"keyup":H=To;break;case"focusin":Ct="focus",H=yo;break;case"focusout":Ct="blur",H=yo;break;case"beforeblur":case"afterblur":H=yo;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Rh;break;case wv:case Sv:case Rv:H=vo;break;case Iv:H=Ch;break;case"scroll":case"scrollend":H=vh;break;case"wheel":H=bo;break;case"copy":case"cut":case"paste":H=Eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=pu;break;case"toggle":case"beforetoggle":H=xh}var St=(s&4)!==0,oe=!St&&(n==="scroll"||n==="scrollend"),U=St?G!==null?G+"Capture":null:G;St=[];for(var N=q,z;N!==null;){var J=N;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||U===null||(J=na(N,U),J!=null&&St.push(Qu(N,J,z))),oe)break;N=N.return}0<St.length&&(G=new H(G,Ct,null,o,W),et.push({event:G,listeners:St}))}}if((s&7)===0){t:{if(G=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",G&&o!==ii&&(Ct=o.relatedTarget||o.fromElement)&&(ti(Ct)||Ct[Wn]))break t;if((H||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,H?(Ct=o.relatedTarget||o.toElement,H=q,Ct=Ct?ti(Ct):null,Ct!==null&&(oe=l(Ct),St=Ct.tag,Ct!==oe||St!==5&&St!==27&&St!==6)&&(Ct=null)):(H=null,Ct=q),H!==Ct)){if(St=nr,J="onMouseLeave",U="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(St=pu,J="onPointerLeave",U="onPointerEnter",N="pointer"),oe=H==null?G:Rr(H),z=Ct==null?G:Rr(Ct),G=new St(J,N+"leave",H,o,W),G.target=oe,G.relatedTarget=z,J=null,ti(W)===q&&(St=new St(U,N+"enter",Ct,o,W),St.target=z,St.relatedTarget=oe,J=St),oe=J,H&&Ct)e:{for(St=H,U=Ct,N=0,z=St;z;z=Qo(z))N++;for(z=0,J=U;J;J=Qo(J))z++;for(;0<N-z;)St=Qo(St),N--;for(;0<z-N;)U=Qo(U),z--;for(;N--;){if(St===U||U!==null&&St===U.alternate)break e;St=Qo(St),U=Qo(U)}St=null}else St=null;H!==null&&$T(et,G,H,St,!1),Ct!==null&&oe!==null&&$T(et,oe,Ct,St,!0)}}t:{if(G=q?Rr(q):window,H=G.nodeName&&G.nodeName.toLowerCase(),H==="select"||H==="input"&&G.type==="file")var Et=dv;else if(qe(G))if(mv)Et=cI;else{Et=lI;var Ot=oI}else H=G.nodeName,!H||H.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&uu(q.elementType)&&(Et=dv):Et=uI;if(Et&&(Et=Et(n,q))){ui(et,Et,o,W);break t}Ot&&Ot(n,G,q),n==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Qi(G,"number",G.value)}switch(Ot=q?Rr(q):window,n){case"focusin":(qe(Ot)||Ot.contentEditable==="true")&&(Ao=Ot,Sm=q,vu=null);break;case"focusout":vu=Sm=Ao=null;break;case"mousedown":Rm=!0;break;case"contextmenu":case"mouseup":case"dragend":Rm=!1,bv(et,o,W);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":bv(et,o,W)}var At;if(Or)t:{switch(n){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else zt?$(n,o)&&(Rt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Rt="onCompositionStart");Rt&&(v&&o.locale!=="ko"&&(zt||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&zt&&(At=hu()):(Dr=W,$i="value"in Dr?Dr.value:Dr.textContent,zt=!0)),Ot=yf(q,Rt),0<Ot.length&&(Rt=new mu(Rt,n,null,o,W),et.push({event:Rt,listeners:Ot}),At?Rt.data=At:(At=ut(o),At!==null&&(Rt.data=At)))),(At=_?ze(n,o):qt(n,o))&&(Rt=yf(q,"onBeforeInput"),0<Rt.length&&(Ot=new mu("onBeforeInput","beforeinput",null,o,W),et.push({event:Ot,listeners:Rt}),Ot.data=At)),$I(et,n,q,o,W)}KT(et,s)})}function Qu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function yf(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=na(n,o),f!=null&&u.unshift(Qu(n,f,g)),f=na(n,s),f!=null&&u.push(Qu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Qo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $T(n,s,o,u,f){for(var g=s._reactName,E=[];o!==null&&o!==u;){var A=o,R=A.alternate,q=A.stateNode;if(A=A.tag,R!==null&&R===u)break;A!==5&&A!==26&&A!==27||q===null||(R=q,f?(q=na(o,g),q!=null&&E.unshift(Qu(o,q,R))):f||(q=na(o,g),q!=null&&E.push(Qu(o,q,R)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var WI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function YT(n){return(typeof n=="string"?n:""+n).replace(WI,`
`).replace(JI,"")}function XT(n,s){return s=YT(s),YT(n)===s}function vf(){}function ae(n,s,o,u,f,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Jn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Jn(n,""+u);break;case"className":Ir(n,"class",u);break;case"tabIndex":Ir(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(n,o,u);break;case"style":lu(n,u,g);break;case"data":if(s!=="object"){Ir(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=mo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ae(n,s,"name",f.name,f,null),ae(n,s,"formEncType",f.formEncType,f,null),ae(n,s,"formMethod",f.formMethod,f,null),ae(n,s,"formTarget",f.formTarget,f,null)):(ae(n,s,"encType",f.encType,f,null),ae(n,s,"method",f.method,f,null),ae(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=mo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=vf);break;case"onScroll":u!=null&&Pt("scroll",n);break;case"onScrollEnd":u!=null&&Pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=mo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pt("beforetoggle",n),Pt("toggle",n),Ki(n,"popover",u);break;case"xlinkActuate":tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":tn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":tn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":tn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":tn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ki(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ym.get(o)||o,Ki(n,o,u))}}function Yg(n,s,o,u,f,g){switch(o){case"style":lu(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Jn(n,u):(typeof u=="number"||typeof u=="bigint")&&Jn(n,""+u);break;case"onScroll":u!=null&&Pt("scroll",n);break;case"onScrollEnd":u!=null&&Pt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lo.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[Me]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ki(n,o,u)}}}function sn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",n),Pt("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ae(n,s,g,E,o,null)}}f&&ae(n,s,"srcSet",o.srcSet,o,null),u&&ae(n,s,"src",o.src,o,null);return;case"input":Pt("invalid",n);var A=g=E=f=null,R=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":R=W;break;case"defaultChecked":q=W;break;case"value":g=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ae(n,s,u,W,o,null)}}Js(n,g,A,R,q,E,f,!1),fo(n);return;case"select":Pt("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:ae(n,s,f,A,o,null)}s=g,o=E,n.multiple=!!u,s!=null?ri(n,!!u,s,!1):o!=null&&ri(n,!!u,o,!0);return;case"textarea":Pt("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ae(n,s,E,A,o,null)}ta(n,u,f,g),fo(n);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ae(n,s,R,u,o,null)}return;case"dialog":Pt("beforetoggle",n),Pt("toggle",n),Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":Pt("load",n);break;case"video":case"audio":for(u=0;u<Ku.length;u++)Pt(Ku[u],n);break;case"image":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"embed":case"source":case"link":Pt("error",n),Pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ae(n,s,q,u,o,null)}return;default:if(uu(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&Yg(n,s,W,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&ae(n,s,A,u,o,null))}function tC(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,R=null,q=null,W=null;for(H in o){var et=o[H];if(o.hasOwnProperty(H)&&et!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":R=et;default:u.hasOwnProperty(H)||ae(n,s,H,null,u,et)}}for(var G in u){var H=u[G];if(et=o[G],u.hasOwnProperty(G)&&(H!=null||et!=null))switch(G){case"type":g=H;break;case"name":f=H;break;case"checked":q=H;break;case"defaultChecked":W=H;break;case"value":E=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:H!==et&&ae(n,s,G,H,u,et)}}zn(n,E,A,R,q,W,g,f);return;case"select":H=E=A=G=null;for(g in o)if(R=o[g],o.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":H=R;default:u.hasOwnProperty(g)||ae(n,s,g,null,u,R)}for(f in u)if(g=u[f],R=o[f],u.hasOwnProperty(f)&&(g!=null||R!=null))switch(f){case"value":G=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==R&&ae(n,s,f,g,u,R)}s=A,o=E,u=H,G!=null?ri(n,!!o,G,!1):!!u!=!!o&&(s!=null?ri(n,!!o,s,!0):ri(n,!!o,o?[]:"",!1));return;case"textarea":H=G=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ae(n,s,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":G=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&ae(n,s,E,f,u,g)}ie(n,G,H);return;case"option":for(var Ct in o)if(G=o[Ct],o.hasOwnProperty(Ct)&&G!=null&&!u.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:ae(n,s,Ct,null,u,G)}for(R in u)if(G=u[R],H=o[R],u.hasOwnProperty(R)&&G!==H&&(G!=null||H!=null))switch(R){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ae(n,s,R,G,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in o)G=o[St],o.hasOwnProperty(St)&&G!=null&&!u.hasOwnProperty(St)&&ae(n,s,St,null,u,G);for(q in u)if(G=u[q],H=o[q],u.hasOwnProperty(q)&&G!==H&&(G!=null||H!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:ae(n,s,q,G,u,H)}return;default:if(uu(s)){for(var oe in o)G=o[oe],o.hasOwnProperty(oe)&&G!==void 0&&!u.hasOwnProperty(oe)&&Yg(n,s,oe,void 0,u,G);for(W in u)G=u[W],H=o[W],!u.hasOwnProperty(W)||G===H||G===void 0&&H===void 0||Yg(n,s,W,G,u,H);return}}for(var U in o)G=o[U],o.hasOwnProperty(U)&&G!=null&&!u.hasOwnProperty(U)&&ae(n,s,U,null,u,G);for(et in u)G=u[et],H=o[et],!u.hasOwnProperty(et)||G===H||G==null&&H==null||ae(n,s,et,G,u,H)}var Xg=null,Zg=null;function Ef(n){return n.nodeType===9?n:n.ownerDocument}function ZT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Wg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jg=null;function eC(){var n=window.event;return n&&n.type==="popstate"?n===Jg?!1:(Jg=n,!0):(Jg=null,!1)}var JT=typeof setTimeout=="function"?setTimeout:void 0,nC=typeof clearTimeout=="function"?clearTimeout:void 0,tb=typeof Promise=="function"?Promise:void 0,rC=typeof queueMicrotask=="function"?queueMicrotask:typeof tb<"u"?function(n){return tb.resolve(null).then(n).catch(iC)}:JT;function iC(n){setTimeout(function(){throw n})}function cs(n){return n==="head"}function eb(n,s){var o=s,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&$u(E.documentElement),o&2&&$u(E.body),o&4)for(o=E.head,$u(o),E=o.firstChild;E;){var A=E.nextSibling,R=E.nodeName;E[Ys]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),nc(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);nc(s)}function tp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":tp(o),Hi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function sC(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ys])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=vr(n.nextSibling),n===null)break}return null}function aC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=vr(n.nextSibling),n===null))return null;return n}function ep(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function oC(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function vr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var np=null;function nb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function rb(n,s,o){switch(s=Ef(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function $u(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Hi(n)}var ur=new Map,ib=new Set;function Tf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var bi=at.d;at.d={f:lC,r:uC,D:cC,C:hC,L:fC,m:dC,X:gC,S:mC,M:pC};function lC(){var n=bi.f(),s=ff();return n||s}function uC(n){var s=Sr(n);s!==null&&s.tag===5&&s.type==="form"?wE(s):bi.r(n)}var $o=typeof document>"u"?null:document;function sb(n,s,o){var u=$o;if(u&&typeof s=="string"&&s){var f=Pe(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ib.has(f)||(ib.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),sn(s,"link",n),Ie(s),u.head.appendChild(s)))}}function cC(n){bi.D(n),sb("dns-prefetch",n,null)}function hC(n,s){bi.C(n,s),sb("preconnect",n,s)}function fC(n,s,o){bi.L(n,s,o);var u=$o;if(u&&n&&s){var f='link[rel="preload"][as="'+Pe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pe(o.imageSizes)+'"]')):f+='[href="'+Pe(n)+'"]';var g=f;switch(s){case"style":g=Yo(n);break;case"script":g=Xo(n)}ur.has(g)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ur.set(g,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Yu(g))||s==="script"&&u.querySelector(Xu(g))||(s=u.createElement("link"),sn(s,"link",n),Ie(s),u.head.appendChild(s)))}}function dC(n,s){bi.m(n,s);var o=$o;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pe(u)+'"][href="'+Pe(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Xo(n)}if(!ur.has(g)&&(n=y({rel:"modulepreload",href:n},s),ur.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Xu(g)))return}u=o.createElement("link"),sn(u,"link",n),Ie(u),o.head.appendChild(u)}}}function mC(n,s,o){bi.S(n,s,o);var u=$o;if(u&&n){var f=Tn(u).hoistableStyles,g=Yo(n);s=s||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Yu(g)))A.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ur.get(g))&&rp(n,o);var R=E=u.createElement("link");Ie(R),sn(R,"link",n),R._p=new Promise(function(q,W){R.onload=q,R.onerror=W}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bf(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function gC(n,s){bi.X(n,s);var o=$o;if(o&&n){var u=Tn(o).hoistableScripts,f=Xo(n),g=u.get(f);g||(g=o.querySelector(Xu(f)),g||(n=y({src:n,async:!0},s),(s=ur.get(f))&&ip(n,s),g=o.createElement("script"),Ie(g),sn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function pC(n,s){bi.M(n,s);var o=$o;if(o&&n){var u=Tn(o).hoistableScripts,f=Xo(n),g=u.get(f);g||(g=o.querySelector(Xu(f)),g||(n=y({src:n,async:!0,type:"module"},s),(s=ur.get(f))&&ip(n,s),g=o.createElement("script"),Ie(g),sn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function ab(n,s,o,u){var f=(f=yt.current)?Tf(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Yo(o.href),o=Tn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Yo(o.href);var g=Tn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(Yu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),ur.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ur.set(n,o),g||_C(f,n,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=Tn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Yo(n){return'href="'+Pe(n)+'"'}function Yu(n){return'link[rel="stylesheet"]['+n+"]"}function ob(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function _C(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),sn(s,"link",o),Ie(s),n.head.appendChild(s))}function Xo(n){return'[src="'+Pe(n)+'"]'}function Xu(n){return"script[async]"+n}function lb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Pe(o.href)+'"]');if(u)return s.instance=u,Ie(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ie(u),sn(u,"style",f),bf(u,o.precedence,n),s.instance=u;case"stylesheet":f=Yo(o.href);var g=n.querySelector(Yu(f));if(g)return s.state.loading|=4,s.instance=g,Ie(g),g;u=ob(o),(f=ur.get(f))&&rp(u,f),g=(n.ownerDocument||n).createElement("link"),Ie(g);var E=g;return E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),sn(g,"link",u),s.state.loading|=4,bf(g,o.precedence,n),s.instance=g;case"script":return g=Xo(o.src),(f=n.querySelector(Xu(g)))?(s.instance=f,Ie(f),f):(u=o,(f=ur.get(g))&&(u=y({},o),ip(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ie(f),sn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,bf(u,o.precedence,n));return s.instance}function bf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===s)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function rp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ip(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Af=null;function ub(n,s,o){if(Af===null){var u=new Map,f=Af=new Map;f.set(o,u)}else f=Af,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ys]||g[je]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function cb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function yC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function hb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Zu=null;function vC(){}function EC(n,s,o){if(Zu===null)throw Error(i(475));var u=Zu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Yo(o.href),g=n.querySelector(Yu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=wf.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=g,Ie(g);return}g=n.ownerDocument||n,o=ob(o),(f=ur.get(f))&&rp(o,f),g=g.createElement("link"),Ie(g);var E=g;E._p=new Promise(function(A,R){E.onload=A,E.onerror=R}),sn(g,"link",o),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=wf.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function TC(){if(Zu===null)throw Error(i(475));var n=Zu;return n.stylesheets&&n.count===0&&sp(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&sp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function wf(){if(this.count--,this.count===0){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sf=null;function sp(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sf=new Map,s.forEach(bC,n),Sf=null,wf.call(n))}function bC(n,s){if(!(s.state.loading&4)){var o=Sf.get(n);if(o)var u=o.get(null);else{o=new Map,Sf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=wf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Wu={$$typeof:it,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function AC(n,s,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function fb(n,s,o,u,f,g,E,A,R,q,W,et){return n=new AC(n,s,o,E,A,R,q,et),s=1,g===!0&&(s|=24),g=Fn(3,null,null,s),n.current=g,g.stateNode=n,s=jm(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},Gm(g),n}function db(n){return n?(n=Io,n):Io}function mb(n,s,o,u,f,g){f=db(f),u.context===null?u.context=f:u.pendingContext=f,u=Zi(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Wi(n,u,s),o!==null&&($n(o,n,s),Cu(o,n,s))}function gb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ap(n,s){gb(n,s),(n=n.alternate)&&gb(n,s)}function pb(n){if(n.tag===13){var s=Ro(n,67108864);s!==null&&$n(s,n,67108864),ap(n,67108864)}}var Rf=!0;function wC(n,s,o,u){var f=X.T;X.T=null;var g=at.p;try{at.p=2,op(n,s,o,u)}finally{at.p=g,X.T=f}}function SC(n,s,o,u){var f=X.T;X.T=null;var g=at.p;try{at.p=8,op(n,s,o,u)}finally{at.p=g,X.T=f}}function op(n,s,o,u){if(Rf){var f=lp(u);if(f===null)$g(n,s,u,If,o),yb(n,u);else if(IC(f,n,s,o,u))u.stopPropagation();else if(yb(n,u),s&4&&-1<RC.indexOf(n)){for(;f!==null;){var g=Sr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=mr(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var R=1<<31-hn(E);A.entanglements[1]|=R,E&=~R}Br(g),(Jt&6)===0&&(cf=Ke()+500,Hu(0))}}break;case 13:A=Ro(g,2),A!==null&&$n(A,g,2),ff(),ap(g,2)}if(g=lp(u),g===null&&$g(n,s,u,If,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else $g(n,s,u,null,o)}}function lp(n){return n=tr(n),up(n)}var If=null;function up(n){if(If=null,n=ti(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return If=n,null}function _b(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xl()){case Gs:return 2;case Bi:return 8;case Zr:case Zl:return 32;case ji:return 268435456;default:return 32}default:return 32}}var cp=!1,hs=null,fs=null,ds=null,Ju=new Map,tc=new Map,ms=[],RC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yb(n,s){switch(n){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Ju.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(s.pointerId)}}function ec(n,s,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Sr(s),s!==null&&pb(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function IC(n,s,o,u,f){switch(s){case"focusin":return hs=ec(hs,n,s,o,u,f),!0;case"dragenter":return fs=ec(fs,n,s,o,u,f),!0;case"mouseover":return ds=ec(ds,n,s,o,u,f),!0;case"pointerover":var g=f.pointerId;return Ju.set(g,ec(Ju.get(g)||null,n,s,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,tc.set(g,ec(tc.get(g)||null,n,s,o,u,f)),!0}return!1}function vb(n){var s=ti(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,hh(n.priority,function(){if(o.tag===13){var u=Qn();u=qi(u);var f=Ro(o,u);f!==null&&$n(f,o,u),ap(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=lp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ii=u,o.target.dispatchEvent(u),ii=null}else return s=Sr(o),s!==null&&pb(s),n.blockedOn=o,!1;s.shift()}return!0}function Eb(n,s,o){Cf(n)&&o.delete(s)}function CC(){cp=!1,hs!==null&&Cf(hs)&&(hs=null),fs!==null&&Cf(fs)&&(fs=null),ds!==null&&Cf(ds)&&(ds=null),Ju.forEach(Eb),tc.forEach(Eb)}function Df(n,s){n.blockedOn===s&&(n.blockedOn=null,cp||(cp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,CC)))}var xf=null;function Tb(n){xf!==n&&(xf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){xf===n&&(xf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(up(u||o)===null)continue;break}var g=Sr(o);g!==null&&(n.splice(s,3),s-=3,ug(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function nc(n){function s(R){return Df(R,n)}hs!==null&&Df(hs,n),fs!==null&&Df(fs,n),ds!==null&&Df(ds,n),Ju.forEach(s),tc.forEach(s);for(var o=0;o<ms.length;o++){var u=ms[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ms.length&&(o=ms[0],o.blockedOn===null);)vb(o),o.blockedOn===null&&ms.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Me]||null;if(typeof g=="function")E||Tb(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Me]||null)A=E.formAction;else if(up(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),Tb(o)}}}function hp(n){this._internalRoot=n}Vf.prototype.render=hp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Qn();mb(o,u,n,s,null,null)},Vf.prototype.unmount=hp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;mb(n.current,2,null,n,null,null),ff(),s[Wn]=null}};function Vf(n){this._internalRoot=n}Vf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ms.length&&s!==0&&s<ms[o].priority;o++);ms.splice(o,0,n),o===0&&vb(n)}};var bb=t.version;if(bb!=="19.1.0")throw Error(i(527,bb,"19.1.0"));at.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=m(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var DC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{wt=Nf.inject(DC),Ut=Nf}catch{}}return ic.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=LE,g=BE,E=jE,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=fb(n,1,!1,null,null,o,u,f,g,E,A,null),n[Wn]=s.current,Qg(n),new hp(s)},ic.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",g=LE,E=BE,A=jE,R=null,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(q=o.formState)),s=fb(n,1,!0,s,o??null,u,f,g,E,A,R,q),s.context=db(null),o=s.current,u=Qn(),u=qi(u),f=Zi(u),f.callback=null,Wi(o,f,u),o=u,s.current.lanes=o,Jr(s,o),Br(s),n[Wn]=s.current,Qg(n),new Vf(s)},ic.version="19.1.0",ic}var Nb;function LC(){if(Nb)return mp.exports;Nb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),mp.exports=UC(),mp.exports}var BC=LC(),yp={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ob;function jC(){return Ob||(Ob=1,function(r){(function(){var t={}.hasOwnProperty;function e(){for(var l="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(l=a(l,i(d)))}return l}function i(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return e.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var c="";for(var d in l)t.call(l,d)&&l[d]&&(c=a(c,d));return c}function a(l,c){return c?l?l+" "+c:l+c:l}r.exports?(e.default=e,r.exports=e):window.classNames=e})()}(yp)),yp.exports}var zC=jC();const ue=xd(zC),qC=["as","disabled"];function FC(r,t){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(t.indexOf(i)>=0)continue;e[i]=r[i]}return e}function GC(r){return!r||r.trim()==="#"}function KA({tagName:r,disabled:t,href:e,target:i,rel:a,role:l,onClick:c,tabIndex:d=0,type:m}){r||(e!=null||i!=null||a!=null?r="a":r="button");const p={tagName:r};if(r==="button")return[{type:m||"button",disabled:t},p];const y=b=>{if((t||r==="a"&&GC(e))&&b.preventDefault(),t){b.stopPropagation();return}c==null||c(b)},T=b=>{b.key===" "&&(b.preventDefault(),y(b))};return r==="a"&&(e||(e="#"),t&&(e=void 0)),[{role:l??"button",disabled:void 0,tabIndex:t?void 0:d,href:e,target:r==="a"?i:void 0,"aria-disabled":t||void 0,rel:r==="a"?a:void 0,onClick:y,onKeyDown:T},p]}const HC=Y.forwardRef((r,t)=>{let{as:e,disabled:i}=r,a=FC(r,qC);const[l,{tagName:c}]=KA(Object.assign({tagName:e,disabled:i},a));return k.jsx(c,Object.assign({},a,l,{ref:t}))});HC.displayName="Button";const KC=["xxl","xl","lg","md","sm","xs"],QC="xs",Qc=Y.createContext({prefixes:{},breakpoints:KC,minBreakpoint:QC}),{Consumer:$P,Provider:YP}=Qc;function Ne(r,t){const{prefixes:e}=Y.useContext(Qc);return r||e[t]||t}function QA(){const{breakpoints:r}=Y.useContext(Qc);return r}function $A(){const{minBreakpoint:r}=Y.useContext(Qc);return r}function $C(){const{dir:r}=Y.useContext(Qc);return r==="rtl"}const Sa=Y.forwardRef(({as:r,bsPrefix:t,variant:e="primary",size:i,active:a=!1,disabled:l=!1,className:c,...d},m)=>{const p=Ne(t,"btn"),[y,{tagName:T}]=KA({tagName:r,disabled:l,...d}),b=T;return k.jsx(b,{...y,...d,ref:m,disabled:l,className:ue(c,p,a&&"active",e&&`${p}-${e}`,i&&`${p}-${i}`,d.href&&l&&"disabled")})});Sa.displayName="Button";const jl=!!(typeof window<"u"&&window.document&&window.document.createElement);var Gp=!1,Hp=!1;try{var vp={get passive(){return Gp=!0},get once(){return Hp=Gp=!0}};jl&&(window.addEventListener("test",vp,vp),window.removeEventListener("test",vp,!0))}catch{}function YA(r,t,e,i){if(i&&typeof i!="boolean"&&!Hp){var a=i.once,l=i.capture,c=e;!Hp&&a&&(c=e.__once||function d(m){this.removeEventListener(t,d,l),e.call(this,m)},e.__once=c),r.addEventListener(t,c,Gp?i:l)}r.addEventListener(t,e,i)}function Vd(r){return r&&r.ownerDocument||document}function Kp(r,t,e,i){var a=i&&typeof i!="boolean"?i.capture:i;r.removeEventListener(t,e,a),e.__once&&r.removeEventListener(t,e.__once,a)}var Of;function Mb(r){if((!Of&&Of!==0||r)&&jl){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Of=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Of}function YC(){return Y.useState(null)}function XC(r){const t=Y.useRef(r);return Y.useEffect(()=>{t.current=r},[r]),t}function Qp(r){const t=XC(r);return Y.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const Pb=r=>!r||typeof r=="function"?r:t=>{r.current=t};function ZC(r,t){const e=Pb(r),i=Pb(t);return a=>{e&&e(a),i&&i(a)}}function XA(r,t){return Y.useMemo(()=>ZC(r,t),[r,t])}function WC(r){const t=Y.useRef(r);return t.current=r,t}function JC(r){const t=WC(r);Y.useEffect(()=>()=>t.current(),[])}function tD(r){var t=Vd(r);return t&&t.defaultView||window}function eD(r,t){return tD(r).getComputedStyle(r,t)}var nD=/([A-Z])/g;function rD(r){return r.replace(nD,"-$1").toLowerCase()}var iD=/^ms-/;function Mf(r){return rD(r).replace(iD,"-ms-")}var sD=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aD(r){return!!(r&&sD.test(r))}function za(r,t){var e="",i="";if(typeof t=="string")return r.style.getPropertyValue(Mf(t))||eD(r).getPropertyValue(Mf(t));Object.keys(t).forEach(function(a){var l=t[a];!l&&l!==0?r.style.removeProperty(Mf(a)):aD(a)?i+=a+"("+l+") ":e+=Mf(a)+": "+l+";"}),i&&(e+="transform: "+i+";"),r.style.cssText+=";"+e}function rd(r,t,e,i){return YA(r,t,e,i),function(){Kp(r,t,e,i)}}function oD(r,t,e,i){if(i===void 0&&(i=!0),r){var a=document.createEvent("HTMLEvents");a.initEvent(t,e,i),r.dispatchEvent(a)}}function lD(r){var t=za(r,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function uD(r,t,e){e===void 0&&(e=5);var i=!1,a=setTimeout(function(){i||oD(r,"transitionend",!0)},t+e),l=rd(r,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(a),l()}}function ZA(r,t,e,i){e==null&&(e=lD(r)||0);var a=uD(r,e,i),l=rd(r,"transitionend",t);return function(){a(),l()}}function Ep(r){r===void 0&&(r=Vd());try{var t=r.activeElement;return!t||!t.nodeName?null:t}catch{return r.body}}function kb(r,t){if(r.contains)return r.contains(t);if(r.compareDocumentPosition)return r===t||!!(r.compareDocumentPosition(t)&16)}var cD=HA();const fl=xd(cD);function hD(){const r=Y.useRef(!0),t=Y.useRef(()=>r.current);return Y.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),t.current}function fD(r){const t=Y.useRef(r);return t.current=r,t}function dD(r){const t=fD(r);Y.useEffect(()=>()=>t.current(),[])}function mD(r){const t=Y.useRef(null);return Y.useEffect(()=>{t.current=r}),t.current}function gD(r){const t=Y.useRef(r);return Y.useEffect(()=>{t.current=r},[r]),t}function xa(r){const t=gD(r);return Y.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const pD="data-rr-ui-";function _D(r){return`${pD}${r}`}function yD(r=document){const t=r.defaultView;return Math.abs(t.innerWidth-r.documentElement.clientWidth)}const Ub=_D("modal-open");class O_{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:i=!1}={}){this.handleContainerOverflow=e,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return yD(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();t.style={overflow:a.style.overflow,[i]:a.style[i]},t.scrollBarWidth&&(e[i]=`${parseInt(za(a,i)||"0",10)+t.scrollBarWidth}px`),a.setAttribute(Ub,""),za(a,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(Ub),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const WA=Y.createContext(jl?window:void 0);WA.Provider;function M_(){return Y.useContext(WA)}const Tp=(r,t)=>jl?r==null?(t||Vd()).body:(typeof r=="function"&&(r=r()),r&&"current"in r&&(r=r.current),r&&("nodeType"in r||r.getBoundingClientRect)?r:null):null;function vD(r,t){const e=M_(),[i,a]=Y.useState(()=>Tp(r,e==null?void 0:e.document));if(!i){const l=Tp(r);l&&a(l)}return Y.useEffect(()=>{},[t,i]),Y.useEffect(()=>{const l=Tp(r);l!==i&&a(l)},[r,i]),i}const Lb=r=>!r||typeof r=="function"?r:t=>{r.current=t};function ED(r,t){const e=Lb(r),i=Lb(t);return a=>{e&&e(a),i&&i(a)}}function P_(r,t){return Y.useMemo(()=>ED(r,t),[r,t])}const TD=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",bD=typeof document<"u",Bb=bD||TD?Y.useLayoutEffect:Y.useEffect;function AD(r){return r.code==="Escape"||r.keyCode===27}function wD(){const r=Y.version.split(".");return{major:+r[0],minor:+r[1],patch:+r[2]}}function Nd(r){if(!r||typeof r=="function")return null;const{major:t}=wD();return t>=19?r.props.ref:r.ref}function SD({children:r,in:t,onExited:e,mountOnEnter:i,unmountOnExit:a}){const l=Y.useRef(null),c=Y.useRef(t),d=xa(e);Y.useEffect(()=>{t?c.current=!0:d(l.current)},[t,d]);const m=P_(l,Nd(r)),p=Y.cloneElement(r,{ref:m});return t?p:a||!c.current&&i?null:p}const RD=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function ID(r,t){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(t.indexOf(i)>=0)continue;e[i]=r[i]}return e}function CD(r){let{onEnter:t,onEntering:e,onEntered:i,onExit:a,onExiting:l,onExited:c,addEndListener:d,children:m}=r,p=ID(r,RD);const y=Y.useRef(null),T=P_(y,Nd(m)),b=dt=>ft=>{dt&&y.current&&dt(y.current,ft)},D=Y.useCallback(b(t),[t]),j=Y.useCallback(b(e),[e]),Q=Y.useCallback(b(i),[i]),F=Y.useCallback(b(a),[a]),ct=Y.useCallback(b(l),[l]),lt=Y.useCallback(b(c),[c]),it=Y.useCallback(b(d),[d]);return Object.assign({},p,{nodeRef:y},t&&{onEnter:D},e&&{onEntering:j},i&&{onEntered:Q},a&&{onExit:F},l&&{onExiting:ct},c&&{onExited:lt},d&&{addEndListener:it},{children:typeof m=="function"?(dt,ft)=>m(dt,Object.assign({},ft,{ref:T})):Y.cloneElement(m,{ref:T})})}const DD=["component"];function xD(r,t){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(t.indexOf(i)>=0)continue;e[i]=r[i]}return e}const VD=Y.forwardRef((r,t)=>{let{component:e}=r,i=xD(r,DD);const a=CD(i);return k.jsx(e,Object.assign({ref:t},a))});function ND({in:r,onTransition:t}){const e=Y.useRef(null),i=Y.useRef(!0),a=xa(t);return Bb(()=>{if(!e.current)return;let l=!1;return a({in:r,element:e.current,initial:i.current,isStale:()=>l}),()=>{l=!0}},[r,a]),Bb(()=>(i.current=!1,()=>{i.current=!0}),[]),e}function OD({children:r,in:t,onExited:e,onEntered:i,transition:a}){const[l,c]=Y.useState(!t);t&&l&&c(!1);const d=ND({in:!!t,onTransition:p=>{const y=()=>{p.isStale()||(p.in?i==null||i(p.element,p.initial):(c(!0),e==null||e(p.element)))};Promise.resolve(a(p)).then(y,T=>{throw p.in||c(!0),T})}}),m=P_(d,Nd(r));return l&&!t?null:Y.cloneElement(r,{ref:m})}function jb(r,t,e){return r?k.jsx(VD,Object.assign({},e,{component:r})):t?k.jsx(OD,Object.assign({},e,{transition:t})):k.jsx(SD,Object.assign({},e))}const MD=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function PD(r,t){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(t.indexOf(i)>=0)continue;e[i]=r[i]}return e}let bp;function kD(r){return bp||(bp=new O_({ownerDocument:r==null?void 0:r.document})),bp}function UD(r){const t=M_(),e=r||kD(t),i=Y.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>e.add(i.current),remove:()=>e.remove(i.current),isTopModal:()=>e.isTopModal(i.current),setDialogRef:Y.useCallback(a=>{i.current.dialog=a},[]),setBackdropRef:Y.useCallback(a=>{i.current.backdrop=a},[])})}const JA=Y.forwardRef((r,t)=>{let{show:e=!1,role:i="dialog",className:a,style:l,children:c,backdrop:d=!0,keyboard:m=!0,onBackdropClick:p,onEscapeKeyDown:y,transition:T,runTransition:b,backdropTransition:D,runBackdropTransition:j,autoFocus:Q=!0,enforceFocus:F=!0,restoreFocus:ct=!0,restoreFocusOptions:lt,renderDialog:it,renderBackdrop:dt=Xt=>k.jsx("div",Object.assign({},Xt)),manager:ft,container:pt,onShow:x,onHide:S=()=>{},onExit:I,onExited:O,onExiting:M,onEnter:P,onEntering:C,onEntered:pe}=r,$t=PD(r,MD);const X=M_(),at=vD(pt),mt=UD(ft),xt=hD(),V=mD(e),[tt,ot]=Y.useState(!e),st=Y.useRef(null);Y.useImperativeHandle(t,()=>mt,[mt]),jl&&!V&&e&&(st.current=Ep(X==null?void 0:X.document)),e&&tt&&ot(!1);const vt=xa(()=>{if(mt.add(),En.current=rd(document,"keydown",jt),un.current=rd(document,"focus",()=>setTimeout(yt),!0),x&&x(),Q){var Xt,Xr;const Ke=Ep((Xt=(Xr=mt.dialog)==null?void 0:Xr.ownerDocument)!=null?Xt:X==null?void 0:X.document);mt.dialog&&Ke&&!kb(mt.dialog,Ke)&&(st.current=Ke,mt.dialog.focus())}}),Z=xa(()=>{if(mt.remove(),En.current==null||En.current(),un.current==null||un.current(),ct){var Xt;(Xt=st.current)==null||Xt.focus==null||Xt.focus(lt),st.current=null}});Y.useEffect(()=>{!e||!at||vt()},[e,at,vt]),Y.useEffect(()=>{tt&&Z()},[tt,Z]),dD(()=>{Z()});const yt=xa(()=>{if(!F||!xt()||!mt.isTopModal())return;const Xt=Ep(X==null?void 0:X.document);mt.dialog&&Xt&&!kb(mt.dialog,Xt)&&mt.dialog.focus()}),Ht=xa(Xt=>{Xt.target===Xt.currentTarget&&(p==null||p(Xt),d===!0&&S())}),jt=xa(Xt=>{m&&AD(Xt)&&mt.isTopModal()&&(y==null||y(Xt),Xt.defaultPrevented||S())}),un=Y.useRef(),En=Y.useRef(),Vn=(...Xt)=>{ot(!0),O==null||O(...Xt)};if(!at)return null;const Nn=Object.assign({role:i,ref:mt.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},$t,{style:l,className:a,tabIndex:-1});let jn=it?it(Nn):k.jsx("div",Object.assign({},Nn,{children:Y.cloneElement(c,{role:"document"})}));jn=jb(T,b,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:I,onExiting:M,onExited:Vn,onEnter:P,onEntering:C,onEntered:pe,children:jn});let On=null;return d&&(On=dt({ref:mt.setBackdropRef,onClick:Ht}),On=jb(D,j,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:On})),k.jsx(k.Fragment,{children:fl.createPortal(k.jsxs(k.Fragment,{children:[On,jn]}),at)})});JA.displayName="Modal";const LD=Object.assign(JA,{Manager:O_});function BD(r,t){return r.classList?r.classList.contains(t):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+t+" ")!==-1}function jD(r,t){r.classList?r.classList.add(t):BD(r,t)||(typeof r.className=="string"?r.className=r.className+" "+t:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+t))}var zD=Function.prototype.bind.call(Function.prototype.call,[].slice);function Zo(r,t){return zD(r.querySelectorAll(t))}function zb(r,t){return r.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function qD(r,t){r.classList?r.classList.remove(t):typeof r.className=="string"?r.className=zb(r.className,t):r.setAttribute("class",zb(r.className&&r.className.baseVal||"",t))}const Wo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class FD extends O_{adjustAndStore(t,e,i){const a=e.style[t];e.dataset[t]=a,za(e,{[t]:`${parseFloat(za(e,t))+i}px`})}restore(t,e){const i=e.dataset[t];i!==void 0&&(delete e.dataset[t],za(e,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(jD(e,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Zo(e,Wo.FIXED_CONTENT).forEach(l=>this.adjustAndStore(i,l,t.scrollBarWidth)),Zo(e,Wo.STICKY_CONTENT).forEach(l=>this.adjustAndStore(a,l,-t.scrollBarWidth)),Zo(e,Wo.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(a,l,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();qD(e,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Zo(e,Wo.FIXED_CONTENT).forEach(l=>this.restore(i,l)),Zo(e,Wo.STICKY_CONTENT).forEach(l=>this.restore(a,l)),Zo(e,Wo.NAVBAR_TOGGLER).forEach(l=>this.restore(a,l))}}let Ap;function GD(r){return Ap||(Ap=new FD(r)),Ap}function HD(r,t){if(r==null)return{};var e={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(t.indexOf(i)!==-1)continue;e[i]=r[i]}return e}function $p(r,t){return $p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},$p(r,t)}function KD(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,$p(r,t)}var wp={exports:{}},Sp,qb;function QD(){if(qb)return Sp;qb=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sp=r,Sp}var Rp,Fb;function $D(){if(Fb)return Rp;Fb=1;var r=QD();function t(){}function e(){}return e.resetWarningCache=t,Rp=function(){function i(c,d,m,p,y,T){if(T!==r){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}i.isRequired=i;function a(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:e,resetWarningCache:t};return l.PropTypes=l,l},Rp}var Gb;function YD(){return Gb||(Gb=1,wp.exports=$D()()),wp.exports}var XD=YD();const Ri=xd(XD),Hb={disabled:!1},tw=Ua.createContext(null);var ZD=function(t){return t.scrollTop},fc="unmounted",Ra="exited",vs="entering",Va="entered",Yp="exiting",Oi=function(r){KD(t,r);function t(i,a){var l;l=r.call(this,i,a)||this;var c=a,d=c&&!c.isMounting?i.enter:i.appear,m;return l.appearStatus=null,i.in?d?(m=Ra,l.appearStatus=vs):m=Va:i.unmountOnExit||i.mountOnEnter?m=fc:m=Ra,l.state={status:m},l.nextCallback=null,l}t.getDerivedStateFromProps=function(a,l){var c=a.in;return c&&l.status===fc?{status:Ra}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var l=null;if(a!==this.props){var c=this.state.status;this.props.in?c!==vs&&c!==Va&&(l=vs):(c===vs||c===Va)&&(l=Yp)}this.updateStatus(!1,l)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,l,c,d;return l=c=d=a,a!=null&&typeof a!="number"&&(l=a.exit,c=a.enter,d=a.appear!==void 0?a.appear:c),{exit:l,enter:c,appear:d}},e.updateStatus=function(a,l){if(a===void 0&&(a=!1),l!==null)if(this.cancelNextCallback(),l===vs){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:fl.findDOMNode(this);c&&ZD(c)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ra&&this.setState({status:fc})},e.performEnter=function(a){var l=this,c=this.props.enter,d=this.context?this.context.isMounting:a,m=this.props.nodeRef?[d]:[fl.findDOMNode(this),d],p=m[0],y=m[1],T=this.getTimeouts(),b=d?T.appear:T.enter;if(!a&&!c||Hb.disabled){this.safeSetState({status:Va},function(){l.props.onEntered(p)});return}this.props.onEnter(p,y),this.safeSetState({status:vs},function(){l.props.onEntering(p,y),l.onTransitionEnd(b,function(){l.safeSetState({status:Va},function(){l.props.onEntered(p,y)})})})},e.performExit=function(){var a=this,l=this.props.exit,c=this.getTimeouts(),d=this.props.nodeRef?void 0:fl.findDOMNode(this);if(!l||Hb.disabled){this.safeSetState({status:Ra},function(){a.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:Yp},function(){a.props.onExiting(d),a.onTransitionEnd(c.exit,function(){a.safeSetState({status:Ra},function(){a.props.onExited(d)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,l){l=this.setNextCallback(l),this.setState(a,l)},e.setNextCallback=function(a){var l=this,c=!0;return this.nextCallback=function(d){c&&(c=!1,l.nextCallback=null,a(d))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},e.onTransitionEnd=function(a,l){this.setNextCallback(l);var c=this.props.nodeRef?this.props.nodeRef.current:fl.findDOMNode(this),d=a==null&&!this.props.addEndListener;if(!c||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],p=m[0],y=m[1];this.props.addEndListener(p,y)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===fc)return null;var l=this.props,c=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var d=HD(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ua.createElement(tw.Provider,{value:null},typeof c=="function"?c(a,d):Ua.cloneElement(Ua.Children.only(c),d))},t}(Ua.Component);Oi.contextType=tw;Oi.propTypes={};function Jo(){}Oi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Jo,onEntering:Jo,onEntered:Jo,onExit:Jo,onExiting:Jo,onExited:Jo};Oi.UNMOUNTED=fc;Oi.EXITED=Ra;Oi.ENTERING=vs;Oi.ENTERED=Va;Oi.EXITING=Yp;function Kb(r,t){const e=za(r,t)||"",i=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*i}function WD(r,t){const e=Kb(r,"transitionDuration"),i=Kb(r,"transitionDelay"),a=ZA(r,l=>{l.target===r&&(a(),t(l))},e+i)}function JD(r){r.offsetHeight}function tx(r){return r&&"setState"in r?fl.findDOMNode(r):r??null}const ew=Ua.forwardRef(({onEnter:r,onEntering:t,onEntered:e,onExit:i,onExiting:a,onExited:l,addEndListener:c,children:d,childRef:m,...p},y)=>{const T=Y.useRef(null),b=XA(T,m),D=pt=>{b(tx(pt))},j=pt=>x=>{pt&&T.current&&pt(T.current,x)},Q=Y.useCallback(j(r),[r]),F=Y.useCallback(j(t),[t]),ct=Y.useCallback(j(e),[e]),lt=Y.useCallback(j(i),[i]),it=Y.useCallback(j(a),[a]),dt=Y.useCallback(j(l),[l]),ft=Y.useCallback(j(c),[c]);return k.jsx(Oi,{ref:y,...p,onEnter:Q,onEntered:ct,onEntering:F,onExit:lt,onExited:dt,onExiting:it,addEndListener:ft,nodeRef:T,children:typeof d=="function"?(pt,x)=>d(pt,{...x,ref:D}):Ua.cloneElement(d,{ref:D})})});ew.displayName="TransitionWrapper";const ex={[vs]:"show",[Va]:"show"},k_=Y.forwardRef(({className:r,children:t,transitionClasses:e={},onEnter:i,...a},l)=>{const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},d=Y.useCallback((m,p)=>{JD(m),i==null||i(m,p)},[i]);return k.jsx(ew,{ref:l,addEndListener:WD,...c,onEnter:d,childRef:Nd(t),children:(m,p)=>Y.cloneElement(t,{...p,className:ue("fade",r,t.props.className,ex[m],e[m])})})});k_.displayName="Fade";const nw=Y.forwardRef(({className:r,bsPrefix:t,as:e="div",...i},a)=>(t=Ne(t,"modal-body"),k.jsx(e,{ref:a,className:ue(r,t),...i})));nw.displayName="ModalBody";const rw=Y.createContext({onHide(){}}),U_=Y.forwardRef(({bsPrefix:r,className:t,contentClassName:e,centered:i,size:a,fullscreen:l,children:c,scrollable:d,...m},p)=>{r=Ne(r,"modal");const y=`${r}-dialog`,T=typeof l=="string"?`${r}-fullscreen-${l}`:`${r}-fullscreen`;return k.jsx("div",{...m,ref:p,className:ue(y,t,a&&`${r}-${a}`,i&&`${y}-centered`,d&&`${y}-scrollable`,l&&T),children:k.jsx("div",{className:ue(`${r}-content`,e),children:c})})});U_.displayName="ModalDialog";const iw=Y.forwardRef(({className:r,bsPrefix:t,as:e="div",...i},a)=>(t=Ne(t,"modal-footer"),k.jsx(e,{ref:a,className:ue(r,t),...i})));iw.displayName="ModalFooter";const nx={"aria-label":Ri.string,onClick:Ri.func,variant:Ri.oneOf(["white"])},L_=Y.forwardRef(({className:r,variant:t,"aria-label":e="Close",...i},a)=>k.jsx("button",{ref:a,type:"button",className:ue("btn-close",t&&`btn-close-${t}`,r),"aria-label":e,...i}));L_.displayName="CloseButton";L_.propTypes=nx;const sw=Y.forwardRef(({closeLabel:r="Close",closeVariant:t,closeButton:e=!1,onHide:i,children:a,...l},c)=>{const d=Y.useContext(rw),m=Qp(()=>{d==null||d.onHide(),i==null||i()});return k.jsxs("div",{ref:c,...l,children:[a,e&&k.jsx(L_,{"aria-label":r,variant:t,onClick:m})]})});sw.displayName="AbstractModalHeader";const aw=Y.forwardRef(({bsPrefix:r,className:t,closeLabel:e="Close",closeButton:i=!1,...a},l)=>(r=Ne(r,"modal-header"),k.jsx(sw,{ref:l,...a,className:ue(t,r),closeLabel:e,closeButton:i})));aw.displayName="ModalHeader";const rx=r=>Y.forwardRef((t,e)=>k.jsx("div",{...t,ref:e,className:ue(t.className,r)})),ix=rx("h4"),ow=Y.forwardRef(({className:r,bsPrefix:t,as:e=ix,...i},a)=>(t=Ne(t,"modal-title"),k.jsx(e,{ref:a,className:ue(r,t),...i})));ow.displayName="ModalTitle";function sx(r){return k.jsx(k_,{...r,timeout:null})}function ax(r){return k.jsx(k_,{...r,timeout:null})}const lw=Y.forwardRef(({bsPrefix:r,className:t,style:e,dialogClassName:i,contentClassName:a,children:l,dialogAs:c=U_,"data-bs-theme":d,"aria-labelledby":m,"aria-describedby":p,"aria-label":y,show:T=!1,animation:b=!0,backdrop:D=!0,keyboard:j=!0,onEscapeKeyDown:Q,onShow:F,onHide:ct,container:lt,autoFocus:it=!0,enforceFocus:dt=!0,restoreFocus:ft=!0,restoreFocusOptions:pt,onEntered:x,onExit:S,onExiting:I,onEnter:O,onEntering:M,onExited:P,backdropClassName:C,manager:pe,...$t},X)=>{const[at,mt]=Y.useState({}),[xt,V]=Y.useState(!1),tt=Y.useRef(!1),ot=Y.useRef(!1),st=Y.useRef(null),[vt,Z]=YC(),yt=XA(X,Z),Ht=Qp(ct),jt=$C();r=Ne(r,"modal");const un=Y.useMemo(()=>({onHide:Ht}),[Ht]);function En(){return pe||GD({isRTL:jt})}function Vn(wt){if(!jl)return;const Ut=En().getScrollbarWidth()>0,cn=wt.scrollHeight>Vd(wt).documentElement.clientHeight;mt({paddingRight:Ut&&!cn?Mb():void 0,paddingLeft:!Ut&&cn?Mb():void 0})}const Nn=Qp(()=>{vt&&Vn(vt.dialog)});JC(()=>{Kp(window,"resize",Nn),st.current==null||st.current()});const jn=()=>{tt.current=!0},On=wt=>{tt.current&&vt&&wt.target===vt.dialog&&(ot.current=!0),tt.current=!1},Xt=()=>{V(!0),st.current=ZA(vt.dialog,()=>{V(!1)})},Xr=wt=>{wt.target===wt.currentTarget&&Xt()},Ke=wt=>{if(D==="static"){Xr(wt);return}if(ot.current||wt.target!==wt.currentTarget){ot.current=!1;return}ct==null||ct()},Xl=wt=>{j?Q==null||Q(wt):(wt.preventDefault(),D==="static"&&Xt())},Gs=(wt,Ut)=>{wt&&Vn(wt),O==null||O(wt,Ut)},Bi=wt=>{st.current==null||st.current(),S==null||S(wt)},Zr=(wt,Ut)=>{M==null||M(wt,Ut),YA(window,"resize",Nn)},Zl=wt=>{wt&&(wt.style.display=""),P==null||P(wt),Kp(window,"resize",Nn)},ji=Y.useCallback(wt=>k.jsx("div",{...wt,className:ue(`${r}-backdrop`,C,!b&&"show")}),[b,C,r]),zi={...e,...at};zi.display="block";const so=wt=>k.jsx("div",{role:"dialog",...wt,style:zi,className:ue(t,r,xt&&`${r}-static`,!b&&"show"),onClick:D?Ke:void 0,onMouseUp:On,"data-bs-theme":d,"aria-label":y,"aria-labelledby":m,"aria-describedby":p,children:k.jsx(c,{...$t,onMouseDown:jn,className:i,contentClassName:a,children:l})});return k.jsx(rw.Provider,{value:un,children:k.jsx(LD,{show:T,ref:yt,backdrop:D,container:lt,keyboard:!0,autoFocus:it,enforceFocus:dt,restoreFocus:ft,restoreFocusOptions:pt,onEscapeKeyDown:Xl,onShow:F,onHide:ct,onEnter:Gs,onEntering:Zr,onEntered:x,onExit:Bi,onExiting:I,onExited:Zl,manager:En(),transition:b?sx:void 0,backdropTransition:b?ax:void 0,renderBackdrop:ji,renderDialog:so})})});lw.displayName="Modal";const sc=Object.assign(lw,{Body:nw,Header:aw,Title:ow,Footer:iw,Dialog:U_,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ox={type:Ri.string,tooltip:Ri.bool,as:Ri.elementType},Od=Y.forwardRef(({as:r="div",className:t,type:e="valid",tooltip:i=!1,...a},l)=>k.jsx(r,{...a,ref:l,className:ue(t,`${e}-${i?"tooltip":"feedback"}`)}));Od.displayName="Feedback";Od.propTypes=ox;const Ci=Y.createContext({}),B_=Y.forwardRef(({id:r,bsPrefix:t,className:e,type:i="checkbox",isValid:a=!1,isInvalid:l=!1,as:c="input",...d},m)=>{const{controlId:p}=Y.useContext(Ci);return t=Ne(t,"form-check-input"),k.jsx(c,{...d,ref:m,type:i,id:r||p,className:ue(e,t,a&&"is-valid",l&&"is-invalid")})});B_.displayName="FormCheckInput";const id=Y.forwardRef(({bsPrefix:r,className:t,htmlFor:e,...i},a)=>{const{controlId:l}=Y.useContext(Ci);return r=Ne(r,"form-check-label"),k.jsx("label",{...i,ref:a,htmlFor:e||l,className:ue(t,r)})});id.displayName="FormCheckLabel";function lx(r,t){return Y.Children.toArray(r).some(e=>Y.isValidElement(e)&&e.type===t)}const uw=Y.forwardRef(({id:r,bsPrefix:t,bsSwitchPrefix:e,inline:i=!1,reverse:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:m=!1,feedback:p,feedbackType:y,className:T,style:b,title:D="",type:j="checkbox",label:Q,children:F,as:ct="input",...lt},it)=>{t=Ne(t,"form-check"),e=Ne(e,"form-switch");const{controlId:dt}=Y.useContext(Ci),ft=Y.useMemo(()=>({controlId:r||dt}),[dt,r]),pt=!F&&Q!=null&&Q!==!1||lx(F,id),x=k.jsx(B_,{...lt,type:j==="switch"?"checkbox":j,ref:it,isValid:c,isInvalid:d,disabled:l,as:ct});return k.jsx(Ci.Provider,{value:ft,children:k.jsx("div",{style:b,className:ue(T,pt&&t,i&&`${t}-inline`,a&&`${t}-reverse`,j==="switch"&&e),children:F||k.jsxs(k.Fragment,{children:[x,pt&&k.jsx(id,{title:D,children:Q}),p&&k.jsx(Od,{type:y,tooltip:m,children:p})]})})})});uw.displayName="FormCheck";const sd=Object.assign(uw,{Input:B_,Label:id}),cw=Y.forwardRef(({bsPrefix:r,type:t,size:e,htmlSize:i,id:a,className:l,isValid:c=!1,isInvalid:d=!1,plaintext:m,readOnly:p,as:y="input",...T},b)=>{const{controlId:D}=Y.useContext(Ci);return r=Ne(r,"form-control"),k.jsx(y,{...T,type:t,size:i,ref:b,readOnly:p,id:a||D,className:ue(l,m?`${r}-plaintext`:r,e&&`${r}-${e}`,t==="color"&&`${r}-color`,c&&"is-valid",d&&"is-invalid")})});cw.displayName="FormControl";const ux=Object.assign(cw,{Feedback:Od}),hw=Y.forwardRef(({className:r,bsPrefix:t,as:e="div",...i},a)=>(t=Ne(t,"form-floating"),k.jsx(e,{ref:a,className:ue(r,t),...i})));hw.displayName="FormFloating";const j_=Y.forwardRef(({controlId:r,as:t="div",...e},i)=>{const a=Y.useMemo(()=>({controlId:r}),[r]);return k.jsx(Ci.Provider,{value:a,children:k.jsx(t,{...e,ref:i})})});j_.displayName="FormGroup";function cx({as:r,bsPrefix:t,className:e,...i}){t=Ne(t,"col");const a=QA(),l=$A(),c=[],d=[];return a.forEach(m=>{const p=i[m];delete i[m];let y,T,b;typeof p=="object"&&p!=null?{span:y,offset:T,order:b}=p:y=p;const D=m!==l?`-${m}`:"";y&&c.push(y===!0?`${t}${D}`:`${t}${D}-${y}`),b!=null&&d.push(`order${D}-${b}`),T!=null&&d.push(`offset${D}-${T}`)}),[{...i,className:ue(e,...c,...d)},{as:r,bsPrefix:t,spans:c}]}const dl=Y.forwardRef((r,t)=>{const[{className:e,...i},{as:a="div",bsPrefix:l,spans:c}]=cx(r);return k.jsx(a,{...i,ref:t,className:ue(e,!c.length&&l)})});dl.displayName="Col";const fw=Y.forwardRef(({as:r="label",bsPrefix:t,column:e=!1,visuallyHidden:i=!1,className:a,htmlFor:l,...c},d)=>{const{controlId:m}=Y.useContext(Ci);t=Ne(t,"form-label");let p="col-form-label";typeof e=="string"&&(p=`${p} ${p}-${e}`);const y=ue(a,t,i&&"visually-hidden",e&&p);return l=l||m,e?k.jsx(dl,{ref:d,as:"label",className:y,htmlFor:l,...c}):k.jsx(r,{ref:d,className:y,htmlFor:l,...c})});fw.displayName="FormLabel";const dw=Y.forwardRef(({bsPrefix:r,className:t,id:e,...i},a)=>{const{controlId:l}=Y.useContext(Ci);return r=Ne(r,"form-range"),k.jsx("input",{...i,type:"range",ref:a,className:ue(t,r),id:e||l})});dw.displayName="FormRange";const mw=Y.forwardRef(({bsPrefix:r,size:t,htmlSize:e,className:i,isValid:a=!1,isInvalid:l=!1,id:c,...d},m)=>{const{controlId:p}=Y.useContext(Ci);return r=Ne(r,"form-select"),k.jsx("select",{...d,size:e,ref:m,className:ue(i,r,t&&`${r}-${t}`,a&&"is-valid",l&&"is-invalid"),id:c||p})});mw.displayName="FormSelect";const gw=Y.forwardRef(({bsPrefix:r,className:t,as:e="small",muted:i,...a},l)=>(r=Ne(r,"form-text"),k.jsx(e,{...a,ref:l,className:ue(t,r,i&&"text-muted")})));gw.displayName="FormText";const pw=Y.forwardRef((r,t)=>k.jsx(sd,{...r,ref:t,type:"switch"}));pw.displayName="Switch";const hx=Object.assign(pw,{Input:sd.Input,Label:sd.Label}),_w=Y.forwardRef(({bsPrefix:r,className:t,children:e,controlId:i,label:a,...l},c)=>(r=Ne(r,"form-floating"),k.jsxs(j_,{ref:c,className:ue(t,r),controlId:i,...l,children:[e,k.jsx("label",{htmlFor:i,children:a})]})));_w.displayName="FloatingLabel";const fx={_ref:Ri.any,validated:Ri.bool,as:Ri.elementType},z_=Y.forwardRef(({className:r,validated:t,as:e="form",...i},a)=>k.jsx(e,{...i,ref:a,className:ue(r,t&&"was-validated")}));z_.displayName="Form";z_.propTypes=fx;const le=Object.assign(z_,{Group:j_,Control:ux,Floating:hw,Check:sd,Switch:hx,Label:fw,Text:gw,Range:dw,Select:mw,FloatingLabel:_w}),Xp=Y.forwardRef(({bsPrefix:r,fluid:t=!1,as:e="div",className:i,...a},l)=>{const c=Ne(r,"container"),d=typeof t=="string"?`-${t}`:"-fluid";return k.jsx(e,{ref:l,...a,className:ue(i,t?`${c}${d}`:c)})});Xp.displayName="Container";const Zp=Y.forwardRef(({bsPrefix:r,className:t,as:e="div",...i},a)=>{const l=Ne(r,"row"),c=QA(),d=$A(),m=`${l}-cols`,p=[];return c.forEach(y=>{const T=i[y];delete i[y];let b;T!=null&&typeof T=="object"?{cols:b}=T:b=T;const D=y!==d?`-${y}`:"";b!=null&&p.push(`${m}${D}-${b}`)}),k.jsx(e,{ref:a,...i,className:ue(t,l,...p)})});Zp.displayName="Row";const dx=()=>{};var Qb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=function(r){const t=[];let e=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},mx=function(r){const t=[];let e=0,i=0;for(;e<r.length;){const a=r[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[e++],c=r[e++],d=r[e++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[e++],c=r[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,m=a+2<r.length,p=m?r[a+2]:0,y=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,D=p&63;m||(D=64,c||(b=64)),i.push(e[y],e[T],e[b],e[D])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(yw(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):mx(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=e[r.charAt(a++)],d=a<r.length?e[r.charAt(a)]:0;++a;const p=a<r.length?e[r.charAt(a)]:64;++a;const T=a<r.length?e[r.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new gx;const b=l<<2|d>>4;if(i.push(b),p!==64){const D=d<<4&240|p>>2;if(i.push(D),T!==64){const j=p<<6&192|T;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const px=function(r){const t=yw(r);return vw.encodeByteArray(t,!0)},ad=function(r){return px(r).replace(/\./g,"")},Ew=function(r){try{return vw.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function od(r,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!_x(e)||(r[e]=od(r[e],t[e]));return r}function _x(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=()=>q_().__FIREBASE_DEFAULTS__,vx=()=>{if(typeof process>"u"||typeof Qb>"u")return;const r=Qb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Ex=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Ew(r[1]);return t&&JSON.parse(t)},F_=()=>{try{return dx()||yx()||vx()||Ex()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Tx=r=>{var t,e;return(e=(t=F_())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[r]},Tw=r=>{const t=Tx(r);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},bw=()=>{var r;return(r=F_())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Aw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ad(JSON.stringify(e)),ad(JSON.stringify(c)),""].join(".")}const yc={};function Ax(){const r={prod:[],emulator:[]};for(const t of Object.keys(yc))yc[t]?r.emulator.push(t):r.prod.push(t);return r}function wx(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let $b=!1;function Sw(r,t){if(typeof window>"u"||typeof document>"u"||!$c(window.location.host)||yc[r]===t||yc[r]||$b)return;yc[r]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=Ax().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,D){b.setAttribute("width","24"),b.setAttribute("id",D),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{$b=!0,c()},b}function y(b,D){b.setAttribute("id",D),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=wx(i),D=e("text"),j=document.getElementById(D)||document.createElement("span"),Q=e("learnmore"),F=document.getElementById(Q)||document.createElement("a"),ct=e("preprendIcon"),lt=document.getElementById(ct)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const it=b.element;d(it),y(F,Q);const dt=p();m(lt,ct),it.append(lt,j,F,dt),document.body.appendChild(it)}l?(j.innerText="Preview backend disconnected.",lt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(lt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rw(){var r;const t=(r=F_())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sx(){return typeof window<"u"||Iw()}function Iw(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Cw(){return!Rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dw(){return!Rw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Rx(){return new Promise((r,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="FirebaseError";class Us extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Ix,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Md.prototype.create)}}class Md{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?Cx(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Us(a,d,i)}}function Cx(r,t){return r.replace(Dx,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const Dx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function _l(r,t){if(r===t)return!0;const e=Object.keys(r),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=r[a],c=t[a];if(Xb(l)&&Xb(c)){if(!_l(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Xb(r){return r!==null&&typeof r=="object"}function xx(r,t){const e=new Vx(r,t);return e.subscribe.bind(e)}class Vx{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Nx(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Ip),a.error===void 0&&(a.error=Ip),a.complete===void 0&&(a.complete=Ip);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nx(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(r){return r&&r._delegate?r._delegate:r}class Di{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new bx;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Px(t))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=Ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ia){return this.instances.has(t)}getOptions(t=Ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Mx(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ia){return this.component?this.component.multipleInstances?t:Ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mx(r){return r===Ia?void 0:r}function Px(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Ox(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=[];var Bt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Bt||(Bt={}));const Nw={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},kx=Bt.INFO,Ux={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},Lx=(r,t,...e)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=Ux[t];if(a)console[a](`[${i}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class H_{constructor(t){this.name=t,this._logLevel=kx,this._logHandler=Lx,this._userLogHandler=null,G_.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Nw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...t),this._logHandler(this,Bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...t),this._logHandler(this,Bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...t),this._logHandler(this,Bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...t),this._logHandler(this,Bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...t),this._logHandler(this,Bt.ERROR,...t)}}function Bx(r){G_.forEach(t=>{t.setLogLevel(r)})}function jx(r,t){for(const e of G_){let i=null;t&&t.level&&(i=Nw[t.level]),r===null?e.userLogHandler=null:e.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(i??a.logLevel)&&r({level:Bt[l].toLowerCase(),message:d,args:c,type:a.name})}}}const zx=(r,t)=>t.some(e=>r instanceof e);let Zb,Wb;function qx(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fx(){return Wb||(Wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,Wp=new WeakMap,Mw=new WeakMap,Cp=new WeakMap,K_=new WeakMap;function Gx(r){const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{e(As(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Ow.set(e,r)}).catch(()=>{}),K_.set(t,r),t}function Hx(r){if(Wp.has(r))return;const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Wp.set(r,t)}let Jp={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return Wp.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Mw.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return As(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function Kx(r){Jp=r(Jp)}function Qx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=r.call(Dp(this),t,...e);return Mw.set(i,t.sort?t.sort():[t]),As(i)}:Fx().includes(r)?function(...t){return r.apply(Dp(this),t),As(Ow.get(this))}:function(...t){return As(r.apply(Dp(this),t))}}function $x(r){return typeof r=="function"?Qx(r):(r instanceof IDBTransaction&&Hx(r),zx(r,qx())?new Proxy(r,Jp):r)}function As(r){if(r instanceof IDBRequest)return Gx(r);if(Cp.has(r))return Cp.get(r);const t=$x(r);return t!==r&&(Cp.set(r,t),K_.set(t,r)),t}const Dp=r=>K_.get(r);function Yx(r,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,t),d=As(c);return i&&c.addEventListener("upgradeneeded",m=>{i(As(c.result),m.oldVersion,m.newVersion,As(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Xx=["get","getKey","getAll","getAllKeys","count"],Zx=["put","add","delete","clear"],xp=new Map;function Jb(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(xp.get(t))return xp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=Zx.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Xx.includes(e)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),a&&m.done]))[0]};return xp.set(t,l),l}Kx(r=>({...r,get:(t,e,i)=>Jb(t,e)||r.get(t,e,i),has:(t,e)=>!!Jb(t,e)||r.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Jx(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function Jx(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ud="@firebase/app",t_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new H_("@firebase/app"),t2="@firebase/app-compat",e2="@firebase/analytics-compat",n2="@firebase/analytics",r2="@firebase/app-check-compat",i2="@firebase/app-check",s2="@firebase/auth",a2="@firebase/auth-compat",o2="@firebase/database",l2="@firebase/data-connect",u2="@firebase/database-compat",c2="@firebase/functions",h2="@firebase/functions-compat",f2="@firebase/installations",d2="@firebase/installations-compat",m2="@firebase/messaging",g2="@firebase/messaging-compat",p2="@firebase/performance",_2="@firebase/performance-compat",y2="@firebase/remote-config",v2="@firebase/remote-config-compat",E2="@firebase/storage",T2="@firebase/storage-compat",b2="@firebase/firestore",A2="@firebase/ai",w2="@firebase/firestore-compat",S2="firebase",R2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]",I2={[ud]:"fire-core",[t2]:"fire-core-compat",[n2]:"fire-analytics",[e2]:"fire-analytics-compat",[i2]:"fire-app-check",[r2]:"fire-app-check-compat",[s2]:"fire-auth",[a2]:"fire-auth-compat",[o2]:"fire-rtdb",[l2]:"fire-data-connect",[u2]:"fire-rtdb-compat",[c2]:"fire-fn",[h2]:"fire-fn-compat",[f2]:"fire-iid",[d2]:"fire-iid-compat",[m2]:"fire-fcm",[g2]:"fire-fcm-compat",[p2]:"fire-perf",[_2]:"fire-perf-compat",[y2]:"fire-rc",[v2]:"fire-rc-compat",[E2]:"fire-gcs",[T2]:"fire-gcs-compat",[b2]:"fire-fst",[w2]:"fire-fst-compat",[A2]:"fire-vertex","fire-js":"fire-js",[S2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Map,yl=new Map,vl=new Map;function Dc(r,t){try{r.container.addComponent(t)}catch(e){xi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function Pw(r,t){r.container.addOrOverwriteComponent(t)}function Ga(r){const t=r.name;if(vl.has(t))return xi.debug(`There were multiple attempts to register component ${t}.`),!1;vl.set(t,r);for(const e of Cs.values())Dc(e,r);for(const e of yl.values())Dc(e,r);return!0}function Pd(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function C2(r,t,e=Is){Pd(r,t).clearInstance(e)}function kw(r){return r.options!==void 0}function Q_(r){return r==null?!1:r.settings!==void 0}function D2(){vl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new Md("app","Firebase",x2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uw=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r,t){const e=Ew(r.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(e).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class V2 extends Uw{constructor(t,e,i,a){const l=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,c={name:i,automaticDataCollectionEnabled:l};if(t.apiKey!==void 0)super(t,c,a);else{const d=t;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},e),this._serverConfig.authIdToken&&t0(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&t0(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Tr(ud,t_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){X_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=R2;function $_(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Is,automaticDataCollectionEnabled:!0},t),a=i.name;if(typeof a!="string"||!a)throw fr.create("bad-app-name",{appName:String(a)});if(e||(e=bw()),!e)throw fr.create("no-options");const l=Cs.get(a);if(l){if(_l(e,l.options)&&_l(i,l.config))return l;throw fr.create("duplicate-app",{appName:a})}const c=new Vw(a);for(const m of vl.values())c.addComponent(m);const d=new Uw(e,i,c);return Cs.set(a,d),d}function N2(r,t){if(Sx()&&!Iw())throw fr.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!0);let e;kw(r)?e=r.options:e=r;const i=Object.assign(Object.assign({},t),e);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const a=p=>[...p].reduce((y,T)=>Math.imul(31,y)+T.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw fr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(i)),c=yl.get(l);if(c)return c.incRefCount(t.releaseOnDeref),c;const d=new Vw(l);for(const p of vl.values())d.addComponent(p);const m=new V2(e,t,l,d);return yl.set(l,m),m}function Y_(r=Is){const t=Cs.get(r);if(!t&&r===Is&&bw())return $_();if(!t)throw fr.create("no-app",{appName:r});return t}function O2(){return Array.from(Cs.values())}async function X_(r){let t=!1;const e=r.name;Cs.has(e)?(t=!0,Cs.delete(e)):yl.has(e)&&r.decRefCount()<=0&&(yl.delete(e),t=!0),t&&(await Promise.all(r.container.getProviders().map(i=>i.delete())),r.isDeleted=!0)}function Tr(r,t,e){var i;let a=(i=I2[r])!==null&&i!==void 0?i:r;e&&(a+=`-${e}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xi.warn(d.join(" "));return}Ga(new Di(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}function Lw(r,t){if(r!==null&&typeof r!="function")throw fr.create("invalid-log-argument");jx(r,t)}function Bw(r){Bx(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firebase-heartbeat-database",P2=1,xc="firebase-heartbeat-store";let Vp=null;function jw(){return Vp||(Vp=Yx(M2,P2,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(xc)}catch(e){console.warn(e)}}}}).catch(r=>{throw fr.create("idb-open",{originalErrorMessage:r.message})})),Vp}async function k2(r){try{const e=(await jw()).transaction(xc),i=await e.objectStore(xc).get(zw(r));return await e.done,i}catch(t){if(t instanceof Us)xi.warn(t.message);else{const e=fr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});xi.warn(e.message)}}}async function e0(r,t){try{const i=(await jw()).transaction(xc,"readwrite");await i.objectStore(xc).put(t,zw(r)),await i.done}catch(e){if(e instanceof Us)xi.warn(e.message);else{const i=fr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});xi.warn(i.message)}}}function zw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=1024,L2=30;class B2{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new z2(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=n0();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>L2){const c=q2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=n0(),{heartbeatsToSend:i,unsentEntries:a}=j2(this._heartbeatsCache.heartbeats),l=ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return xi.warn(e),""}}}function n0(){return new Date().toISOString().substring(0,10)}function j2(r,t=U2){const e=[];let i=r.slice();for(const a of r){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),r0(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),r0(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class z2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xw()?Rx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await k2(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return e0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return e0(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function r0(r){return ad(JSON.stringify({version:2,heartbeats:r})).length}function q2(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let i=1;i<r.length;i++)r[i].date<e&&(e=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(r){Ga(new Di("platform-logger",t=>new Wx(t),"PRIVATE")),Ga(new Di("heartbeat",t=>new B2(t),"PRIVATE")),Tr(ud,t_,r),Tr(ud,t_,"esm2017"),Tr("fire-js","")}F2("");const G2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Us,SDK_VERSION:kd,_DEFAULT_ENTRY_NAME:Is,_addComponent:Dc,_addOrOverwriteComponent:Pw,_apps:Cs,_clearComponents:D2,_components:vl,_getProvider:Pd,_isFirebaseApp:kw,_isFirebaseServerApp:Q_,_registerComponent:Ga,_removeServiceInstance:C2,_serverApps:yl,deleteApp:X_,getApp:Y_,getApps:O2,initializeApp:$_,initializeServerApp:N2,onLog:Lw,registerVersion:Tr,setLogLevel:Bw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,e){this._delegate=t,this.firebase=e,Dc(t,new Di("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),X_(this._delegate)))}_getService(t,e=Is){var i;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(t);return!a.isInitialized()&&((i=a.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:e})}_removeServiceInstance(t,e=Is){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Dc(this._delegate,t)}_addOrOverwriteComponent(t){Pw(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},i0=new Md("app-compat","Firebase",K2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(r){const t={},e={__esModule:!0,initializeApp:l,app:a,registerVersion:Tr,setLogLevel:Bw,onLog:Lw,apps:null,SDK_VERSION:kd,INTERNAL:{registerComponent:d,removeApp:i,useAsService:m,modularAPIs:G2}};e.default=e,Object.defineProperty(e,"apps",{get:c});function i(p){delete t[p]}function a(p){if(p=p||Is,!Yb(t,p))throw i0.create("no-app",{appName:p});return t[p]}a.App=r;function l(p,y={}){const T=$_(p,y);if(Yb(t,T.name))return t[T.name];const b=new r(T,e);return t[T.name]=b,b}function c(){return Object.keys(t).map(p=>t[p])}function d(p){const y=p.name,T=y.replace("-compat","");if(Ga(p)&&p.type==="PUBLIC"){const b=(D=a())=>{if(typeof D[T]!="function")throw i0.create("invalid-app-argument",{appName:y});return D[T]()};p.serviceProps!==void 0&&od(b,p.serviceProps),e[T]=b,r.prototype[T]=function(...D){return this._getService.bind(this,y).apply(this,p.multipleInstances?D:[])}}return p.type==="PUBLIC"?e[T]:null}function m(p,y){return y==="serverAuth"?null:y}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){const r=Q2(H2);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:qw,extendNamespace:t,createSubscribe:xx,ErrorFactory:Md,deepExtend:od});function t(e){od(r,e)}return r}const $2=qw();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new H_("@firebase/app-compat"),Y2="@firebase/app-compat",X2="0.4.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(r){Tr(Y2,X2,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=q_();if(r.firebase!==void 0){s0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=r.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&s0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ud=$2;Z2();var W2="firebase",J2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ud.registerVersion(W2,J2,"app-compat");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,Fw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,S){function I(){}I.prototype=S.prototype,x.D=S.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(O,M,P){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return S.prototype[M].apply(O,C)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,I){I||(I=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(M=0;16>M;++M)O[M]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=x.g[0],I=x.g[1],M=x.g[2];var P=x.g[3],C=S+(P^I&(M^P))+O[0]+3614090360&4294967295;S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[2]+606105819&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[6]+2821735955&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[10]+4294925233&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[14]+2792965006&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(M^P&(I^M))+O[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[11]+643717713&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[15]+3634488961&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[3]+4107603335&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[7]+1735328473&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(I^M^P)+O[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[11]+1839030562&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[7]+4139469664&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[3]+3572445317&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[15]+530742520&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(M^(I|~P))+O[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[14]+2878612391&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[10]+4293915773&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[6]+2734768916&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[2]+718787259&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+P&4294967295}i.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var I=S-this.blockSize,O=this.B,M=this.h,P=0;P<S;){if(M==0)for(;P<=I;)a(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<S;)if(O[M++]=x.charCodeAt(P++),M==this.blockSize){a(this,O),M=0;break}}else for(;P<S;)if(O[M++]=x[P++],M==this.blockSize){a(this,O),M=0;break}}this.h=M,this.o+=S},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var I=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=I&255,I/=256;for(this.u(x),x=Array(16),S=I=0;4>S;++S)for(var O=0;32>O;O+=8)x[I++]=this.g[S]>>>O&255;return x};function l(x,S){var I=d;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=S(x)}function c(x,S){this.h=S;for(var I=[],O=!0,M=x.length-1;0<=M;M--){var P=x[M]|0;O&&P==S||(I[M]=P,O=!1)}this.g=I}var d={};function m(x){return-128<=x&&128>x?l(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return F(p(-x));for(var S=[],I=1,O=0;x>=I;O++)S[O]=x/I|0,I*=4294967296;return new c(S,0)}function y(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return F(y(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(S,8)),O=T,M=0;M<x.length;M+=8){var P=Math.min(8,x.length-M),C=parseInt(x.substring(M,M+P),S);8>P?(P=p(Math.pow(S,P)),O=O.j(P).add(p(C))):(O=O.j(I),O=O.add(p(C)))}return O}var T=m(0),b=m(1),D=m(16777216);r=c.prototype,r.m=function(){if(Q(this))return-F(this).m();for(var x=0,S=1,I=0;I<this.g.length;I++){var O=this.i(I);x+=(0<=O?O:4294967296+O)*S,S*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if(Q(this))return"-"+F(this).toString(x);for(var S=p(Math.pow(x,6)),I=this,O="";;){var M=dt(I,S).g;I=ct(I,M.j(S));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=M,j(I))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function Q(x){return x.h==-1}r.l=function(x){return x=ct(this,x),Q(x)?-1:j(x)?0:1};function F(x){for(var S=x.g.length,I=[],O=0;O<S;O++)I[O]=~x.g[O];return new c(I,~x.h).add(b)}r.abs=function(){return Q(this)?F(this):this},r.add=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0,M=0;M<=S;M++){var P=O+(this.i(M)&65535)+(x.i(M)&65535),C=(P>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);O=C>>>16,P&=65535,C&=65535,I[M]=C<<16|P}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ct(x,S){return x.add(F(S))}r.j=function(x){if(j(this)||j(x))return T;if(Q(this))return Q(x)?F(this).j(F(x)):F(F(this).j(x));if(Q(x))return F(this.j(F(x)));if(0>this.l(D)&&0>x.l(D))return p(this.m()*x.m());for(var S=this.g.length+x.g.length,I=[],O=0;O<2*S;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<x.g.length;M++){var P=this.i(O)>>>16,C=this.i(O)&65535,pe=x.i(M)>>>16,$t=x.i(M)&65535;I[2*O+2*M]+=C*$t,lt(I,2*O+2*M),I[2*O+2*M+1]+=P*$t,lt(I,2*O+2*M+1),I[2*O+2*M+1]+=C*pe,lt(I,2*O+2*M+1),I[2*O+2*M+2]+=P*pe,lt(I,2*O+2*M+2)}for(O=0;O<S;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=S;O<2*S;O++)I[O]=0;return new c(I,0)};function lt(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function it(x,S){this.g=x,this.h=S}function dt(x,S){if(j(S))throw Error("division by zero");if(j(x))return new it(T,T);if(Q(x))return S=dt(F(x),S),new it(F(S.g),F(S.h));if(Q(S))return S=dt(x,F(S)),new it(F(S.g),S.h);if(30<x.g.length){if(Q(x)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=S;0>=O.l(x);)I=ft(I),O=ft(O);var M=pt(I,1),P=pt(O,1);for(O=pt(O,2),I=pt(I,2);!j(O);){var C=P.add(O);0>=C.l(x)&&(M=M.add(I),P=C),O=pt(O,1),I=pt(I,1)}return S=ct(x,M.j(S)),new it(M,S)}for(M=T;0<=x.l(S);){for(I=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=p(I),C=P.j(S);Q(C)||0<C.l(x);)I-=O,P=p(I),C=P.j(S);j(P)&&(P=b),M=M.add(P),x=ct(x,C)}return new it(M,x)}r.A=function(x){return dt(this,x).h},r.and=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)&x.i(O);return new c(I,this.h&x.h)},r.or=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)|x.i(O);return new c(I,this.h|x.h)},r.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)^x.i(O);return new c(I,this.h^x.h)};function ft(x){for(var S=x.g.length+1,I=[],O=0;O<S;O++)I[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(I,x.h)}function pt(x,S){var I=S>>5;S%=32;for(var O=x.g.length-I,M=[],P=0;P<O;P++)M[P]=0<S?x.i(P+I)>>>S|x.i(P+I+1)<<32-S:x.i(P+I);return new c(M,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Fw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,ws=c}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gw,dc,Hw,Kf,e_,Kw,Qw,$w;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,v){return h==Array.prototype||h==Object.prototype||(h[_]=v.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<h.length;++_){var v=h[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=e(this);function a(h,_){if(_)t:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var L=h[w];if(!(L in v))break t;v=v[L]}h=h[h.length-1],w=v[h],_=_(w),_!=w&&_!=null&&t(v,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var v=0,w=!1,L={next:function(){if(!w&&v<h.length){var $=v++;return{value:_($,h[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,v){return h.call.apply(h.bind,arguments)}function T(h,_,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),h.apply(_,L)}}return function(){return h.apply(_,arguments)}}function b(h,_,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,b.apply(null,arguments)}function D(h,_){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function j(h,_){function v(){}v.prototype=_.prototype,h.aa=_.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,L,$){for(var ut=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)ut[zt-2]=arguments[zt];return _.prototype[L].apply(w,ut)}}function Q(h){const _=h.length;if(0<_){const v=Array(_);for(let w=0;w<_;w++)v[w]=h[w];return v}return[]}function F(h,_){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const L=h.length||0,$=w.length||0;h.length=L+$;for(let ut=0;ut<$;ut++)h[L+ut]=w[ut]}else h.push(w)}}class ct{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function lt(h){return/^[\s\xa0]*$/.test(h)}function it(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function dt(h){return dt[" "](h),h}dt[" "]=function(){};var ft=it().indexOf("Gecko")!=-1&&!(it().toLowerCase().indexOf("webkit")!=-1&&it().indexOf("Edge")==-1)&&!(it().indexOf("Trident")!=-1||it().indexOf("MSIE")!=-1)&&it().indexOf("Edge")==-1;function pt(h,_,v){for(const w in h)_.call(v,h[w],w,h)}function x(h,_){for(const v in h)_.call(void 0,h[v],v,h)}function S(h){const _={};for(const v in h)_[v]=h[v];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,_){let v,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(v in w)h[v]=w[v];for(let $=0;$<I.length;$++)v=I[$],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function M(h){var _=1;h=h.split(":");const v=[];for(;0<_&&h.length;)v.push(h.shift()),_--;return h.length&&v.push(h.join(":")),v}function P(h){d.setTimeout(()=>{throw h},0)}function C(){var h=xt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class pe{constructor(){this.h=this.g=null}add(_,v){const w=$t.get();w.set(_,v),this.h?this.h.next=w:this.g=w,this.h=w}}var $t=new ct(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let at,mt=!1,xt=new pe,V=()=>{const h=d.Promise.resolve(void 0);at=()=>{h.then(tt)}};var tt=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){P(v)}var _=$t;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}mt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,_),d.removeEventListener("test",v,_)}catch{}return h}();function Z(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ft){t:{try{dt(_.nodeName);var L=!0;break t}catch{}L=!1}L||(_=null)}}else v=="mouseover"?_=h.fromElement:v=="mouseout"&&(_=h.toElement);this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:yt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Z.aa.h.call(this)}}j(Z,st);var yt={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),jt=0;function un(h,_,v,w,L){this.listener=h,this.proxy=null,this.src=_,this.type=v,this.capture=!!w,this.ha=L,this.key=++jt,this.da=this.fa=!1}function En(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vn(h){this.src=h,this.g={},this.h=0}Vn.prototype.add=function(h,_,v,w,L){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var ut=jn(h,_,w,L);return-1<ut?(_=h[ut],v||(_.fa=!1)):(_=new un(_,this.src,$,!!w,L),_.fa=v,h.push(_)),_};function Nn(h,_){var v=_.type;if(v in h.g){var w=h.g[v],L=Array.prototype.indexOf.call(w,_,void 0),$;($=0<=L)&&Array.prototype.splice.call(w,L,1),$&&(En(_),h.g[v].length==0&&(delete h.g[v],h.h--))}}function jn(h,_,v,w){for(var L=0;L<h.length;++L){var $=h[L];if(!$.da&&$.listener==_&&$.capture==!!v&&$.ha==w)return L}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Xt={};function Xr(h,_,v,w,L){if(Array.isArray(_)){for(var $=0;$<_.length;$++)Xr(h,_[$],v,w,L);return null}return v=so(v),h&&h[Ht]?h.K(_,v,p(w)?!!w.capture:!1,L):Ke(h,_,v,!1,w,L)}function Ke(h,_,v,w,L,$){if(!_)throw Error("Invalid event type");var ut=p(L)?!!L.capture:!!L,zt=ji(h);if(zt||(h[On]=zt=new Vn(h)),v=zt.add(_,v,w,ut,$),v.proxy)return v;if(w=Xl(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)vt||(L=ut),L===void 0&&(L=!1),h.addEventListener(_.toString(),w,L);else if(h.attachEvent)h.attachEvent(Zr(_.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Xl(){function h(v){return _.call(h.src,h.listener,v)}const _=Zl;return h}function Gs(h,_,v,w,L){if(Array.isArray(_))for(var $=0;$<_.length;$++)Gs(h,_[$],v,w,L);else w=p(w)?!!w.capture:!!w,v=so(v),h&&h[Ht]?(h=h.i,_=String(_).toString(),_ in h.g&&($=h.g[_],v=jn($,v,w,L),-1<v&&(En($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete h.g[_],h.h--)))):h&&(h=ji(h))&&(_=h.g[_.toString()],h=-1,_&&(h=jn(_,v,w,L)),(v=-1<h?_[h]:null)&&Bi(v))}function Bi(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ht])Nn(_.i,h);else{var v=h.type,w=h.proxy;_.removeEventListener?_.removeEventListener(v,w,h.capture):_.detachEvent?_.detachEvent(Zr(v),w):_.addListener&&_.removeListener&&_.removeListener(w),(v=ji(_))?(Nn(v,h),v.h==0&&(v.src=null,_[On]=null)):En(h)}}}function Zr(h){return h in Xt?Xt[h]:Xt[h]="on"+h}function Zl(h,_){if(h.da)h=!0;else{_=new Z(_,this);var v=h.listener,w=h.ha||h.src;h.fa&&Bi(h),h=v.call(w,_)}return h}function ji(h){return h=h[On],h instanceof Vn?h:null}var zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function so(h){return typeof h=="function"?h:(h[zi]||(h[zi]=function(_){return h.handleEvent(_)}),h[zi])}function wt(){ot.call(this),this.i=new Vn(this),this.M=this,this.F=null}j(wt,ot),wt.prototype[Ht]=!0,wt.prototype.removeEventListener=function(h,_,v,w){Gs(this,h,_,v,w)};function Ut(h,_){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var L=_;_=new st(w,h),O(_,L)}if(L=!0,v)for(var $=v.length-1;0<=$;$--){var ut=_.g=v[$];L=cn(ut,w,!0,_)&&L}if(ut=_.g=h,L=cn(ut,w,!0,_)&&L,L=cn(ut,w,!1,_)&&L,v)for($=0;$<v.length;$++)ut=_.g=v[$],L=cn(ut,w,!1,_)&&L}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var v=h.g[_],w=0;w<v.length;w++)En(v[w]);delete h.g[_],h.h--}}this.F=null},wt.prototype.K=function(h,_,v,w){return this.i.add(String(h),_,!1,v,w)},wt.prototype.L=function(h,_,v,w){return this.i.add(String(h),_,!0,v,w)};function cn(h,_,v,w){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var L=!0,$=0;$<_.length;++$){var ut=_[$];if(ut&&!ut.da&&ut.capture==v){var zt=ut.listener,ze=ut.ha||ut.src;ut.fa&&Nn(h.i,ut),L=zt.call(ze,w)!==!1&&L}}return L&&!w.defaultPrevented}function hn(h,_,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function ch(h){h.g=hn(()=>{h.g=null,h.i&&(h.i=!1,ch(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class mm extends ot{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ch(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(h){ot.call(this),this.h=h,this.g={}}j(Hs,ot);var Ks=[];function Qs(h){pt(h.g,function(_,v){this.g.hasOwnProperty(v)&&Bi(_)},h),h.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),Qs(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=d.JSON.stringify,ao=d.JSON.parse,$s=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Wl(){}Wl.prototype.h=null;function Jl(h){return h.h||(h.h=h.i())}function tu(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jr(){st.call(this,"d")}j(Jr,st);function eu(){st.call(this,"c")}j(eu,st);var wr={},nu=null;function qi(){return nu=nu||new wt}wr.La="serverreachability";function oo(h){st.call(this,wr.La,h)}j(oo,st);function Fi(h){const _=qi();Ut(_,new oo(_))}wr.STAT_EVENT="statevent";function hh(h,_){st.call(this,wr.STAT_EVENT,h),this.stat=_}j(hh,st);function _e(h){const _=qi();Ut(_,new hh(_,h))}wr.Ma="timingevent";function je(h,_){st.call(this,wr.Ma,h),this.size=_}j(je,st);function Me(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function ru(h,_,v,w,L,$){h.info(function(){if(h.g)if($)for(var ut="",zt=$.split("&"),ze=0;ze<zt.length;ze++){var qt=zt[ze].split("=");if(1<qt.length){var $e=qt[0];qt=qt[1];var qe=$e.split("_");ut=2<=qe.length&&qe[1]=="type"?ut+($e+"="+qt+"&"):ut+($e+"=redacted&")}}else ut=null;else ut=$;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+_+`
`+v+`
`+ut})}function gm(h,_,v,w,L,$,ut){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+_+`
`+v+`
`+$+" "+ut})}function Gi(h,_,v,w){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ys(h,v)+(w?" "+w:"")})}function fh(h,_){h.info(function(){return"TIMEOUT: "+_})}Wn.prototype.info=function(){};function Ys(h,_){if(!h.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ut=1;ut<L.length;ut++)L[ut]=""}}}}return mr(v)}catch{return _}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function Rr(){}j(Rr,Wl),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},Sr=new Rr;function Tn(h,_,v,w){this.j=h,this.i=_,this.l=v,this.R=w||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}var iu={},lo={};function gr(h,_,v){h.L=1,h.v=ta(zn(_)),h.m=v,h.P=!0,ei(h,null)}function ei(h,_){h.F=Date.now(),Xs(h),h.A=zn(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),cu(v.i,"t",w),h.C=0,v=h.j.J,h.h=new Ie,h.g=Ch(h.j,v?_:null,!h.m),0<h.O&&(h.M=new mm(b(h.Y,h,h.g),h.O)),_=h.U,v=h.g,w=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ks[0]=L.toString()),L=Ks);for(var $=0;$<L.length;$++){var ut=Xr(v,L[$],w||_.handleEvent,!1,_.h||_);if(!ut)break;_.g[ut.key]=ut}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Fi(),ru(h.i,h.u,h.A,h.l,h.R,h.m)}Tn.prototype.ca=function(h){h=h.target;const _=this.M;_&&nr(h)==3?_.j():this.Y(h)},Tn.prototype.Y=function(h){try{if(h==this.g)t:{const qe=nr(this.g);var _=this.g.Ba();const ui=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Eh(this.g)))){this.J||qe!=4||_==7||(_==8||0>=ui?Fi(3):Fi(2)),Ki(this);var v=this.g.Z();this.X=v;e:if(dh(this)){var w=Eh(this.g);h="";var L=w.length,$=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Ir(this);var ut="";break e}this.h.i=new d.TextDecoder}for(_=0;_<L;_++)this.h.h=!0,h+=this.h.i.decode(w[_],{stream:!($&&_==L-1)});w.length=0,this.h.g+=h,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=v==200,gm(this.i,this.u,this.A,this.l,this.R,qe,v),this.o){if(this.T&&!this.K){e:{if(this.g){var zt,ze=this.g;if((zt=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(zt)){var qt=zt;break e}}qt=null}if(v=qt)Gi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zs(this,v);else{this.o=!1,this.s=3,_e(12),tn(this),Ir(this);break t}}if(this.P){v=!0;let en;for(;!this.J&&this.C<ut.length;)if(en=mh(this,ut),en==lo){qe==4&&(this.s=4,_e(14),v=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(en==iu){this.s=4,_e(15),Gi(this.i,this.l,ut,"[Invalid Chunk]"),v=!1;break}else Gi(this.i,this.l,en,null),Zs(this,en);if(dh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||ut.length!=0||this.h.h||(this.s=1,_e(16),v=!1),this.o=this.o&&v,!v)Gi(this.i,this.l,ut,"[Invalid Chunked Response]"),tn(this),Ir(this);else if(0<ut.length&&!this.W){this.W=!0;var $e=this.j;$e.g==this&&$e.ba&&!$e.M&&($e.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),la($e),$e.M=!0,_e(11))}}else Gi(this.i,this.l,ut,null),Zs(this,ut);qe==4&&tn(this),this.o&&!this.J&&(qe==4?Sh(this.j,this):(this.o=!1,Xs(this)))}else Em(this.g),v==400&&0<ut.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),tn(this),Ir(this)}}}catch{}finally{}};function dh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function mh(h,_){var v=h.C,w=_.indexOf(`
`,v);return w==-1?lo:(v=Number(_.substring(v,w)),isNaN(v)?iu:(w+=1,w+v>_.length?lo:(_=_.slice(w,w+v),h.C=w+v,_)))}Tn.prototype.cancel=function(){this.J=!0,tn(this)};function Xs(h){h.S=Date.now()+h.I,gh(h,h.I)}function gh(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Me(b(h.ba,h),_)}function Ki(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Tn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(fh(this.i,this.A),this.L!=2&&(Fi(),_e(17)),tn(this),this.s=2,Ir(this)):gh(this,this.S-h)};function Ir(h){h.j.G==0||h.J||Sh(h.j,h)}function tn(h){Ki(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Qs(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Zs(h,_){try{var v=h.j;if(v.G!=0&&(v.g==h||su(v.h,h))){if(!h.K&&su(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)To(v),vo(v);else break t;gu(v),_e(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Me(b(v.Za,v),6e3));if(1>=co(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else li(v,11)}else if((h.K||v.g==h)&&To(v),!lt(_))for(L=v.Da.g.parse(_),_=0;_<L.length;_++){let qt=L[_];if(v.T=qt[0],qt=qt[1],v.G==2)if(qt[0]=="c"){v.K=qt[1],v.ia=qt[2];const $e=qt[3];$e!=null&&(v.la=$e,v.j.info("VER="+v.la));const qe=qt[4];qe!=null&&(v.Aa=qe,v.j.info("SVER="+v.Aa));const ui=qt[5];ui!=null&&typeof ui=="number"&&0<ui&&(w=1.5*ui,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const en=h.g;if(en){const Mr=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var $=w.h;$.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ho($,$.h),$.h=null))}if(w.D){const _u=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(w.ya=_u,ie(w.I,w.D,_u))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ut=h;if(w.qa=Ih(w,w.J?w.ia:null,w.W),ut.K){bn(w.h,ut);var zt=ut,ze=w.L;ze&&(zt.I=ze),zt.B&&(Ki(zt),Xs(zt)),w.g=ut}else Ah(w);0<v.i.length&&Eo(v)}else qt[0]!="stop"&&qt[0]!="close"||li(v,7);else v.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?li(v,7):du(v):qt[0]!="noop"&&v.l&&v.l.ta(qt),v.v=0)}}Fi(4)}catch{}}var ph=class{constructor(h,_){this.g=h,this.map=_}};function ni(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function co(h){return h.h?1:h.g?h.g.size:0}function su(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ho(h,_){h.g?h.g.add(_):h.h=_}function bn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ni.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function au(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const v of h.g.values())_=_.concat(v.D);return _}return Q(h.i)}function pm(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],v=h.length,w=0;w<v;w++)_.push(h[w]);return _}_=[],v=0;for(w in h)_[v++]=h[w];return _}function fo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var v=0;v<h;v++)_.push(v);return _}_=[],v=0;for(const w in h)_[v++]=w;return _}}}function ou(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var v=fo(h),w=pm(h),L=w.length,$=0;$<L;$++)_.call(void 0,w[$],v&&v[$],h)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _m(h,_){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),L=null;if(0<=w){var $=h[v].substring(0,w);L=h[v].substring(w+1)}else $=h[v];_($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pe){this.h=h.h,Js(this,h.j),this.o=h.o,this.g=h.g,Qi(this,h.s),this.l=h.l;var _=h.i,v=new ii;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),ri(this,v),this.m=h.m}else h&&(_=String(h).match(Ws))?(this.h=!1,Js(this,_[1]||"",!0),this.o=Jn(_[2]||""),this.g=Jn(_[3]||"",!0),Qi(this,_[4]),this.l=Jn(_[5]||"",!0),ri(this,_[6]||"",!0),this.m=Jn(_[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}Pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ea(_,lu,!0),":");var v=this.g;return(v||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ea(_,lu,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ea(v,v.charAt(0)=="/"?ym:uu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ea(v,mo)),h.join("")};function zn(h){return new Pe(h)}function Js(h,_,v){h.j=v?Jn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Qi(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ri(h,_,v){_ instanceof ii?(h.i=_,yh(h.i,h.h)):(v||(_=ea(_,vm)),h.i=new ii(_,h.h))}function ie(h,_,v){h.i.set(_,v)}function ta(h){return ie(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Jn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ea(h,_,v){return typeof h=="string"?(h=encodeURI(h).replace(_,_h),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _h(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var lu=/[#\/\?@]/g,uu=/[#\?:]/g,ym=/[#\?]/g,vm=/[#\?@]/g,mo=/#/g;function ii(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function tr(h){h.g||(h.g=new Map,h.h=0,h.i&&_m(h.i,function(_,v){h.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}r=ii.prototype,r.add=function(h,_){tr(this),this.i=null,h=Cr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(_),this.h+=1,this};function si(h,_){tr(h),_=Cr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ai(h,_){return tr(h),_=Cr(h,_),h.g.has(_)}r.forEach=function(h,_){tr(this),this.g.forEach(function(v,w){v.forEach(function(L){h.call(_,L,w,this)},this)},this)},r.na=function(){tr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let w=0;w<_.length;w++){const L=h[w];for(let $=0;$<L.length;$++)v.push(_[w])}return v},r.V=function(h){tr(this);let _=[];if(typeof h=="string")ai(this,h)&&(_=_.concat(this.g.get(Cr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)_=_.concat(h[v])}return _},r.set=function(h,_){return tr(this),this.i=null,h=Cr(this,h),ai(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},r.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function cu(h,_,v){si(h,_),0<v.length&&(h.i=null,h.g.set(Cr(h,_),Q(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var w=_[v];const $=encodeURIComponent(String(w)),ut=this.V(w);for(w=0;w<ut.length;w++){var L=$;ut[w]!==""&&(L+="="+encodeURIComponent(String(ut[w]))),h.push(L)}}return this.i=h.join("&")};function Cr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function yh(h,_){_&&!h.j&&(tr(h),h.i=null,h.g.forEach(function(v,w){var L=w.toLowerCase();w!=L&&(si(this,w),cu(this,L,v))},h)),h.j=_}function na(h,_){const v=new Wn;if(d.Image){const w=new Image;w.onload=D(er,v,"TestLoadImage: loaded",!0,_,w),w.onerror=D(er,v,"TestLoadImage: error",!1,_,w),w.onabort=D(er,v,"TestLoadImage: abort",!1,_,w),w.ontimeout=D(er,v,"TestLoadImage: timeout",!1,_,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else _(!1)}function pr(h,_){const v=new Wn,w=new AbortController,L=setTimeout(()=>{w.abort(),er(v,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(L),$.ok?er(v,"TestPingServer: ok",!0,_):er(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(L),er(v,"TestPingServer: error",!1,_)})}function er(h,_,v,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(v)}catch{}}function ra(){this.g=new $s}function Dr(h,_,v){const w=v||"";try{ou(h,function(L,$){let ut=L;p(L)&&(ut=mr(L)),_.push(w+$+"="+encodeURIComponent(ut))})}catch(L){throw _.push(w+"type="+encodeURIComponent("_badmap")),L}}function $i(h){this.l=h.Ub||null,this.j=h.eb||!1}j($i,Wl),$i.prototype.g=function(){return new oi(this.l,this.j)},$i.prototype.i=function(h){return function(){return h}}({});function oi(h,_){wt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(oi,wt),r=oi.prototype,r.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Vr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?xr(this):Vr(this),this.readyState==3&&hu(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,xr(this))},r.Qa=function(h){this.g&&(this.response=h,xr(this))},r.ga=function(){this.g&&xr(this)};function xr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Vr(h)}r.setRequestHeader=function(h,_){this.u.append(h,_)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=_.next();return h.join(`\r
`)};function Vr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function fu(h){let _="";return pt(h,function(v,w){_+=w,_+=":",_+=v,_+=`\r
`}),_}function Qe(h,_,v){t:{for(w in v){var w=!1;break t}w=!0}w||(v=fu(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):ie(h,_,v))}function Zt(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Zt,wt);var go=/^https?$/i,ia=["POST","PUT"];r=Zt.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,_,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Jl(this.o):Jl(Sr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch($){vh(this,$);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)v.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),L=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ia,_,void 0))||w||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ut]of v)this.g.setRequestHeader($,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(h),this.u=!1}catch($){vh(this,$)}};function vh(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,po(h),Nr(h)}function po(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ut(this,"complete"),Ut(this,"abort"),Nr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),Zt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?_o(this):this.bb())},r.bb=function(){_o(this)};function _o(h){if(h.h&&typeof c<"u"&&(!h.v[1]||nr(h)!=4||h.Z()!=2)){if(h.u&&nr(h)==4)hn(h.Ea,0,h);else if(Ut(h,"readystatechange"),nr(h)==4){h.h=!1;try{const ut=h.Z();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var v;if(!(v=_)){var w;if(w=ut===0){var L=String(h.D).match(Ws)[1]||null;!L&&d.self&&d.self.location&&(L=d.self.location.protocol.slice(0,-1)),w=!go.test(L?L.toLowerCase():"")}v=w}if(v)Ut(h,"complete"),Ut(h,"success");else{h.m=6;try{var $=2<nr(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",po(h)}}finally{Nr(h)}}}}function Nr(h,_){if(h.g){sa(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ut(h,"ready");try{v.onreadystatechange=w}catch{}}}function sa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),ao(_)}};function Eh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Em(h){const _={};h=(h.g&&2<=nr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(lt(h[w]))continue;var v=M(h[w]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=_[L]||[];_[L]=$,$.push(v)}x(_,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(h,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||_}function yo(h){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,h),this.cb=aa("retryDelaySeedMs",1e4,h),this.Wa=aa("forwardChannelMaxRetries",2,h),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ni(h&&h.concurrentRequestLimit),this.Da=new ra,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=yo.prototype,r.la=8,r.G=1,r.connect=function(h,_,v,w){_e(0),this.W=h,this.H=_||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Ih(this,null,this.W),Eo(this)};function du(h){if(Th(h),h.G==3){var _=h.U++,v=zn(h.I);if(ie(v,"SID",h.K),ie(v,"RID",_),ie(v,"TYPE","terminate"),oa(h,v),_=new Tn(h,h.j,_),_.L=2,_.v=ta(zn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=_.v,v=!0),v||(_.g=Ch(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Xs(_)}Rh(h)}function vo(h){h.g&&(la(h),h.g.cancel(),h.g=null)}function Th(h){vo(h),h.u&&(d.clearTimeout(h.u),h.u=null),To(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Eo(h){if(!uo(h.h)&&!h.s){h.s=!0;var _=h.Ga;at||V(),mt||(at(),mt=!0),xt.add(_,h),h.B=0}}function Tm(h,_){return co(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Me(b(h.Ga,h,_),pu(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new Tn(this,this.j,h);let $=this.o;if(this.S&&($?($=S($),O($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)t:{for(var _=0,v=0;v<this.i.length;v++){e:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(_+=w,4096<_){_=v;break t}if(_===4096||v===this.i.length-1){_=v+1;break t}}_=1e3}else _=1e3;_=bh(this,L,_),v=zn(this.I),ie(v,"RID",h),ie(v,"CVER",22),this.D&&ie(v,"X-HTTP-Session-Id",this.D),oa(this,v),$&&(this.O?_="headers="+encodeURIComponent(String(fu($)))+"&"+_:this.m&&Qe(v,this.m,$)),ho(this.h,L),this.Ua&&ie(v,"TYPE","init"),this.P?(ie(v,"$req",_),ie(v,"SID","null"),L.T=!0,gr(L,v,null)):gr(L,v,_),this.G=2}}else this.G==3&&(h?mu(this,h):this.i.length==0||uo(this.h)||mu(this))};function mu(h,_){var v;_?v=_.l:v=h.U++;const w=zn(h.I);ie(w,"SID",h.K),ie(w,"RID",v),ie(w,"AID",h.T),oa(h,w),h.m&&h.o&&Qe(w,h.m,h.o),v=new Tn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),_&&(h.i=_.D.concat(h.i)),_=bh(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ho(h.h,v),gr(v,w,_)}function oa(h,_){h.H&&pt(h.H,function(v,w){ie(_,w,v)}),h.l&&ou({},function(v,w){ie(_,w,v)})}function bh(h,_,v){v=Math.min(h.i.length,v);var w=h.l?b(h.l.Na,h.l,h):null;t:{var L=h.i;let $=-1;for(;;){const ut=["count="+v];$==-1?0<v?($=L[0].g,ut.push("ofs="+$)):$=0:ut.push("ofs="+$);let zt=!0;for(let ze=0;ze<v;ze++){let qt=L[ze].g;const $e=L[ze].map;if(qt-=$,0>qt)$=Math.max(0,L[ze].g-100),zt=!1;else try{Dr($e,ut,"req"+qt+"_")}catch{w&&w($e)}}if(zt){w=ut.join("&");break t}}}return h=h.i.splice(0,v),_.D=h,w}function Ah(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;at||V(),mt||(at(),mt=!0),xt.add(_,h),h.v=0}}function gu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Me(b(h.Fa,h),pu(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,wh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Me(b(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),vo(this),wh(this))};function la(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function wh(h){h.g=new Tn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=zn(h.qa);ie(_,"RID","rpc"),ie(_,"SID",h.K),ie(_,"AID",h.T),ie(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ie(_,"TO",h.ja),ie(_,"TYPE","xmlhttp"),oa(h,_),h.m&&h.o&&Qe(_,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ta(zn(_)),v.m=null,v.P=!0,ei(v,h)}r.Za=function(){this.C!=null&&(this.C=null,vo(this),gu(this),_e(19))};function To(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Sh(h,_){var v=null;if(h.g==_){To(h),la(h),h.g=null;var w=2}else if(su(h.h,_))v=_.D,bn(h.h,_),w=1;else return;if(h.G!=0){if(_.o)if(w==1){v=_.m?_.m.length:0,_=Date.now()-_.F;var L=h.B;w=qi(),Ut(w,new je(w,v)),Eo(h)}else Ah(h);else if(L=_.s,L==3||L==0&&0<_.X||!(w==1&&Tm(h,_)||w==2&&gu(h)))switch(v&&0<v.length&&(_=h.h,_.i=_.i.concat(v)),L){case 1:li(h,5);break;case 4:li(h,10);break;case 3:li(h,6);break;default:li(h,2)}}}function pu(h,_){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*_}function li(h,_){if(h.j.info("Error code "+_),_==2){var v=b(h.fb,h),w=h.Xa;const L=!w;w=new Pe(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Js(w,"https"),ta(w),L?na(w.toString(),v):pr(w.toString(),v)}else _e(2);h.G=0,h.l&&h.l.sa(_),Rh(h),Th(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Rh(h){if(h.G=0,h.ka=[],h.l){const _=au(h.h);(_.length!=0||h.i.length!=0)&&(F(h.ka,_),F(h.ka,h.i),h.h.i.length=0,Q(h.i),h.i.length=0),h.l.ra()}}function Ih(h,_,v){var w=v instanceof Pe?zn(v):new Pe(v);if(w.g!="")_&&(w.g=_+"."+w.g),Qi(w,w.s);else{var L=d.location;w=L.protocol,_=_?_+"."+L.hostname:L.hostname,L=+L.port;var $=new Pe(null);w&&Js($,w),_&&($.g=_),L&&Qi($,L),v&&($.l=v),w=$}return v=h.D,_=h.ya,v&&_&&ie(w,v,_),ie(w,"VER",h.la),oa(h,w),w}function Ch(h,_,v){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Zt(new $i({eb:v})):new Zt(h.pa),_.Ha(h.J),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}r=Dh.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function bo(){}bo.prototype.g=function(h,_){return new An(h,_)};function An(h,_){wt.call(this),this.g=new yo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!lt(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!lt(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Or(this)}j(An,wt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){du(this.g)},An.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=mr(h),h=v);_.i.push(new ph(_.Ya++,h)),_.G==3&&Eo(_)},An.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,An.aa.N.call(this)};function xh(h){Jr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const v in _){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}j(xh,Jr);function Vh(){eu.call(this),this.status=1}j(Vh,eu);function Or(h){this.g=h}j(Or,Dh),Or.prototype.ua=function(){Ut(this.g,"a")},Or.prototype.ta=function(h){Ut(this.g,new xh(h))},Or.prototype.sa=function(h){Ut(this.g,new Vh)},Or.prototype.ra=function(){Ut(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,$w=function(){return new bo},Qw=function(){return qi()},Kw=wr,e_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Kf=Hi,ti.COMPLETE="complete",Hw=ti,tu.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,dc=tu,Zt.prototype.listenOnce=Zt.prototype.L,Zt.prototype.getLastError=Zt.prototype.Ka,Zt.prototype.getLastErrorCode=Zt.prototype.Ba,Zt.prototype.getStatus=Zt.prototype.Z,Zt.prototype.getResponseJson=Zt.prototype.Oa,Zt.prototype.getResponseText=Zt.prototype.oa,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Ha,Gw=Zt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const o0="@firebase/firestore",l0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new H_("@firebase/firestore");function ol(){return Ds.logLevel}function tV(r){Ds.setLogLevel(r)}function rt(r,...t){if(Ds.logLevel<=Bt.DEBUG){const e=t.map(Z_);Ds.debug(`Firestore (${zl}): ${r}`,...e)}}function xe(r,...t){if(Ds.logLevel<=Bt.ERROR){const e=t.map(Z_);Ds.error(`Firestore (${zl}): ${r}`,...e)}}function Xn(r,...t){if(Ds.logLevel<=Bt.WARN){const e=t.map(Z_);Ds.warn(`Firestore (${zl}): ${r}`,...e)}}function Z_(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Yw(r,i,e)}function Yw(r,t,e){let i=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw xe(i),new Error(i)}function Tt(r,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,r||Yw(t,a,i)}function eV(r,t){r||_t(57014,t)}function gt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Us{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class nV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Je.UNAUTHENTICATED))}shutdown(){}}class rV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class iV{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Tt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ln,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ln)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string",31837,{l:i}),new Xw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Tt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class sV{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aV{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new sV(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oV{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Q_(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Tt(this.o===void 0,3512);const i=l=>{l.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const a=l=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Tt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new u0(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=lV(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%62))}return i}}function It(r,t){return r<t?-1:r>t?1:0}function n_(r,t){let e=0;for(;e<r.length&&e<t.length;){const i=r.codePointAt(e),a=t.codePointAt(e);if(i!==a){if(i<128&&a<128)return It(i,a);{const l=W_(),c=uV(l.encode(c0(r,e)),l.encode(c0(t,e)));return c!==0?c:It(i,a)}}e+=i>65535?2:1}return It(r.length,t.length)}function c0(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function uV(r,t){for(let e=0;e<r.length&&e<t.length;++e)if(r[e]!==t[e])return It(r[e],t[e]);return It(r.length,t.length)}function El(r,t,e){return r.length===t.length&&r.every((i,a)=>e(i,t[a]))}function Zw(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class jr{constructor(t,e,i){e===void 0?e=0:e>t.length&&_t(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&_t(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return jr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof jr?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=jr.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return It(t.length,e.length)}static compareSegments(t,e){const i=jr.isNumericId(t),a=jr.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?jr.extractNumericId(t).compare(jr.extractNumericId(e)):n_(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ws.fromString(t.substring(4,t.length-2))}}class kt extends jr{construct(t,e,i){return new kt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new nt(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new kt(e)}static emptyPath(){return new kt([])}}const cV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends jr{construct(t,e,i){return new Ee(t,e,i)}static isValidIdentifier(t){return cV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new Ee([h0])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new nt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new nt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new nt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ee(e)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(kt.fromString(t))}static fromName(t){return new ht(kt.fromString(t).popFirst(5))}static empty(){return new ht(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new kt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r,t,e){if(!e)throw new nt(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function Ww(r,t,e,i){if(t===!0&&i===!0)throw new nt(K.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function f0(r){if(!ht.isDocumentKey(r))throw new nt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function d0(r){if(ht.isDocumentKey(r))throw new nt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Jw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ld(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":_t(12329,{type:typeof r})}function Qt(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new nt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ld(r);throw new nt(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function tS(r,t){if(t<=0)throw new nt(K.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(r,t){const e={typeString:r};return t&&(e.value=t),e}function Yc(r,t){if(!Jw(r))throw new nt(K.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,l="value"in t[i]?{value:t[i].value}:void 0;if(!(i in r)){e=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${i}' field to equal '${l.value}'`;break}}if(e)throw new nt(K.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,g0=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(t){return Wt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*g0);return new Wt(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<m0)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g0}_compareTo(t){return this.seconds===t.seconds?It(this.nanoseconds,t.nanoseconds):It(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yc(t,Wt._jsonSchema))return new Wt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-m0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Be("string",Wt._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Wt(0,0))}static max(){return new bt(new Wt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;class cd{constructor(t,e,i,a){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=a}}function r_(r){return r.fields.find(t=>t.kind===2)}function Ca(r){return r.fields.filter(t=>t.kind!==2)}cd.UNKNOWN_ID=-1;class Qf{constructor(t,e){this.fieldPath=t,this.kind=e}}class Vc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Vc(0,Zn.min())}}function eS(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=bt.fromTimestamp(i===1e9?new Wt(e+1,0):new Wt(e,i));return new Zn(a,ht.empty(),t)}function nS(r){return new Zn(r.readTime,r.key,Tl)}class Zn{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Zn(bt.min(),ht.empty(),Tl)}static max(){return new Zn(bt.max(),ht.empty(),Tl)}}function ey(r,t){let e=r.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(r.documentKey,t.documentKey),e!==0?e:It(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==rS)throw r;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):B.reject(e)}static resolve(t){return new B((e,i)=>{e(t)})}static reject(t){return new B((e,i)=>{i(t)})}static waitFor(t){return new B((e,i)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&e()},m=>i(m))}),c=!0,l===a&&e()})}static or(t){let e=B.resolve(!1);for(const i of t)e=e.next(a=>a?B.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,l)=>{i.push(e.call(this,a,l))}),this.waitFor(i)}static mapArray(t,e){return new B((i,a)=>{const l=t.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;e(t[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(t,e){return new B((i,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="SimpleDb";class Bd{static open(t,e,i,a){try{return new Bd(e,t.transaction(a,i))}catch(l){throw new vc(e,l)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new ln,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new vc(t,e.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=ny(i.target.error);this.S.reject(new vc(t,a))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(rt(Yn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new fV(e)}}class Hr{static delete(t){return rt(Yn,"Removing database:",t),Na(q_().indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!xw())return!1;if(Hr.F())return!0;const t=ld(),e=Hr.M(t),i=0<e&&e<10,a=sS(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.O)==="YES"}static N(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(t,e,i){this.name=t,this.version=e,this.B=i,this.L=null,Hr.M(ld())===12.2&&xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(t){return this.db||(rt(Yn,"Opening database:",this.name),this.db=await new Promise((e,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{i(new vc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new nt(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new nt(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new vc(t,c))},a.onupgradeneeded=l=>{rt(Yn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,l.oldVersion,this.version).next(()=>{rt(Yn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const i=e.target;this.L=i.version},{passive:!0})),this.db.addEventListener("versionchange",e=>{var i;e.newVersion===null&&(Xn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(i=this.databaseDeletedListener)===null||i===void 0||i.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(t){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=t}async runTransaction(t,e,i,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(t);const d=Bd.open(this.db,t,l?"readonly":"readwrite",i),m=a(d).next(p=>(d.v(),p)).catch(p=>(d.abort(p),B.reject(p))).toPromise();return m.catch(()=>{}),await d.D,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(rt(Yn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sS(r){const t=r.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class hV{constructor(t){this.$=t,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(t){this.$=t}done(){this.U=!0}G(t){this.K=t}delete(){return Na(this.$.delete())}}class vc extends nt{constructor(t,e){super(K.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Bs(r){return r.name==="IndexedDbTransactionError"}class fV{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(rt(Yn,"PUT",this.store.name,t,e),i=this.store.put(e,t)):(rt(Yn,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Na(i)}add(t){return rt(Yn,"ADD",this.store.name,t,t),Na(this.store.add(t))}get(t){return Na(this.store.get(t)).next(e=>(e===void 0&&(e=null),rt(Yn,"GET",this.store.name,t,e),e))}delete(t){return rt(Yn,"DELETE",this.store.name,t),Na(this.store.delete(t))}count(){return rt(Yn,"COUNT",this.store.name),Na(this.store.count())}j(t,e){const i=this.options(t,e),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new B((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(i),c=[];return this.J(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new B((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}Y(t,e){rt(Yn,"DELETE ALL",this.store.name);const i=this.options(t,e);i.Z=!1;const a=this.cursor(i);return this.J(a,(l,c,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const a=this.cursor(i);return this.J(a,e)}ee(t){const e=this.cursor({});return new B((i,a)=>{e.onerror=l=>{const c=ny(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}J(t,e){const i=[];return new B((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new hV(d),p=e(d.primaryKey,d.value,m);if(p instanceof B){const y=p.catch(T=>(m.done(),B.reject(T)));i.push(y)}m.isDone?a():m.W===null?d.continue():d.continue(m.W)}}).next(()=>B.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Z?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Na(r){return new B((t,e)=>{r.onsuccess=i=>{const a=i.target.result;t(a)},r.onerror=i=>{const a=ny(i.target.error);e(a)}})}let p0=!1;function ny(r){const t=Hr.M(ld());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p0||(p0=!0,setTimeout(()=>{throw i},0)),i}}return r}const Ec="IndexBackfiller";class dV{constructor(t,e){this.asyncQueue=t,this.te=e,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(t){rt(Ec,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.te.re();rt(Ec,`Documents written: ${e}`)}catch(e){Bs(e)?rt(Ec,"Ignoring IndexedDB error during index backfill: ",e):await Ls(e)}await this.ne(6e4)})}}class mV{constructor(t,e){this.localStore=t,this.persistence=e}async re(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.ie(e,t))}ie(t,e){const i=new Set;let a=e,l=!0;return B.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(c!==null&&!i.has(c))return rt(Ec,`Processing collection: ${c}`),this.se(t,c,a).next(d=>{a-=d,i.add(c)});l=!1})).next(()=>e-a)}se(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(a=>this.localStore.localDocuments.getNextDocuments(t,e,a,i).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.oe(a,l)).next(d=>(rt(Ec,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}oe(t,e){let i=t;return e.changes.forEach((a,l)=>{const c=nS(l);ey(c,i)>0&&(i=c)}),new Zn(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this._e(i),this.ae=i=>e.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Un.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=-1;function Xc(r){return r==null}function Nc(r){return r===0&&1/r==-1/0}function aS(r){return typeof r=="number"&&Number.isInteger(r)&&!Nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="";function yn(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=_0(t)),t=gV(r.get(e),t);return _0(t)}function gV(r,t){let e=t;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":e+="";break;case hd:e+="";break;default:e+=l}}return e}function _0(r){return r+hd+""}function Fr(r){const t=r.length;if(Tt(t>=2,64408,{path:r}),t===2)return Tt(r.charAt(0)===hd&&r.charAt(1)==="",56145,{path:r}),kt.emptyPath();const e=t-2,i=[];let a="";for(let l=0;l<t;){const c=r.indexOf(hd,l);switch((c<0||c>e)&&_t(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:_t(61167,{path:r})}l=c+2}return new kt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="remoteDocuments",Zc="owner",tl="owner",Oc="mutationQueues",pV="userId",Er="mutations",y0="batchId",La="userMutationsIndex",v0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,t){return[r,yn(t)]}function oS(r,t,e){return[r,yn(t),e]}const _V={},bl="documentMutations",fd="remoteDocumentsV14",yV=["prefixPath","collectionGroup","readTime","documentId"],Yf="documentKeyIndex",vV=["prefixPath","collectionGroup","documentId"],lS="collectionGroupIndex",EV=["collectionGroup","readTime","prefixPath","documentId"],Mc="remoteDocumentGlobal",i_="remoteDocumentGlobalKey",Al="targets",uS="queryTargetsIndex",TV=["canonicalId","targetId"],wl="targetDocuments",bV=["targetId","path"],ry="documentTargetsIndex",AV=["path","targetId"],dd="targetGlobalKey",qa="targetGlobal",Pc="collectionParents",wV=["collectionId","parent"],Sl="clientMetadata",SV="clientId",jd="bundles",RV="bundleId",zd="namedQueries",IV="name",iy="indexConfiguration",CV="indexId",s_="collectionGroupIndex",DV="collectionGroup",Tc="indexState",xV=["indexId","uid"],cS="sequenceNumberIndex",VV=["uid","sequenceNumber"],bc="indexEntries",NV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hS="documentKeyIndex",OV=["indexId","uid","orderedDocumentKey"],qd="documentOverlays",MV=["userId","collectionPath","documentId"],a_="collectionPathOverlayIndex",PV=["userId","collectionPath","largestBatchId"],fS="collectionGroupOverlayIndex",kV=["userId","collectionGroup","largestBatchId"],sy="globals",UV="name",dS=[Oc,Er,bl,Da,Al,Zc,qa,wl,Sl,Mc,Pc,jd,zd],LV=[...dS,qd],mS=[Oc,Er,bl,fd,Al,Zc,qa,wl,Sl,Mc,Pc,jd,zd,qd],gS=mS,ay=[...gS,iy,Tc,bc],BV=ay,pS=[...ay,sy],jV=pS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends iS{constructor(t,e){super(),this.ce=t,this.currentSequenceNumber=e}}function He(r,t){const e=gt(r);return Hr.N(e.ce,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function js(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function _S(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new de(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new de(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new kf(this.root,t,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new kf(this.root,t,this.comparator,!0)}}class kf{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new an(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return an.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,e,i,a,l){return this}insert(t,e,i){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.comparator=t,this.data=new de(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new T0(this.data.getIterator())}getIteratorFrom(t){return new T0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ne)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ne(this.comparator);return e.data=t,e}}class T0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.fields=t,t.sort(Ee.comparator)}static empty(){return new Ln([])}unionWith(t){let e=new ne(Ee.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Ln(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return El(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new yS("Invalid base64 string: "+l):l}}(t);return new Re(e)}static fromUint8Array(t){const e=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new Re(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return It(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Re.EMPTY_BYTE_STRING=new Re("");const qV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(r){if(Tt(!!r,39018),typeof r=="string"){let t=0;const e=qV.exec(r);if(Tt(!!e,46558,{timestamp:r}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?Re.fromBase64String(r):Re.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="server_timestamp",ES="__type__",TS="__previous_value__",bS="__local_write_time__";function Fd(r){var t,e;return((e=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[ES])===null||e===void 0?void 0:e.stringValue)===vS}function Gd(r){const t=r.mapValue.fields[TS];return Fd(t)?Gd(t):t}function kc(r){const t=Vi(r.mapValue.fields[bS].timestampValue);return new Wt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(t,e,i,a,l,c,d,m,p,y){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const md="(default)";class xs{constructor(t,e){this.projectId=t,this.database=e||md}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database===md}isEqual(t){return t instanceof xs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__type__",AS="__max__",Ts={mapValue:{fields:{__type__:{stringValue:AS}}}},ly="__vector__",Rl="value",Xf={nullValue:"NULL_VALUE"};function Vs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Fd(r)?4:wS(r)?9007199254740991:Hd(r)?10:11:_t(28295,{value:r})}function Yr(r,t){if(r===t)return!0;const e=Vs(r);if(e!==Vs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return kc(r).isEqual(kc(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Vi(a.timestampValue),d=Vi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(a,l){return Ni(a.bytesValue).isEqual(Ni(l.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(a,l){return ve(a.geoPointValue.latitude)===ve(l.geoPointValue.latitude)&&ve(a.geoPointValue.longitude)===ve(l.geoPointValue.longitude)}(r,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ve(a.integerValue)===ve(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ve(a.doubleValue),d=ve(l.doubleValue);return c===d?Nc(c)===Nc(d):isNaN(c)&&isNaN(d)}return!1}(r,t);case 9:return El(r.arrayValue.values||[],t.arrayValue.values||[],Yr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(E0(c)!==E0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Yr(c[m],d[m])))return!1;return!0}(r,t);default:return _t(52216,{left:r})}}function Uc(r,t){return(r.values||[]).find(e=>Yr(e,t))!==void 0}function Ns(r,t){if(r===t)return 0;const e=Vs(r),i=Vs(t);if(e!==i)return It(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return It(r.booleanValue,t.booleanValue);case 2:return function(l,c){const d=ve(l.integerValue||l.doubleValue),m=ve(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(r,t);case 3:return b0(r.timestampValue,t.timestampValue);case 4:return b0(kc(r),kc(t));case 5:return n_(r.stringValue,t.stringValue);case 6:return function(l,c){const d=Ni(l),m=Ni(c);return d.compareTo(m)}(r.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=It(d[p],m[p]);if(y!==0)return y}return It(d.length,m.length)}(r.referenceValue,t.referenceValue);case 8:return function(l,c){const d=It(ve(l.latitude),ve(c.latitude));return d!==0?d:It(ve(l.longitude),ve(c.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return A0(r.arrayValue,t.arrayValue);case 10:return function(l,c){var d,m,p,y;const T=l.fields||{},b=c.fields||{},D=(d=T[Rl])===null||d===void 0?void 0:d.arrayValue,j=(m=b[Rl])===null||m===void 0?void 0:m.arrayValue,Q=It(((p=D==null?void 0:D.values)===null||p===void 0?void 0:p.length)||0,((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0);return Q!==0?Q:A0(D,j)}(r.mapValue,t.mapValue);case 11:return function(l,c){if(l===Ts.mapValue&&c===Ts.mapValue)return 0;if(l===Ts.mapValue)return 1;if(c===Ts.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let T=0;T<m.length&&T<y.length;++T){const b=n_(m[T],y[T]);if(b!==0)return b;const D=Ns(d[m[T]],p[y[T]]);if(D!==0)return D}return It(m.length,y.length)}(r.mapValue,t.mapValue);default:throw _t(23264,{le:e})}}function b0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return It(r,t);const e=Vi(r),i=Vi(t),a=It(e.seconds,i.seconds);return a!==0?a:It(e.nanos,i.nanos)}function A0(r,t){const e=r.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=Ns(e[a],i[a]);if(l)return l}return It(e.length,i.length)}function Il(r){return l_(r)}function l_(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(e){const i=Vi(e);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(e){return Ni(e).toBase64()}(r.bytesValue):"referenceValue"in r?function(e){return ht.fromName(e).toString()}(r.referenceValue):"geoPointValue"in r?function(e){return`geo(${e.latitude},${e.longitude})`}(r.geoPointValue):"arrayValue"in r?function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=l_(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${l_(e.fields[c])}`;return a+"}"}(r.mapValue):_t(61005,{value:r})}function Zf(r){switch(Vs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gd(r);return t?16+Zf(t):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Zf(l),0)}(r.arrayValue);case 10:case 11:return function(i){let a=0;return js(i.fields,(l,c)=>{a+=l.length+Zf(c)}),a}(r.mapValue);default:throw _t(13486,{value:r})}}function Ha(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function u_(r){return!!r&&"integerValue"in r}function Lc(r){return!!r&&"arrayValue"in r}function w0(r){return!!r&&"nullValue"in r}function S0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wf(r){return!!r&&"mapValue"in r}function Hd(r){var t,e;return((e=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[oy])===null||e===void 0?void 0:e.stringValue)===ly}function Ac(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return js(r.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Ac(i)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ac(r.arrayValue.values[e]);return t}return Object.assign({},r)}function wS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===AS}const SS={mapValue:{fields:{[oy]:{stringValue:ly},[Rl]:{arrayValue:{}}}}};function GV(r){return"nullValue"in r?Xf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ha(xs.empty(),ht.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Hd(r)?SS:{mapValue:{}}:_t(35942,{value:r})}function HV(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ha(xs.empty(),ht.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?SS:"mapValue"in r?Hd(r)?{mapValue:{}}:Ts:_t(61959,{value:r})}function R0(r,t){const e=Ns(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function I0(r,t){const e=Ns(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Wf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ac(e)}setAll(t){let e=Ee.emptyPath(),i={},a=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const m=this.getFieldsMap(e);this.applyChanges(m,i,a),i={},a=[],e=d.popLast()}c?i[d.lastSegment()]=Ac(c):a.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());Wf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Yr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];Wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){js(e,(a,l)=>t[a]=l);for(const a of i)delete t[a]}clone(){return new on(Ac(this.value))}}function RS(r){const t=[];return js(r.fields,(e,i)=>{const a=new Ee([e]);if(Wf(i)){const l=RS(i.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Ln(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,e,i,a,l,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new me(t,0,bt.min(),bt.min(),bt.min(),on.empty(),0)}static newFoundDocument(t,e,i,a){return new me(t,1,e,bt.min(),i,a,0)}static newNoDocument(t,e){return new me(t,2,e,bt.min(),bt.min(),on.empty(),0)}static newUnknownDocument(t,e){return new me(t,3,e,bt.min(),bt.min(),on.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof me&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,e){this.position=t,this.inclusive=e}}function C0(r,t,e){let i=0;for(let a=0;a<r.position.length;a++){const l=t[a],c=r.position[a];if(l.field.isKeyField()?i=ht.comparator(ht.fromName(c.referenceValue),e.key):i=Ns(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function D0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!Yr(r.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,e="asc"){this.field=t,this.dir=e}}function KV(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{}class Lt extends IS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new QV(t,e,i):e==="array-contains"?new XV(t,i):e==="in"?new OS(t,i):e==="not-in"?new ZV(t,i):e==="array-contains-any"?new WV(t,i):new Lt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new $V(t,i):new YV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ns(e,this.value)):e!==null&&Vs(this.value)===Vs(e)&&this.matchesComparison(Ns(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ee extends IS{constructor(t,e){super(),this.filters=t,this.op=e,this.he=null}static create(t,e){return new ee(t,e)}matches(t){return Cl(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Cl(r){return r.op==="and"}function c_(r){return r.op==="or"}function uy(r){return CS(r)&&Cl(r)}function CS(r){for(const t of r.filters)if(t instanceof ee)return!1;return!0}function h_(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+Il(r.value);if(uy(r))return r.filters.map(t=>h_(t)).join(",");{const t=r.filters.map(e=>h_(e)).join(",");return`${r.op}(${t})`}}function DS(r,t){return r instanceof Lt?function(i,a){return a instanceof Lt&&i.op===a.op&&i.field.isEqual(a.field)&&Yr(i.value,a.value)}(r,t):r instanceof ee?function(i,a){return a instanceof ee&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&DS(c,a.filters[d]),!0):!1}(r,t):void _t(19439)}function xS(r,t){const e=r.filters.concat(t);return ee.create(e,r.op)}function VS(r){return r instanceof Lt?function(e){return`${e.field.canonicalString()} ${e.op} ${Il(e.value)}`}(r):r instanceof ee?function(e){return e.op.toString()+" {"+e.getFilters().map(VS).join(" ,")+"}"}(r):"Filter"}class QV extends Lt{constructor(t,e,i){super(t,e,i),this.key=ht.fromName(i.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class $V extends Lt{constructor(t,e){super(t,"in",e),this.keys=NS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class YV extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=NS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function NS(r,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>ht.fromName(i.referenceValue))}class XV extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Lc(e)&&Uc(e.arrayValue,this.value)}}class OS extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Uc(this.value.arrayValue,e)}}class ZV extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Uc(this.value.arrayValue,e)}}class WV extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Lc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Uc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(t,e=null,i=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function f_(r,t=null,e=[],i=[],a=null,l=null,c=null){return new JV(r,t,e,i,a,l,c)}function Ka(r){const t=gt(r);if(t.Pe===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>h_(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Xc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Il(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Il(i)).join(",")),t.Pe=e}return t.Pe}function Wc(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!KV(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!DS(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!D0(r.startAt,t.startAt)&&D0(r.endAt,t.endAt)}function gd(r){return ht.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function pd(r,t){return r.filters.filter(e=>e instanceof Lt&&e.field.isEqual(t))}function x0(r,t,e){let i=Xf,a=!0;for(const l of pd(r,t)){let c=Xf,d=!0;switch(l.op){case"<":case"<=":c=GV(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Xf}R0({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];R0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}function V0(r,t,e){let i=Ts,a=!0;for(const l of pd(r,t)){let c=Ts,d=!0;switch(l.op){case">=":case">":c=HV(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Ts}I0({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(e!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(t)){const c=e.position[l];I0({value:i,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t,e=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function MS(r,t,e,i,a,l,c,d){return new Mi(r,t,e,i,a,l,c,d)}function ql(r){return new Mi(r)}function N0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cy(r){return r.collectionGroup!==null}function ml(r){const t=gt(r);if(t.Te===null){t.Te=[];const e=new Set;for(const l of t.explicitOrderBy)t.Te.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ne(Ee.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.Te.push(new Bc(l,i))}),e.has(Ee.keyField().canonicalString())||t.Te.push(new Bc(Ee.keyField(),i))}return t.Te}function Dn(r){const t=gt(r);return t.Ie||(t.Ie=tN(t,ml(r))),t.Ie}function tN(r,t){if(r.limitType==="F")return f_(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Bc(a.field,l)});const e=r.endAt?new Os(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Os(r.startAt.position,r.startAt.inclusive):null;return f_(r.path,r.collectionGroup,t,r.filters,r.limit,e,i)}}function d_(r,t){const e=r.filters.concat([t]);return new Mi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function _d(r,t,e){return new Mi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function Jc(r,t){return Wc(Dn(r),Dn(t))&&r.limitType===t.limitType}function PS(r){return`${Ka(Dn(r))}|lt:${r.limitType}`}function ll(r){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>VS(a)).join(", ")}]`),Xc(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Il(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Il(a)).join(",")),`Target(${i})`}(Dn(r))}; limitType=${r.limitType})`}function th(r,t){return t.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ht.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,t)&&function(i,a){for(const l of ml(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,t)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(r,t)&&function(i,a){return!(i.startAt&&!function(c,d,m){const p=C0(c,d,m);return c.inclusive?p<=0:p<0}(i.startAt,ml(i),a)||i.endAt&&!function(c,d,m){const p=C0(c,d,m);return c.inclusive?p>=0:p>0}(i.endAt,ml(i),a))}(r,t)}function kS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function US(r){return(t,e)=>{let i=!1;for(const a of ml(r)){const l=eN(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function eN(r,t,e){const i=r.field.isKeyField()?ht.comparator(t.key,e.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Ns(m,p):_t(42886)}(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return _t(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){js(this.inner,(e,i)=>{for(const[a,l]of i)t(a,l)})}isEmpty(){return _S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=new de(ht.comparator);function Bn(){return nN}const LS=new de(ht.comparator);function mc(...r){let t=LS;for(const e of r)t=t.insert(e.key,e);return t}function BS(r){let t=LS;return r.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Gr(){return wc()}function jS(){return wc()}function wc(){return new Pi(r=>r.toString(),(r,t)=>r.isEqual(t))}const rN=new de(ht.comparator),iN=new ne(ht.comparator);function Dt(...r){let t=iN;for(const e of r)t=t.add(e);return t}const sN=new ne(It);function hy(){return sN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(t)?"-0":t}}function zS(r){return{integerValue:""+r}}function qS(r,t){return aS(t)?zS(t):fy(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function aN(r,t,e){return r instanceof Dl?function(a,l){const c={fields:{[ES]:{stringValue:vS},[bS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Fd(l)&&(l=Gd(l)),l&&(c.fields[TS]=l),{mapValue:c}}(e,t):r instanceof Qa?GS(r,t):r instanceof $a?HS(r,t):function(a,l){const c=FS(a,l),d=O0(c)+O0(a.Ee);return u_(c)&&u_(a.Ee)?zS(d):fy(a.serializer,d)}(r,t)}function oN(r,t,e){return r instanceof Qa?GS(r,t):r instanceof $a?HS(r,t):e}function FS(r,t){return r instanceof xl?function(i){return u_(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class Dl extends Kd{}class Qa extends Kd{constructor(t){super(),this.elements=t}}function GS(r,t){const e=KS(t);for(const i of r.elements)e.some(a=>Yr(a,i))||e.push(i);return{arrayValue:{values:e}}}class $a extends Kd{constructor(t){super(),this.elements=t}}function HS(r,t){let e=KS(t);for(const i of r.elements)e=e.filter(a=>!Yr(a,i));return{arrayValue:{values:e}}}class xl extends Kd{constructor(t,e){super(),this.serializer=t,this.Ee=e}}function O0(r){return ve(r.integerValue||r.doubleValue)}function KS(r){return Lc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,e){this.field=t,this.transform=e}}function lN(r,t){return r.field.isEqual(t.field)&&function(i,a){return i instanceof Qa&&a instanceof Qa||i instanceof $a&&a instanceof $a?El(i.elements,a.elements,Yr):i instanceof xl&&a instanceof xl?Yr(i.Ee,a.Ee):i instanceof Dl&&a instanceof Dl}(r.transform,t.transform)}class uN{constructor(t,e){this.version=t,this.transformResults=e}}class Te{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Te}static exists(t){return new Te(void 0,t)}static updateTime(t){return new Te(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jf(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Qd{}function QS(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Gl(r.key,Te.none()):new Fl(r.key,r.data,Te.none());{const e=r.data,i=on.empty();let a=new ne(Ee.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ki(r.key,i,new Ln(a.toArray()),Te.none())}}function cN(r,t,e){r instanceof Fl?function(a,l,c){const d=a.value.clone(),m=P0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(r,t,e):r instanceof ki?function(a,l,c){if(!Jf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=P0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll($S(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(r,t,e):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Sc(r,t,e,i){return r instanceof Fl?function(l,c,d,m){if(!Jf(l.precondition,c))return d;const p=l.value.clone(),y=k0(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(r,t,e,i):r instanceof ki?function(l,c,d,m){if(!Jf(l.precondition,c))return d;const p=k0(l.fieldTransforms,m,c),y=c.data;return y.setAll($S(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,t,e,i):function(l,c,d){return Jf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(r,t,e)}function hN(r,t){let e=null;for(const i of r.fieldTransforms){const a=t.data.field(i.field),l=FS(i.transform,a||null);l!=null&&(e===null&&(e=on.empty()),e.set(i.field,l))}return e||null}function M0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&El(i,a,(l,c)=>lN(l,c))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Fl extends Qd{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ki extends Qd{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $S(r){const t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}}),t}function P0(r,t,e){const i=new Map;Tt(r.length===e.length,32656,{Ae:e.length,Re:r.length});for(let a=0;a<e.length;a++){const l=r[a],c=l.transform,d=t.data.field(l.field);i.set(l.field,oN(c,d,e[a]))}return i}function k0(r,t,e){const i=new Map;for(const a of r){const l=a.transform,c=e.data.field(a.field);i.set(a.field,aN(l,c,t))}return i}class Gl extends Qd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dy extends Qd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&cN(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Sc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Sc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=jS();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(a.key)?null:d;const m=QS(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Dt())}isEqual(t){return this.batchId===t.batchId&&El(this.mutations,t.mutations,(e,i)=>M0(e,i))&&El(this.baseMutations,t.baseMutations,(e,i)=>M0(e,i))}}class gy{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){Tt(t.mutations.length===i.length,58842,{Ve:t.mutations.length,me:i.length});let a=function(){return rN}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new gy(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,Gt;function YS(r){switch(r){case K.OK:return _t(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return _t(15467,{code:r})}}function XS(r){if(r===void 0)return xe("GRPC error has no .code"),K.UNKNOWN;switch(r){case Le.OK:return K.OK;case Le.CANCELLED:return K.CANCELLED;case Le.UNKNOWN:return K.UNKNOWN;case Le.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Le.INTERNAL:return K.INTERNAL;case Le.UNAVAILABLE:return K.UNAVAILABLE;case Le.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Le.NOT_FOUND:return K.NOT_FOUND;case Le.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Le.ABORTED:return K.ABORTED;case Le.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Le.DATA_LOSS:return K.DATA_LOSS;default:return _t(39323,{code:r})}}(Gt=Le||(Le={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new ws([4294967295,4294967295],0);function U0(r){const t=W_().encode(r),e=new Fw;return e.update(t),new Uint8Array(e.digest())}function L0(r){const t=new DataView(r.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new ws([e,i],0),new ws([a,l],0)]}class _y{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new gc(`Invalid padding: ${e}`);if(i<0)throw new gc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new gc(`Invalid padding when bitmap length is 0: ${e}`);this.fe=8*t.length-e,this.ge=ws.fromNumber(this.fe)}pe(t,e,i){let a=t.add(e.multiply(ws.fromNumber(i)));return a.compare(dN)===1&&(a=new ws([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const e=U0(t),[i,a]=L0(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);if(!this.ye(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new _y(l,a,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(this.fe===0)return;const e=U0(t),[i,a]=L0(e);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);this.we(c)}}we(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,rh.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new nh(bt.min(),a,new de(It),Bn(),Dt())}}class rh{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new rh(i,e,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e,i,a){this.Se=t,this.removedTargetIds=e,this.key=i,this.be=a}}class ZS{constructor(t,e){this.targetId=t,this.De=e}}class WS{constructor(t,e,i=Re.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class B0{constructor(){this.ve=0,this.Ce=j0(),this.Fe=Re.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Dt(),e=Dt(),i=Dt();return this.Ce.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:_t(38017,{changeType:l})}}),new rh(this.Fe,this.Me,t,e,i)}ke(){this.xe=!1,this.Ce=j0()}qe(t,e){this.xe=!0,this.Ce=this.Ce.insert(t,e)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class mN{constructor(t){this.We=t,this.Ge=new Map,this.ze=Bn(),this.je=Uf(),this.Je=Uf(),this.He=new de(It)}Ye(t){for(const e of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(e,t.be):this.Xe(e,t.key,t.be);for(const e of t.removedTargetIds)this.Xe(e,t.key,t.be)}et(t){this.forEachTarget(t,e=>{const i=this.tt(e);switch(t.state){case 0:this.nt(e)&&i.Be(t.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(t.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(e);break;case 3:this.nt(e)&&(i.Ke(),i.Be(t.resumeToken));break;case 4:this.nt(e)&&(this.rt(e),i.Be(t.resumeToken));break;default:_t(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ge.forEach((i,a)=>{this.nt(a)&&e(a)})}it(t){const e=t.targetId,i=t.De.count,a=this.st(e);if(a){const l=a.target;if(gd(l))if(i===0){const c=new ht(l.path);this.Xe(e,c,me.newNoDocument(c,bt.min()))}else Tt(i===1,20013,{expectedCount:i});else{const c=this.ot(e);if(c!==i){const d=this._t(t),m=d?this.ut(d,t,c):1;if(m!==0){this.rt(e);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(e,p)}}}}}_t(t){const e=t.De.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let c,d;try{c=Ni(i).toUint8Array()}catch(m){if(m instanceof yS)return Xn("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new _y(c,a,l)}catch(m){return Xn(m instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(t,e,i){return e.De.count===i-this.ht(t,e.targetId)?0:2}ht(t,e){const i=this.We.getRemoteKeysForTarget(e);let a=0;return i.forEach(l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.Xe(e,l,null),a++)}),a}Pt(t){const e=new Map;this.Ge.forEach((l,c)=>{const d=this.st(c);if(d){if(l.current&&gd(d.target)){const m=new ht(d.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,me.newNoDocument(m,t))}l.Ne&&(e.set(c,l.Le()),l.ke())}});let i=Dt();this.Je.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.st(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(t));const a=new nh(t,e,this.He,this.ze,i);return this.ze=Bn(),this.je=Uf(),this.Je=Uf(),this.He=new de(It),a}Ze(t,e){if(!this.nt(t))return;const i=this.It(t,e.key)?2:0;this.tt(t).qe(e.key,i),this.ze=this.ze.insert(e.key,e),this.je=this.je.insert(e.key,this.Tt(e.key).add(t)),this.Je=this.Je.insert(e.key,this.dt(e.key).add(t))}Xe(t,e,i){if(!this.nt(t))return;const a=this.tt(t);this.It(t,e)?a.qe(e,1):a.Qe(e),this.Je=this.Je.insert(e,this.dt(e).delete(t)),this.Je=this.Je.insert(e,this.dt(e).add(t)),i&&(this.ze=this.ze.insert(e,i))}removeTarget(t){this.Ge.delete(t)}ot(t){const e=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let e=this.Ge.get(t);return e||(e=new B0,this.Ge.set(t,e)),e}dt(t){let e=this.Je.get(t);return e||(e=new ne(It),this.Je=this.Je.insert(t,e)),e}Tt(t){let e=this.je.get(t);return e||(e=new ne(It),this.je=this.je.insert(t,e)),e}nt(t){const e=this.st(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}st(t){const e=this.Ge.get(t);return e&&e.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new B0),this.We.getRemoteKeysForTarget(t).forEach(e=>{this.Xe(t,e,null)})}It(t,e){return this.We.getRemoteKeysForTarget(t).has(e)}}function Uf(){return new de(ht.comparator)}function j0(){return new de(ht.comparator)}const gN={asc:"ASCENDING",desc:"DESCENDING"},pN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_N={and:"AND",or:"OR"};class yN{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function m_(r,t){return r.useProto3Json||Xc(t)?t:{value:t}}function Vl(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function JS(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function vN(r,t){return Vl(r,t.toTimestamp())}function Ve(r){return Tt(!!r,49232),bt.fromTimestamp(function(e){const i=Vi(e);return new Wt(i.seconds,i.nanos)}(r))}function yy(r,t){return g_(r,t).canonicalString()}function g_(r,t){const e=function(a){return new kt(["projects",a.projectId,"databases",a.database])}(r).child("documents");return t===void 0?e:e.child(t)}function tR(r){const t=kt.fromString(r);return Tt(cR(t),10190,{key:t.toString()}),t}function jc(r,t){return yy(r.databaseId,t.path)}function Kr(r,t){const e=tR(t);if(e.get(1)!==r.databaseId.projectId)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new ht(rR(e))}function eR(r,t){return yy(r.databaseId,t)}function nR(r){const t=tR(r);return t.length===4?kt.emptyPath():rR(t)}function p_(r){return new kt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function rR(r){return Tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function z0(r,t,e){return{name:jc(r,t),fields:e.value.mapValue.fields}}function iR(r,t,e){const i=Kr(r,t.name),a=Ve(t.updateTime),l=t.createTime?Ve(t.createTime):bt.min(),c=new on({mapValue:{fields:t.fields}}),d=me.newFoundDocument(i,a,l,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function EN(r,t){return"found"in t?function(i,a){Tt(!!a.found,43571),a.found.name,a.found.updateTime;const l=Kr(i,a.found.name),c=Ve(a.found.updateTime),d=a.found.createTime?Ve(a.found.createTime):bt.min(),m=new on({mapValue:{fields:a.found.fields}});return me.newFoundDocument(l,c,d,m)}(r,t):"missing"in t?function(i,a){Tt(!!a.missing,3894),Tt(!!a.readTime,22933);const l=Kr(i,a.missing),c=Ve(a.readTime);return me.newNoDocument(l,c)}(r,t):_t(7234,{result:t})}function TN(r,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_t(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(Tt(y===void 0||typeof y=="string",58123),Re.fromBase64String(y||"")):(Tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Re.fromUint8Array(y||new Uint8Array))}(r,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const y=p.code===void 0?K.UNKNOWN:XS(p.code);return new nt(y,p.message||"")}(c);e=new WS(i,a,l,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Kr(r,i.document.name),l=Ve(i.document.updateTime),c=i.document.createTime?Ve(i.document.createTime):bt.min(),d=new on({mapValue:{fields:i.document.fields}}),m=me.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];e=new td(p,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Kr(r,i.document),l=i.readTime?Ve(i.readTime):bt.min(),c=me.newNoDocument(a,l),d=i.removedTargetIds||[];e=new td([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Kr(r,i.document),l=i.removedTargetIds||[];e=new td([],l,a,null)}else{if(!("filter"in t))return _t(11601,{At:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new fN(a,l),d=i.targetId;e=new ZS(d,c)}}return e}function zc(r,t){let e;if(t instanceof Fl)e={update:z0(r,t.key,t.value)};else if(t instanceof Gl)e={delete:jc(r,t.key)};else if(t instanceof ki)e={update:z0(r,t.key,t.data),updateMask:IN(t.fieldMask)};else{if(!(t instanceof dy))return _t(16599,{Rt:t.type});e={verify:jc(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof Dl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Qa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof $a)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xl)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw _t(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:vN(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_t(27497)}(r,t.precondition)),e}function __(r,t){const e=t.currentDocument?function(l){return l.updateTime!==void 0?Te.updateTime(Ve(l.updateTime)):l.exists!==void 0?Te.exists(l.exists):Te.none()}(t.currentDocument):Te.none(),i=t.updateTransforms?t.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)Tt(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Dl;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];m=new Qa(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];m=new $a(y)}else"increment"in d?m=new xl(c,d.increment):_t(16584,{proto:d});const p=Ee.fromServerFormat(d.fieldPath);return new eh(p,m)}(r,a)):[];if(t.update){t.update.name;const a=Kr(r,t.update.name),l=new on({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Ln(p.map(y=>Ee.fromServerFormat(y)))}(t.updateMask);return new ki(a,l,c,e,i)}return new Fl(a,l,e,i)}if(t.delete){const a=Kr(r,t.delete);return new Gl(a,e)}if(t.verify){const a=Kr(r,t.verify);return new dy(a,e)}return _t(1463,{proto:t})}function bN(r,t){return r&&r.length>0?(Tt(t!==void 0,14353),r.map(e=>function(a,l){let c=a.updateTime?Ve(a.updateTime):Ve(l);return c.isEqual(bt.min())&&(c=Ve(l)),new uN(c,a.transformResults||[])}(e,t))):[]}function sR(r,t){return{documents:[eR(r,t.path)]}}function aR(r,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=eR(r,a);const l=function(p){if(p.length!==0)return uR(ee.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:ul(b.field),direction:wN(b.dir)}}(y))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=m_(r,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{Vt:e,parent:a}}function oR(r){let t=nR(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){Tt(i===1,65062);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];e.where&&(l=function(T){const b=lR(T);return b instanceof ee&&uy(b)?b.getFilters():[b]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(b=>function(j){return new Bc(cl(j.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(b))}(e.orderBy));let d=null;e.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,Xc(b)?null:b}(e.limit));let m=null;e.startAt&&(m=function(T){const b=!!T.before,D=T.values||[];return new Os(D,b)}(e.startAt));let p=null;return e.endAt&&(p=function(T){const b=!T.before,D=T.values||[];return new Os(D,b)}(e.endAt)),MS(t,a,c,l,d,"F",m,p)}function AN(r,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:a})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function lR(r){return r.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=cl(e.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=cl(e.unaryFilter.field);return Lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cl(e.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=cl(e.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(r):r.fieldFilter!==void 0?function(e){return Lt.create(cl(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(e){return ee.create(e.compositeFilter.filters.map(i=>lR(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(e.compositeFilter.op))}(r):_t(30097,{filter:r})}function wN(r){return gN[r]}function SN(r){return pN[r]}function RN(r){return _N[r]}function ul(r){return{fieldPath:r.canonicalString()}}function cl(r){return Ee.fromServerFormat(r.fieldPath)}function uR(r){return r instanceof Lt?function(e){if(e.op==="=="){if(S0(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NAN"}};if(w0(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(S0(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NOT_NAN"}};if(w0(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(e.field),op:SN(e.op),value:e.value}}}(r):r instanceof ee?function(e){const i=e.getFilters().map(a=>uR(a));return i.length===1?i[0]:{compositeFilter:{op:RN(e.op),filters:i}}}(r):_t(54877,{filter:r})}function IN(r){const t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function cR(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,e,i,a,l=bt.min(),c=bt.min(),d=Re.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new Si(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t){this.gt=t}}function CN(r,t){let e;if(t.document)e=iR(r.gt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ht.fromSegments(t.noDocument.path),a=Xa(t.noDocument.readTime);e=me.newNoDocument(i,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t(56709);{const i=ht.fromSegments(t.unknownDocument.path),a=Xa(t.unknownDocument.version);e=me.newUnknownDocument(i,a)}}return t.readTime&&e.setReadTime(function(a){const l=new Wt(a[0],a[1]);return bt.fromTimestamp(l)}(t.readTime)),e}function q0(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:yd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(l,c){return{name:jc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Vl(l,c.version.toTimestamp()),createTime:Vl(l,c.createTime.toTimestamp())}}(r.gt,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Ya(t.version)};else{if(!t.isUnknownDocument())return _t(57904,{document:t});i.unknownDocument={path:e.path.toArray(),version:Ya(t.version)}}return i}function yd(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function Ya(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xa(r){const t=new Wt(r.seconds,r.nanoseconds);return bt.fromTimestamp(t)}function Oa(r,t){const e=(t.baseMutations||[]).map(l=>__(r.gt,l));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const d=t.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const i=t.mutations.map(l=>__(r.gt,l)),a=Wt.fromMillis(t.localWriteTimeMs);return new my(t.batchId,a,e,i)}function pc(r){const t=Xa(r.readTime),e=r.lastLimboFreeSnapshotVersion!==void 0?Xa(r.lastLimboFreeSnapshotVersion):bt.min();let i;return i=function(l){return l.documents!==void 0}(r.query)?function(l){const c=l.documents.length;return Tt(c===1,1966,{count:c}),Dn(ql(nR(l.documents[0])))}(r.query):function(l){return Dn(oR(l))}(r.query),new Si(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,t,e,Re.fromBase64String(r.resumeToken))}function fR(r,t){const e=Ya(t.snapshotVersion),i=Ya(t.lastLimboFreeSnapshotVersion);let a;a=gd(t.target)?sR(r.gt,t.target):aR(r.gt,t.target).Vt;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ka(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function vy(r){const t=oR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_d(t,t.limit,"L"):t}function Np(r,t){return new py(t.largestBatchId,__(r.gt,t.overlayMutation))}function F0(r,t){const e=t.path.lastSegment();return[r,yn(t.path.popLast()),e]}function G0(r,t,e,i){return{indexId:r,uid:t,sequenceNumber:e,readTime:Ya(i.readTime),documentKey:yn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{getBundleMetadata(t,e){return H0(t).get(e).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:Xa(l.createTime),version:l.version}}(i)})}saveBundleMetadata(t,e){return H0(t).put(function(a){return{bundleId:a.id,createTime:Ya(Ve(a.createTime)),version:a.version}}(e))}getNamedQuery(t,e){return K0(t).get(e).next(i=>{if(i)return function(l){return{name:l.name,query:vy(l.bundledQuery),readTime:Xa(l.readTime)}}(i)})}saveNamedQuery(t,e){return K0(t).put(function(a){return{name:a.name,readTime:Ya(Ve(a.readTime)),bundledQuery:a.bundledQuery}}(e))}}function H0(r){return He(r,jd)}function K0(r){return He(r,zd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(t,e){this.serializer=t,this.userId=e}static yt(t,e){const i=e.uid||"";return new $d(t,i)}getOverlay(t,e){return ac(t).get(F0(this.userId,e)).next(i=>i?Np(this.serializer,i):null)}getOverlays(t,e){const i=Gr();return B.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){const a=[];return i.forEach((l,c)=>{const d=new py(e,c);a.push(this.wt(t,d))}),B.waitFor(a)}removeOverlaysForBatchId(t,e,i){const a=new Set;e.forEach(c=>a.add(yn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(ac(t).Y(a_,d))}),B.waitFor(l)}getOverlaysForCollection(t,e,i){const a=Gr(),l=yn(e),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ac(t).j(a_,c).next(d=>{for(const m of d){const p=Np(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(t,e,i,a){const l=Gr();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ac(t).X({index:fS,range:d},(m,p,y)=>{const T=Np(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):y.done()}).next(()=>l)}wt(t,e){return ac(t).put(function(a,l,c){const[d,m,p]=F0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:zc(a.gt,c.mutation)}}(this.serializer,this.userId,e))}}function ac(r){return He(r,qd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{St(t){return He(t,sy)}getSessionToken(t){return this.St(t).get("sessionToken").next(e=>{const i=e==null?void 0:e.value;return i?Re.fromUint8Array(i):Re.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.St(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){}bt(t,e){this.Dt(t,e),e.vt()}Dt(t,e){if("nullValue"in t)this.Ct(e,5);else if("booleanValue"in t)this.Ct(e,10),e.Ft(t.booleanValue?1:0);else if("integerValue"in t)this.Ct(e,15),e.Ft(ve(t.integerValue));else if("doubleValue"in t){const i=ve(t.doubleValue);isNaN(i)?this.Ct(e,13):(this.Ct(e,15),Nc(i)?e.Ft(0):e.Ft(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ct(e,20),typeof i=="string"&&(i=Vi(i)),e.Mt(`${i.seconds||""}`),e.Ft(i.nanos||0)}else if("stringValue"in t)this.xt(t.stringValue,e),this.Ot(e);else if("bytesValue"in t)this.Ct(e,30),e.Nt(Ni(t.bytesValue)),this.Ot(e);else if("referenceValue"in t)this.Bt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.Ct(e,45),e.Ft(i.latitude||0),e.Ft(i.longitude||0)}else"mapValue"in t?wS(t)?this.Ct(e,Number.MAX_SAFE_INTEGER):Hd(t)?this.Lt(t.mapValue,e):(this.kt(t.mapValue,e),this.Ot(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Ot(e)):_t(19022,{Qt:t})}xt(t,e){this.Ct(e,25),this.$t(t,e)}$t(t,e){e.Mt(t)}kt(t,e){const i=t.fields||{};this.Ct(e,55);for(const a of Object.keys(i))this.xt(a,e),this.Dt(i[a],e)}Lt(t,e){var i,a;const l=t.fields||{};this.Ct(e,53);const c=Rl,d=((a=(i=l[c].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.Ct(e,15),e.Ft(ve(d)),this.xt(c,e),this.Dt(l[c],e)}qt(t,e){const i=t.values||[];this.Ct(e,50);for(const a of i)this.Dt(a,e)}Bt(t,e){this.Ct(e,37),ht.fromName(t).path.forEach(i=>{this.Ct(e,60),this.$t(i,e)})}Ct(t,e){t.Ft(e)}Ot(t){t.Ft(2)}}Ma.Ut=new Ma;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=255;function VN(r){if(r===0)return 8;let t=0;return r>>4||(t+=4,r<<=4),r>>6||(t+=2,r<<=2),r>>7||(t+=1),t}function Q0(r){const t=64-function(i){let a=0;for(let l=0;l<8;++l){const c=VN(255&i[l]);if(a+=c,c!==8)break}return a}(r);return Math.ceil(t/8)}class NN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Wt(i.value),i=e.next();this.Gt()}zt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.jt(i.value),i=e.next();this.Jt()}Ht(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Wt(i);else if(i<2048)this.Wt(960|i>>>6),this.Wt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Wt(480|i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i);else{const a=e.codePointAt(0);this.Wt(240|a>>>18),this.Wt(128|63&a>>>12),this.Wt(128|63&a>>>6),this.Wt(128|63&a)}}this.Gt()}Yt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.jt(i);else if(i<2048)this.jt(960|i>>>6),this.jt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.jt(480|i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i);else{const a=e.codePointAt(0);this.jt(240|a>>>18),this.jt(128|63&a>>>12),this.jt(128|63&a>>>6),this.jt(128|63&a)}}this.Jt()}Zt(t){const e=this.Xt(t),i=Q0(e);this.en(1+i),this.buffer[this.position++]=255&i;for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=255&e[a]}tn(t){const e=this.Xt(t),i=Q0(e);this.en(1+i),this.buffer[this.position++]=~(255&i);for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}nn(){this.rn(nl),this.rn(255)}sn(){this._n(nl),this._n(255)}reset(){this.position=0}seed(t){this.en(t.length),this.buffer.set(t,this.position),this.position+=t.length}an(){return this.buffer.slice(0,this.position)}Xt(t){const e=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(t),i=!!(128&e[0]);e[0]^=i?255:128;for(let a=1;a<e.length;++a)e[a]^=i?255:0;return e}Wt(t){const e=255&t;e===0?(this.rn(0),this.rn(255)):e===nl?(this.rn(nl),this.rn(0)):this.rn(e)}jt(t){const e=255&t;e===0?(this._n(0),this._n(255)):e===nl?(this._n(nl),this._n(0)):this._n(t)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(t){this.en(1),this.buffer[this.position++]=t}_n(t){this.en(1),this.buffer[this.position++]=~t}en(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class ON{constructor(t){this.un=t}Nt(t){this.un.Kt(t)}Mt(t){this.un.Ht(t)}Ft(t){this.un.Zt(t)}vt(){this.un.nn()}}class MN{constructor(t){this.un=t}Nt(t){this.un.zt(t)}Mt(t){this.un.Yt(t)}Ft(t){this.un.tn(t)}vt(){this.un.sn()}}class oc{constructor(){this.un=new NN,this.cn=new ON(this.un),this.ln=new MN(this.un)}seed(t){this.un.seed(t)}hn(t){return t===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,e,i,a){this.Pn=t,this.Tn=e,this.In=i,this.dn=a}En(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.dn,0),e!==t?i.set([0],this.dn.length):++i[i.length-1],new Pa(this.Pn,this.Tn,this.In,i)}An(t,e,i){return{indexId:this.Pn,uid:t,arrayValue:ed(this.In),directionalValue:ed(this.dn),orderedDocumentKey:ed(e),documentKey:i.path.toArray()}}Rn(t,e,i){const a=this.An(t,e,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ps(r,t){let e=r.Pn-t.Pn;return e!==0?e:(e=$0(r.In,t.In),e!==0?e:(e=$0(r.dn,t.dn),e!==0?e:ht.comparator(r.Tn,t.Tn)))}function $0(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(i!==0)return i}return r.length-t.length}function ed(r){return Dw()?function(e){let i="";for(let a=0;a<e.length;a++)i+=String.fromCharCode(e[a]);return i}(r):r}function Y0(r){return typeof r!="string"?r:function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(r)}class X0{constructor(t){this.Vn=new ne((e,i)=>Ee.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.mn=t.orderBy,this.fn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Vn=this.Vn.add(i):this.fn.push(i)}}get gn(){return this.Vn.size>1}pn(t){if(Tt(t.collectionGroup===this.collectionId,49279),this.gn)return!1;const e=r_(t);if(e!==void 0&&!this.yn(e))return!1;const i=Ca(t);let a=new Set,l=0,c=0;for(;l<i.length&&this.yn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.wn(d,m)||!this.Sn(this.mn[c++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.mn.length||!this.Sn(this.mn[c++],d))return!1}return!0}bn(){if(this.gn)return null;let t=new ne(Ee.comparator);const e=[];for(const i of this.fn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new Qf(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new Qf(i.field,0))}for(const i of this.mn)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new Qf(i.field,i.dir==="asc"?0:1)));return new cd(cd.UNKNOWN_ID,this.collectionId,e,Vc.empty())}yn(t){for(const e of this.fn)if(this.wn(e,t))return!0;return!1}wn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}Sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(r){var t,e;if(Tt(r instanceof Lt||r instanceof ee,20012),r instanceof Lt){if(r instanceof OS){const a=((e=(t=r.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(l=>Lt.create(r.field,"==",l)))||[];return ee.create(a,"or")}return r}const i=r.filters.map(a=>dR(a));return ee.create(i,r.op)}function PN(r){if(r.getFilters().length===0)return[];const t=E_(dR(r));return Tt(mR(t),7391),y_(t)||v_(t)?[t]:t.getFilters()}function y_(r){return r instanceof Lt}function v_(r){return r instanceof ee&&uy(r)}function mR(r){return y_(r)||v_(r)||function(e){if(e instanceof ee&&c_(e)){for(const i of e.getFilters())if(!y_(i)&&!v_(i))return!1;return!0}return!1}(r)}function E_(r){if(Tt(r instanceof Lt||r instanceof ee,34018),r instanceof Lt)return r;if(r.filters.length===1)return E_(r.filters[0]);const t=r.filters.map(i=>E_(i));let e=ee.create(t,r.op);return e=vd(e),mR(e)?e:(Tt(e instanceof ee,64498),Tt(Cl(e),40251),Tt(e.filters.length>1,57927),e.filters.reduce((i,a)=>Ey(i,a)))}function Ey(r,t){let e;return Tt(r instanceof Lt||r instanceof ee,38388),Tt(t instanceof Lt||t instanceof ee,25473),e=r instanceof Lt?t instanceof Lt?function(a,l){return ee.create([a,l],"and")}(r,t):Z0(r,t):t instanceof Lt?Z0(t,r):function(a,l){if(Tt(a.filters.length>0&&l.filters.length>0,48005),Cl(a)&&Cl(l))return xS(a,l.getFilters());const c=c_(a)?a:l,d=c_(a)?l:a,m=c.filters.map(p=>Ey(p,d));return ee.create(m,"or")}(r,t),vd(e)}function Z0(r,t){if(Cl(t))return xS(t,r.getFilters());{const e=t.filters.map(i=>Ey(r,i));return ee.create(e,"or")}}function vd(r){if(Tt(r instanceof Lt||r instanceof ee,11850),r instanceof Lt)return r;const t=r.getFilters();if(t.length===1)return vd(t[0]);if(CS(r))return r;const e=t.map(a=>vd(a)),i=[];return e.forEach(a=>{a instanceof Lt?i.push(a):a instanceof ee&&(a.op===r.op?i.push(...a.filters):i.push(a))}),i.length===1?i[0]:ee.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.Dn=new Ty}addToCollectionParentIndex(t,e){return this.Dn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Dn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Zn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Zn.min())}updateCollectionGroup(t,e,i){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class Ty{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new ne(kt.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new ne(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="IndexedDbIndexManager",Lf=new Uint8Array(0);class UN{constructor(t,e){this.databaseId=e,this.vn=new Ty,this.Cn=new Pi(i=>Ka(i),(i,a)=>Wc(i,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const i=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.vn.add(e)});const l={collectionId:i,parent:yn(a)};return J0(t).put(l)}return B.resolve()}getCollectionParents(t,e){const i=[],a=IDBKeyRange.bound([e,""],[Zw(e),""],!1,!0);return J0(t).j(a).next(l=>{for(const c of l){if(c.collectionId!==e)break;i.push(Fr(c.parent))}return i})}addFieldIndex(t,e){const i=lc(t),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(e);delete a.indexId;const l=i.add(a);if(e.indexState){const c=il(t);return l.next(d=>{c.put(G0(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const i=lc(t),a=il(t),l=rl(t);return i.delete(e.indexId).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=lc(t),i=rl(t),a=il(t);return e.Y().next(()=>i.Y()).next(()=>a.Y())}createTargetIndexes(t,e){return B.forEach(this.Fn(e),i=>this.getIndexType(t,i).next(a=>{if(a===0||a===1){const l=new X0(i).bn();if(l!=null)return this.addFieldIndex(t,l)}}))}getDocumentsMatchingTarget(t,e){const i=rl(t);let a=!0;const l=new Map;return B.forEach(this.Fn(e),c=>this.Mn(t,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=Dt();const d=[];return B.forEach(l,(m,p)=>{rt(W0,`Using index ${function(it){return`id=${it.indexId}|cg=${it.collectionGroup}|f=${it.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`}(m)} to execute ${Ka(e)}`);const y=function(it,dt){const ft=r_(dt);if(ft===void 0)return null;for(const pt of pd(it,ft.fieldPath))switch(pt.op){case"array-contains-any":return pt.value.arrayValue.values||[];case"array-contains":return[pt.value]}return null}(p,m),T=function(it,dt){const ft=new Map;for(const pt of Ca(dt))for(const x of pd(it,pt.fieldPath))switch(x.op){case"==":case"in":ft.set(pt.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ft.set(pt.fieldPath.canonicalString(),x.value),Array.from(ft.values())}return null}(p,m),b=function(it,dt){const ft=[];let pt=!0;for(const x of Ca(dt)){const S=x.kind===0?x0(it,x.fieldPath,it.startAt):V0(it,x.fieldPath,it.startAt);ft.push(S.value),pt&&(pt=S.inclusive)}return new Os(ft,pt)}(p,m),D=function(it,dt){const ft=[];let pt=!0;for(const x of Ca(dt)){const S=x.kind===0?V0(it,x.fieldPath,it.endAt):x0(it,x.fieldPath,it.endAt);ft.push(S.value),pt&&(pt=S.inclusive)}return new Os(ft,pt)}(p,m),j=this.xn(m,p,b),Q=this.xn(m,p,D),F=this.On(m,p,T),ct=this.Nn(m.indexId,y,j,b.inclusive,Q,D.inclusive,F);return B.forEach(ct,lt=>i.H(lt,e.limit).next(it=>{it.forEach(dt=>{const ft=ht.fromSegments(dt.documentKey);c.has(ft)||(c=c.add(ft),d.push(ft))})}))}).next(()=>d)}return B.resolve(null)})}Fn(t){let e=this.Cn.get(t);return e||(t.filters.length===0?e=[t]:e=PN(ee.create(t.filters,"and")).map(i=>f_(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Cn.set(t,e),e)}Nn(t,e,i,a,l,c,d){const m=(e!=null?e.length:1)*Math.max(i.length,l.length),p=m/(e!=null?e.length:1),y=[];for(let T=0;T<m;++T){const b=e?this.Bn(e[T/p]):Lf,D=this.Ln(t,b,i[T%p],a),j=this.kn(t,b,l[T%p],c),Q=d.map(F=>this.Ln(t,b,F,!0));y.push(...this.createRange(D,j,Q))}return y}Ln(t,e,i,a){const l=new Pa(t,ht.empty(),e,i);return a?l:l.En()}kn(t,e,i,a){const l=new Pa(t,ht.empty(),e,i);return a?l.En():l}Mn(t,e){const i=new X0(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next(l=>{let c=null;for(const d of l)i.pn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const a=this.Fn(e);return B.forEach(a,l=>this.Mn(t,l).next(c=>{c?i!==0&&c.fields.length<function(m){let p=new ne(Ee.comparator),y=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(y?1:0)}(l)&&(i=1):i=0})).next(()=>function(c){return c.limit!==null}(e)&&a.length>1&&i===2?1:i)}qn(t,e){const i=new oc;for(const a of Ca(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=i.hn(a.kind);Ma.Ut.bt(l,c)}return i.an()}Bn(t){const e=new oc;return Ma.Ut.bt(t,e.hn(0)),e.an()}Qn(t,e){const i=new oc;return Ma.Ut.bt(Ha(this.databaseId,e),i.hn(function(l){const c=Ca(l);return c.length===0?0:c[c.length-1].kind}(t))),i.an()}On(t,e,i){if(i===null)return[];let a=[];a.push(new oc);let l=0;for(const c of Ca(t)){const d=i[l++];for(const m of a)if(this.$n(e,c.fieldPath)&&Lc(d))a=this.Un(a,c,d);else{const p=m.hn(c.kind);Ma.Ut.bt(d,p)}}return this.Kn(a)}xn(t,e,i){return this.On(t,e,i.position)}Kn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].an();return e}Un(t,e,i){const a=[...t],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const m=new oc;m.seed(d.an()),Ma.Ut.bt(c,m.hn(e.kind)),l.push(m)}return l}$n(t,e){return!!t.filters.find(i=>i instanceof Lt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){const i=lc(t),a=il(t);return(e?i.j(s_,IDBKeyRange.bound(e,e)):i.j()).next(l=>{const c=[];return B.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(y,T){const b=T?new Vc(T.sequenceNumber,new Zn(Xa(T.readTime),new ht(Fr(T.documentKey)),T.largestBatchId)):Vc.empty(),D=y.fields.map(([j,Q])=>new Qf(Ee.fromServerFormat(j),Q));return new cd(y.indexId,y.collectionGroup,D,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:It(i.collectionGroup,a.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const a=lc(t),l=il(t);return this.Wn(t).next(c=>a.j(s_,IDBKeyRange.bound(e,e)).next(d=>B.forEach(d,m=>l.put(G0(m.indexId,this.uid,c,i)))))}updateIndexEntries(t,e){const i=new Map;return B.forEach(e,(a,l)=>{const c=i.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next(d=>(i.set(a.collectionGroup,d),B.forEach(d,m=>this.Gn(t,a,m).next(p=>{const y=this.zn(l,m);return p.isEqual(y)?B.resolve():this.jn(t,l,m,p,y)}))))})}Jn(t,e,i,a){return rl(t).put(a.An(this.uid,this.Qn(i,e.key),e.key))}Hn(t,e,i,a){return rl(t).delete(a.Rn(this.uid,this.Qn(i,e.key),e.key))}Gn(t,e,i){const a=rl(t);let l=new ne(ps);return a.X({index:hS,range:IDBKeyRange.only([i.indexId,this.uid,ed(this.Qn(i,e))])},(c,d)=>{l=l.add(new Pa(i.indexId,e,Y0(d.arrayValue),Y0(d.directionalValue)))}).next(()=>l)}zn(t,e){let i=new ne(ps);const a=this.qn(e,t);if(a==null)return i;const l=r_(e);if(l!=null){const c=t.data.field(l.fieldPath);if(Lc(c))for(const d of c.arrayValue.values||[])i=i.add(new Pa(e.indexId,t.key,this.Bn(d),a))}else i=i.add(new Pa(e.indexId,t.key,Lf,a));return i}jn(t,e,i,a,l){rt(W0,"Updating index entries for document '%s'",e.key);const c=[];return function(m,p,y,T,b){const D=m.getIterator(),j=p.getIterator();let Q=el(D),F=el(j);for(;Q||F;){let ct=!1,lt=!1;if(Q&&F){const it=y(Q,F);it<0?lt=!0:it>0&&(ct=!0)}else Q!=null?lt=!0:ct=!0;ct?(T(F),F=el(j)):lt?(b(Q),Q=el(D)):(Q=el(D),F=el(j))}}(a,l,ps,d=>{c.push(this.Jn(t,e,i,d))},d=>{c.push(this.Hn(t,e,i,d))}),B.waitFor(c)}Wn(t){let e=1;return il(t).X({index:cS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),e=a.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>ps(c,d)).filter((c,d,m)=>!d||ps(c,m[d-1])!==0);const a=[];a.push(t);for(const c of i){const d=ps(c,t),m=ps(c,e);if(d===0)a[0]=t.En();else if(d>0&&m<0)a.push(c),a.push(c.En());else if(m>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Yn(a[c],a[c+1]))return[];const d=a[c].Rn(this.uid,Lf,ht.empty()),m=a[c+1].Rn(this.uid,Lf,ht.empty());l.push(IDBKeyRange.bound(d,m))}return l}Yn(t,e){return ps(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(tA)}getMinOffset(t,e){return B.mapArray(this.Fn(e),i=>this.Mn(t,i).next(a=>a||_t(44426))).next(tA)}}function J0(r){return He(r,Pc)}function rl(r){return He(r,bc)}function lc(r){return He(r,iy)}function il(r){return He(r,Tc)}function tA(r){Tt(r.length!==0,28825);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;ey(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new Zn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gR=41943040;class gn{static withCacheSize(t){return new gn(t,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(r,t,e){const i=r.store(Er),a=r.store(bl),l=[],c=IDBKeyRange.only(e.batchId);let d=0;const m=i.X({range:c},(y,T,b)=>(d++,b.delete()));l.push(m.next(()=>{Tt(d===1,47070,{batchId:e.batchId})}));const p=[];for(const y of e.mutations){const T=oS(t,y.key.path,e.batchId);l.push(a.delete(T)),p.push(y.key)}return B.waitFor(l).next(()=>p)}function Ed(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw _t(14731);t=r.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(gR,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class Yd{constructor(t,e,i,a){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static yt(t,e,i,a){Tt(t.uid!=="",64387);const l=t.isAuthenticated()?t.uid:"";return new Yd(l,e,i,a)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(t).X({index:La,range:i},(a,l,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,a){const l=hl(t),c=_s(t);return c.add({}).next(d=>{Tt(typeof d=="number",49019);const m=new my(d,e,i,a),p=function(D,j,Q){const F=Q.baseMutations.map(lt=>zc(D.gt,lt)),ct=Q.mutations.map(lt=>zc(D.gt,lt));return{userId:j,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:F,mutations:ct}}(this.serializer,this.userId,m),y=[];let T=new ne((b,D)=>It(b.canonicalString(),D.canonicalString()));for(const b of a){const D=oS(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),y.push(c.put(p)),y.push(l.put(D,_V))}return T.forEach(b=>{y.push(this.indexManager.addToCollectionParentIndex(t,b))}),t.addOnCommittedListener(()=>{this.Zn[d]=m.keys()}),B.waitFor(y).next(()=>m)})}lookupMutationBatch(t,e){return _s(t).get(e).next(i=>i?(Tt(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:e}),Oa(this.serializer,i)):null)}Xn(t,e){return this.Zn[e]?B.resolve(this.Zn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const a=i.keys();return this.Zn[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return _s(t).X({index:La,range:a},(c,d,m)=>{d.userId===this.userId&&(Tt(d.batchId>=i,47524,{er:i}),l=Oa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ss;return _s(t).X({index:La,range:e,reverse:!0},(a,l,c)=>{i=l.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Ss],[this.userId,Number.POSITIVE_INFINITY]);return _s(t).j(La,e).next(i=>i.map(a=>Oa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=$f(this.userId,e.path),a=IDBKeyRange.lowerBound(i),l=[];return hl(t).X({range:a},(c,d,m)=>{const[p,y,T]=c,b=Fr(y);if(p===this.userId&&e.path.isEqual(b))return _s(t).get(T).next(D=>{if(!D)throw _t(61480,{tr:c,batchId:T});Tt(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:T}),l.push(Oa(this.serializer,D))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ne(It);const a=[];return e.forEach(l=>{const c=$f(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=hl(t).X({range:d},(p,y,T)=>{const[b,D,j]=p,Q=Fr(D);b===this.userId&&l.path.isEqual(Q)?i=i.add(j):T.done()});a.push(m)}),B.waitFor(a).next(()=>this.nr(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1,l=$f(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new ne(It);return hl(t).X({range:c},(m,p,y)=>{const[T,b,D]=m,j=Fr(b);T===this.userId&&i.isPrefixOf(j)?j.length===a&&(d=d.add(D)):y.done()}).next(()=>this.nr(t,d))}nr(t,e){const i=[],a=[];return e.forEach(l=>{a.push(_s(t).get(l).next(c=>{if(c===null)throw _t(35274,{batchId:l});Tt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Oa(this.serializer,c))}))}),B.waitFor(a).next(()=>i)}removeMutationBatch(t,e){return pR(t.ce,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.rr(e.batchId)}),B.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}rr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return B.resolve();const i=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return hl(t).X({range:i},(l,c,d)=>{if(l[0]===this.userId){const m=Fr(l[1]);a.push(m)}else d.done()}).next(()=>{Tt(a.length===0,56720,{ir:a.map(l=>l.canonicalString())})})})}containsKey(t,e){return _R(t,this.userId,e)}sr(t){return yR(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ss,lastStreamToken:""})}}function _R(r,t,e){const i=$f(t,e.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return hl(r).X({range:l,Z:!0},(d,m,p)=>{const[y,T,b]=d;y===t&&T===a&&(c=!0),p.done()}).next(()=>c)}function _s(r){return He(r,Er)}function hl(r){return He(r,bl)}function yR(r){return He(r,Oc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Za(0)}static ur(){return new Za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.cr(t).next(e=>{const i=new Za(e.highestTargetId);return e.highestTargetId=i.next(),this.lr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.cr(t).next(e=>bt.fromTimestamp(new Wt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.cr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.cr(t).next(a=>(a.highestListenSequenceNumber=e,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.lr(t,a)))}addTargetData(t,e){return this.hr(t,e).next(()=>this.cr(t).next(i=>(i.targetCount+=1,this.Pr(e,i),this.lr(t,i))))}updateTargetData(t,e){return this.hr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>sl(t).delete(e.targetId)).next(()=>this.cr(t)).next(i=>(Tt(i.targetCount>0,8065),i.targetCount-=1,this.lr(t,i)))}removeTargets(t,e,i){let a=0;const l=[];return sl(t).X((c,d)=>{const m=pc(d);m.sequenceNumber<=e&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(t,m)))}).next(()=>B.waitFor(l)).next(()=>a)}forEachTarget(t,e){return sl(t).X((i,a)=>{const l=pc(a);e(l)})}cr(t){return nA(t).get(dd).next(e=>(Tt(e!==null,2888),e))}lr(t,e){return nA(t).put(dd,e)}hr(t,e){return sl(t).put(fR(this.serializer,e))}Pr(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.cr(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Ka(e),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return sl(t).X({range:a,index:uS},(c,d,m)=>{const p=pc(d);Wc(e,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(t,e,i){const a=[],l=Es(t);return e.forEach(c=>{const d=yn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(t,i,c))}),B.waitFor(a)}removeMatchingKeys(t,e,i){const a=Es(t);return B.forEach(e,l=>{const c=yn(l.path);return B.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(t,i,l)])})}removeMatchingKeysForTargetId(t,e){const i=Es(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),a=Es(t);let l=Dt();return a.X({range:i,Z:!0},(c,d,m)=>{const p=Fr(c[1]),y=new ht(p);l=l.add(y)}).next(()=>l)}containsKey(t,e){const i=yn(e.path),a=IDBKeyRange.bound([i],[Zw(i)],!1,!0);let l=0;return Es(t).X({index:ry,Z:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}Et(t,e){return sl(t).get(e).next(i=>i?pc(i):null)}}function sl(r){return He(r,Al)}function nA(r){return He(r,qa)}function Es(r){return He(r,wl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="LruGarbageCollector",BN=1048576;function iA([r,t],[e,i]){const a=It(r,e);return a===0?It(t,i):a}class jN{constructor(t){this.Tr=t,this.buffer=new ne(iA),this.Ir=0}dr(){return++this.Ir}Er(t){const e=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();iA(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class vR{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){rt(rA,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Bs(e)?rt(rA,"Ignoring IndexedDB error during garbage collection: ",e):await Ls(e)}await this.Rr(3e5)})}}class zN{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.mr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return B.resolve(Un.ue);const i=new jN(e);return this.Vr.forEachTarget(t,a=>i.Er(a.sequenceNumber)).next(()=>this.Vr.gr(t,a=>i.Er(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(eA)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eA):this.pr(t,e))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,e){let i,a,l,c,d,m,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(t,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(t,i,e))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(p=Date.now(),ol()<=Bt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function ER(r,t){return new zN(r,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(t,e){this.db=t,this.garbageCollector=ER(this,e)}mr(t){const e=this.yr(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}gr(t,e){return this.wr(t,(i,a)=>e(a))}addReference(t,e,i){return Bf(t,i)}removeReference(t,e,i){return Bf(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Bf(t,e)}Sr(t,e){return function(a,l){let c=!1;return yR(a).ee(d=>_R(a,d,l).next(m=>(m&&(c=!0),B.resolve(!m)))).next(()=>c)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.wr(t,(c,d)=>{if(d<=e){const m=this.Sr(t,c).next(p=>{if(!p)return l++,i.getEntry(t,c).next(()=>(i.removeEntry(c,bt.min()),Es(t).delete(function(T){return[0,yn(T.path)]}(c))))});a.push(m)}}).next(()=>B.waitFor(a)).next(()=>i.apply(t)).next(()=>l)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Bf(t,e)}wr(t,e){const i=Es(t);let a,l=Un.ue;return i.X({index:ry},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==Un.ue&&e(new ht(Fr(a)),l),l=p,a=m):l=Un.ue}).next(()=>{l!==Un.ue&&e(new ht(Fr(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Bf(r,t){return Es(r).put(function(i,a){return{targetId:0,path:yn(i.path),sequenceNumber:a}}(t,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.changes=new Pi(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,me.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?B.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return wa(t).put(i)}removeEntry(t,e,i){return wa(t).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],yd(c),d[d.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.br(t,i)))}getEntry(t,e){let i=me.newInvalidDocument(e);return wa(t).X({index:Yf,range:IDBKeyRange.only(uc(e))},(a,l)=>{i=this.Dr(e,l)}).next(()=>i)}vr(t,e){let i={size:0,document:me.newInvalidDocument(e)};return wa(t).X({index:Yf,range:IDBKeyRange.only(uc(e))},(a,l)=>{i={document:this.Dr(e,l),size:Ed(l)}}).next(()=>i)}getEntries(t,e){let i=Bn();return this.Cr(t,e,(a,l)=>{const c=this.Dr(a,l);i=i.insert(a,c)}).next(()=>i)}Fr(t,e){let i=Bn(),a=new de(ht.comparator);return this.Cr(t,e,(l,c)=>{const d=this.Dr(l,c);i=i.insert(l,d),a=a.insert(l,Ed(c))}).next(()=>({documents:i,Mr:a}))}Cr(t,e,i){if(e.isEmpty())return B.resolve();let a=new ne(oA);e.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(uc(a.first()),uc(a.last())),c=a.getIterator();let d=c.getNext();return wa(t).X({index:Yf,range:l},(m,p,y)=>{const T=ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&oA(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,p),d=c.hasNext()?c.getNext():null),d?y.G(uc(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,a,l){const c=e.path,d=[c.popLast().toArray(),c.lastSegment(),yd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wa(t).j(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Bn();for(const T of p){const b=this.Dr(ht.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(th(e,b)||a.has(b.key))&&(y=y.insert(b.key,b))}return y})}getAllFromCollectionGroup(t,e,i,a){let l=Bn();const c=aA(e,i),d=aA(e,Zn.max());return wa(t).X({index:lS,range:IDBKeyRange.bound(c,d,!0)},(m,p,y)=>{const T=this.Dr(ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&y.done()}).next(()=>l)}newChangeBuffer(t){return new GN(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return sA(t).get(i_).next(e=>(Tt(!!e,20021),e))}br(t,e){return sA(t).put(i_,e)}Dr(t,e){if(e){const i=CN(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(bt.min())))return i}return me.newInvalidDocument(t)}}function bR(r){return new FN(r)}class GN extends TR{constructor(t,e){super(),this.Or=t,this.trackRemovals=e,this.Nr=new Pi(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(t){const e=[];let i=0,a=new ne((l,c)=>It(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Nr.get(l);if(e.push(this.Or.removeEntry(t,l,d.readTime)),c.isValidDocument()){const m=q0(this.Or.serializer,c);a=a.add(l.path.popLast());const p=Ed(m);i+=p-d.size,e.push(this.Or.addEntry(t,l,m))}else if(i-=d.size,this.trackRemovals){const m=q0(this.Or.serializer,c.convertToNoDocument(bt.min()));e.push(this.Or.addEntry(t,l,m))}}),a.forEach(l=>{e.push(this.Or.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Or.updateMetadata(t,i)),B.waitFor(e)}getFromCache(t,e){return this.Or.vr(t,e).next(i=>(this.Nr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Or.Fr(t,e).next(({documents:i,Mr:a})=>(a.forEach((l,c)=>{this.Nr.set(l,{size:c,readTime:i.get(l).readTime})}),i))}}function sA(r){return He(r,Mc)}function wa(r){return He(r,fd)}function uc(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function aA(r,t){const e=t.documentKey.path.toArray();return[r,yd(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function oA(r,t){const e=r.path.toArray(),i=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<i.length-2;++l)if(a=It(e[l],i[l]),a)return a;return a=It(e.length,i.length),a||(a=It(e[e.length-2],i[i.length-2]),a||It(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Sc(i.mutation,a,Ln.empty(),Wt.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Dt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Dt()){const a=Gr();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(l=>{let c=mc();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Gr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Dt()))}populateOverlays(t,e,i){const a=[];return i.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,a){let l=Bn();const c=wc(),d=function(){return wc()}();return e.forEach((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ki)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Sc(y.mutation,p,y.mutation.getFieldMask(),Wt.now())):c.set(p.key,Ln.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,y)=>c.set(p,y)),e.forEach((p,y)=>{var T;return d.set(p,new HN(y,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(t,e){const i=wc();let a=new de((c,d)=>c-d),l=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=e.get(m);if(p===null)return;let y=i.get(m)||Ln.empty();y=d.applyToLocalView(p,y),i.set(m,y);const T=(a.get(d.batchId)||Dt()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,T=jS();y.forEach(b=>{if(!l.has(b)){const D=QS(e.get(b),i.get(b));D!==null&&T.set(b,D),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return B.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return ht.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):cy(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):B.resolve(Gr());let d=Tl,m=l;return c.next(p=>B.forEach(p,(y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(y)?B.resolve():this.remoteDocumentCache.getEntry(t,y).next(b=>{m=m.insert(y,b)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,Dt())).next(y=>({batchId:d,changes:BS(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next(i=>{let a=mc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let c=mc();return this.indexManager.getCollectionParents(t,l).next(d=>B.forEach(d,m=>{const p=function(T,b){return new Mi(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,a).next(y=>{y.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a))).next(c=>{l.forEach((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,me.newInvalidDocument(y)))});let d=mc();return c.forEach((m,p)=>{const y=l.get(m);y!==void 0&&Sc(y.mutation,p,Ln.empty(),Wt.now()),th(e,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,e){return B.resolve(this.Br.get(e))}saveBundleMetadata(t,e){return this.Br.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Ve(a.createTime)}}(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Lr.get(e))}saveNamedQuery(t,e){return this.Lr.set(e.name,function(a){return{name:a.name,query:vy(a.bundledQuery),readTime:Ve(a.readTime)}}(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.overlays=new de(ht.comparator),this.kr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Gr();return B.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,l)=>{this.wt(t,e,l)}),B.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),B.resolve()}getOverlaysForCollection(t,e,i){const a=Gr(),l=e.length+1,c=new ht(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return B.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new de((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=Gr(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Gr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return B.resolve(d)}wt(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new py(e,i));let l=this.kr.get(e);l===void 0&&(l=Dt(),this.kr.set(e,l)),this.kr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.sessionToken=Re.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.qr=new ne(We.Qr),this.$r=new ne(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,e){const i=new We(t,e);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Wr(new We(t,e))}Gr(t,e){t.forEach(i=>this.removeReference(i,e))}zr(t){const e=new ht(new kt([])),i=new We(e,t),a=new We(e,t+1),l=[];return this.$r.forEachInRange([i,a],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(t=>this.Wr(t))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const e=new ht(new kt([])),i=new We(e,t),a=new We(e,t+1);let l=Dt();return this.$r.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new We(t,0),i=this.qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class We{constructor(t,e){this.key=t,this.Hr=e}static Qr(t,e){return ht.comparator(t.key,e.key)||It(t.Hr,e.Hr)}static Ur(t,e){return It(t.Hr,e.Hr)||ht.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.er=1,this.Yr=new ne(We.Qr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new my(l,e,i,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new We(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(t,e){return B.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.Xr(i),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ss:this.er-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new We(e,0),a=new We(e,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,a],c=>{const d=this.Zr(c.Hr);l.push(d)}),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ne(It);return e.forEach(a=>{const l=new We(a,0),c=new We(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],d=>{i=i.add(d.Hr)})}),B.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;ht.isDocumentKey(l)||(l=l.child(""));const c=new We(new ht(l),0);let d=new ne(It);return this.Yr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Hr)),!0)},c),B.resolve(this.ei(d))}ei(t){const e=[];return t.forEach(i=>{const a=this.Zr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){Tt(this.ti(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return B.forEach(e.mutations,a=>{const l=new We(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Yr=i})}rr(t){}containsKey(t,e){const i=new We(e,0),a=this.Yr.firstAfterOrEqual(i);return B.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}ti(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t){this.ni=t,this.docs=function(){return new de(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,c=this.ni(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return B.resolve(i?i.document.mutableCopy():me.newInvalidDocument(e))}getEntries(t,e){let i=Bn();return e.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():me.newInvalidDocument(a))}),B.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=Bn();const c=e.path,d=new ht(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||ey(nS(y),i)<=0||(a.has(y.key)||th(e,y))&&(l=l.insert(y.key,y.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(t,e,i,a){_t(9500)}ri(t,e){return B.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ZN(this)}getSize(t){return B.resolve(this.size)}}class ZN extends TR{constructor(t){super(),this.Or=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Or.addEntry(t,a)):this.Or.removeEntry(i)}),B.waitFor(e)}getFromCache(t,e){return this.Or.getEntry(t,e)}getAllFromCache(t,e){return this.Or.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t){this.persistence=t,this.ii=new Pi(e=>Ka(e),Wc),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.si=0,this.oi=new by,this.targetCount=0,this._i=Za.ar()}forEachTarget(t,e){return this.ii.forEach((i,a)=>e(a)),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.si&&(this.si=e),B.resolve()}hr(t){this.ii.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this._i=new Za(e),this.highestTargetId=e),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,e){return this.hr(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.hr(e),B.resolve()}removeTargetData(t,e){return this.ii.delete(e.target),this.oi.zr(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),B.waitFor(l).next(()=>a)}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const i=this.ii.get(e)||null;return B.resolve(i)}addMatchingKeys(t,e,i){return this.oi.Kr(e,i),B.resolve()}removeMatchingKeys(t,e,i){this.oi.Gr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),B.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.oi.zr(e),B.resolve()}getMatchingKeysForTargetId(t,e){const i=this.oi.Jr(e);return B.resolve(i)}containsKey(t,e){return B.resolve(this.oi.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t,e){this.ai={},this.overlays={},this.ui=new Un(0),this.ci=!1,this.ci=!0,this.li=new $N,this.referenceDelegate=t(this),this.hi=new WN(this),this.indexManager=new kN,this.remoteDocumentCache=function(a){return new XN(a)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new hR(e),this.Ti=new KN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new QN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ai[t.toKey()];return i||(i=new YN(e,this.referenceDelegate),this.ai[t.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,e,i){rt("MemoryPersistence","Starting transaction:",t);const a=new JN(this.ui.next());return this.referenceDelegate.Ii(),i(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ei(t,e){return B.or(Object.values(this.ai).map(i=>()=>i.containsKey(t,e)))}}class JN extends iS{constructor(t){super(),this.currentSequenceNumber=t}}class Xd{constructor(t){this.persistence=t,this.Ai=new by,this.Ri=null}static Vi(t){return new Xd(t)}get mi(){if(this.Ri)return this.Ri;throw _t(60996)}addReference(t,e,i){return this.Ai.addReference(i,e),this.mi.delete(i.toString()),B.resolve()}removeReference(t,e,i){return this.Ai.removeReference(i,e),this.mi.add(i.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.mi.add(e.toString()),B.resolve()}removeTarget(t,e){this.Ai.zr(e.targetId).forEach(a=>this.mi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}Ii(){this.Ri=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,i=>{const a=ht.fromPath(i);return this.fi(t,a).next(l=>{l||e.removeEntry(a,bt.min())})}).next(()=>(this.Ri=null,e.apply(t)))}updateLimboDocument(t,e){return this.fi(t,e).next(i=>{i?this.mi.delete(e.toString()):this.mi.add(e.toString())})}Pi(t){return 0}fi(t,e){return B.or([()=>B.resolve(this.Ai.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Td{constructor(t,e){this.persistence=t,this.gi=new Pi(i=>yn(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=ER(this,e)}static Vi(t,e){return new Td(t,e)}Ii(){}di(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}mr(t){const e=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}yr(t){let e=0;return this.gr(t,i=>{e++}).next(()=>e)}gr(t,e){return B.forEach(this.gi,(i,a)=>this.Sr(t,i,a).next(l=>l?B.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(t,c=>this.Sr(t,c,e).next(d=>{d||(i++,l.removeEntry(c,bt.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.gi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),B.resolve()}removeReference(t,e,i){return this.gi.set(i,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.gi.set(e,t.currentSequenceNumber),B.resolve()}Pi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Zf(t.data.value)),e}Sr(t,e,i){return B.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.gi.get(e);return B.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t){this.serializer=t}q(t,e,i,a){const l=new Bd("createOrUpgrade",e);i<1&&a>=1&&(function(m){m.createObjectStore(Zc)}(t),function(m){m.createObjectStore(Oc,{keyPath:pV}),m.createObjectStore(Er,{keyPath:y0,autoIncrement:!0}).createIndex(La,v0,{unique:!0}),m.createObjectStore(bl)}(t),lA(t),function(m){m.createObjectStore(Da)}(t));let c=B.resolve();return i<3&&a>=3&&(i!==0&&(function(m){m.deleteObjectStore(wl),m.deleteObjectStore(Al),m.deleteObjectStore(qa)}(t),lA(t)),c=c.next(()=>function(m){const p=m.store(qa),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return p.put(dd,y)}(l))),i<4&&a>=4&&(i!==0&&(c=c.next(()=>function(m,p){return p.store(Er).j().next(T=>{m.deleteObjectStore(Er),m.createObjectStore(Er,{keyPath:y0,autoIncrement:!0}).createIndex(La,v0,{unique:!0});const b=p.store(Er),D=T.map(j=>b.put(j));return B.waitFor(D)})}(t,l))),c=c.next(()=>{(function(m){m.createObjectStore(Sl,{keyPath:SV})})(t)})),i<5&&a>=5&&(c=c.next(()=>this.pi(l))),i<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Mc)}(t),this.yi(l)))),i<7&&a>=7&&(c=c.next(()=>this.wi(l))),i<8&&a>=8&&(c=c.next(()=>this.Si(t,l))),i<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&a>=10&&(c=c.next(()=>this.bi(l))),i<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(jd,{keyPath:RV})})(t),function(m){m.createObjectStore(zd,{keyPath:IV})}(t)})),i<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(qd,{keyPath:MV});p.createIndex(a_,PV,{unique:!1}),p.createIndex(fS,kV,{unique:!1})})(t)})),i<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(fd,{keyPath:yV});p.createIndex(Yf,vV),p.createIndex(lS,EV)}(t)).next(()=>this.Di(t,l)).next(()=>t.deleteObjectStore(Da))),i<14&&a>=14&&(c=c.next(()=>this.Ci(t,l))),i<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(iy,{keyPath:CV,autoIncrement:!0}).createIndex(s_,DV,{unique:!1}),m.createObjectStore(Tc,{keyPath:xV}).createIndex(cS,VV,{unique:!1}),m.createObjectStore(bc,{keyPath:NV}).createIndex(hS,OV,{unique:!1})}(t))),i<16&&a>=16&&(c=c.next(()=>{e.objectStore(Tc).clear()}).next(()=>{e.objectStore(bc).clear()})),i<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(sy,{keyPath:UV})})(t)})),i<18&&a>=18&&Dw()&&(c=c.next(()=>{e.objectStore(Tc).clear()}).next(()=>{e.objectStore(bc).clear()})),c}yi(t){let e=0;return t.store(Da).X((i,a)=>{e+=Ed(a)}).next(()=>{const i={byteSize:e};return t.store(Mc).put(i_,i)})}pi(t){const e=t.store(Oc),i=t.store(Er);return e.j().next(a=>B.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Ss],[l.userId,l.lastAcknowledgedBatchId]);return i.j(La,c).next(d=>B.forEach(d,m=>{Tt(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=Oa(this.serializer,m);return pR(t,l.userId,p).next(()=>{})}))}))}wi(t){const e=t.store(wl),i=t.store(Da);return t.store(qa).get(dd).next(a=>{const l=[];return i.X((c,d)=>{const m=new kt(c),p=function(T){return[0,yn(T)]}(m);l.push(e.get(p).next(y=>y?B.resolve():(T=>e.put({targetId:0,path:yn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>B.waitFor(l))})}Si(t,e){t.createObjectStore(Pc,{keyPath:wV});const i=e.store(Pc),a=new Ty,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return i.put({collectionId:d,parent:yn(m)})}};return e.store(Da).X({Z:!0},(c,d)=>{const m=new kt(c);return l(m.popLast())}).next(()=>e.store(bl).X({Z:!0},([c,d,m],p)=>{const y=Fr(d);return l(y.popLast())}))}bi(t){const e=t.store(Al);return e.X((i,a)=>{const l=pc(a),c=fR(this.serializer,l);return e.put(c)})}Di(t,e){const i=e.store(Da),a=[];return i.X((l,c)=>{const d=e.store(fd),m=function(T){return T.document?new ht(kt.fromString(T.document.name).popFirst(5)):T.noDocument?ht.fromSegments(T.noDocument.path):T.unknownDocument?ht.fromSegments(T.unknownDocument.path):_t(36783)}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>B.waitFor(a))}Ci(t,e){const i=e.store(Er),a=bR(this.serializer),l=new Ay(Xd.Vi,this.serializer.gt);return i.j().next(c=>{const d=new Map;return c.forEach(m=>{var p;let y=(p=d.get(m.userId))!==null&&p!==void 0?p:Dt();Oa(this.serializer,m).keys().forEach(T=>y=y.add(T)),d.set(m.userId,y)}),B.forEach(d,(m,p)=>{const y=new Je(p),T=$d.yt(this.serializer,y),b=l.getIndexManager(y),D=Yd.yt(y,this.serializer,b,l.referenceDelegate);return new AR(a,D,T,b).recalculateAndSaveOverlaysForDocumentKeys(new o_(e,Un.ue),m).next()})})}}function lA(r){r.createObjectStore(wl,{keyPath:bV}).createIndex(ry,AV,{unique:!0}),r.createObjectStore(Al,{keyPath:"targetId"}).createIndex(uS,TV,{unique:!0}),r.createObjectStore(qa)}const ys="IndexedDbPersistence",Op=18e5,Mp=5e3,Pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wR="main";class wy{constructor(t,e,i,a,l,c,d,m,p,y,T=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Fi=l,this.window=c,this.document=d,this.Mi=p,this.xi=y,this.Oi=T,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=b=>Promise.resolve(),!wy.C())throw new nt(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qN(this,a),this.Qi=e+wR,this.serializer=new hR(m),this.$i=new Hr(this.Qi,this.Oi,new tO(this.serializer)),this.li=new xN,this.hi=new LN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bR(this.serializer),this.Ti=new DN,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&xe(ys,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,Pp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.hi.getHighestSequenceNumber(t))}).then(t=>{this.ui=new Un(t,this.Mi)}).then(()=>{this.ci=!0}).catch(t=>(this.$i&&this.$i.close(),Promise.reject(t)))}ji(t){return this.qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.$i.setDatabaseDeletedListener(t)}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>jf(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(t).next(e=>{e||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(t)).next(e=>this.isPrimary&&!e?this.Yi(t).next(()=>!1):!!e&&this.Zi(t).next(()=>!0))).catch(t=>{if(Bs(t))return rt(ys,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt(ys,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Fi.enqueueRetryable(()=>this.qi(t)),this.isPrimary=t})}Ji(t){return cc(t).get(tl).next(e=>B.resolve(this.Xi(e)))}es(t){return jf(t).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,Op)){this.ki=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const i=He(e,Sl);return i.j().next(a=>{const l=this.rs(a,Op),c=a.filter(d=>l.indexOf(d)===-1);return B.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ui)for(const e of t)this.Ui.removeItem(this.ss(e.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.xi?B.resolve(!0):cc(t).get(tl).next(e=>{if(e!==null&&this.ns(e.leaseTimestampMs,Mp)&&!this._s(e.ownerId)){if(this.Xi(e)&&this.networkEnabled)return!0;if(!this.Xi(e)){if(!e.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,Pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||jf(t).j().next(i=>this.rs(i,Mp).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&rt(ys,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Zc,Sl],t=>{const e=new o_(t,Un.ue);return this.Yi(e).next(()=>this.es(e))}),this.$i.close(),this.hs()}rs(t,e){return t.filter(i=>this.ns(i.updateTimeMs,e)&&!this._s(i.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",t=>jf(t).j().next(e=>this.rs(e,Op).map(i=>i.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(t,e){return Yd.yt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new UN(t,this.serializer.gt.databaseId)}getDocumentOverlayCache(t){return $d.yt(this.serializer,t)}getBundleCache(){return this.Ti}runTransaction(t,e,i){rt(ys,"Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=function(m){return m===18?jV:m===17?pS:m===16?BV:m===15?ay:m===14?gS:m===13?mS:m===12?LV:m===11?dS:void _t(60245)}(this.Oi);let c;return this.$i.runTransaction(t,a,l,d=>(c=new o_(d,this.ui?this.ui.next():Un.ue),e==="readwrite-primary"?this.Ji(c).next(m=>!!m||this.Hi(c)).next(m=>{if(!m)throw xe(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new nt(K.FAILED_PRECONDITION,rS);return i(c)}).next(m=>this.Zi(c).next(()=>m)):this.Ts(c).next(()=>i(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ts(t){return cc(t).get(tl).next(e=>{if(e!==null&&this.ns(e.leaseTimestampMs,Mp)&&!this._s(e.ownerId)&&!this.Xi(e)&&!(this.xi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nt(K.FAILED_PRECONDITION,Pp)})}Zi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cc(t).put(tl,e)}static C(){return Hr.C()}Yi(t){const e=cc(t);return e.get(tl).next(i=>this.Xi(i)?(rt(ys,"Releasing primary lease."),e.delete(tl)):B.resolve())}ns(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(xe(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ni=()=>{this.us();const e=/(?:Version|Mobile)\/1[456]/;Cw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(t){var e;try{const i=((e=this.Ui)===null||e===void 0?void 0:e.getItem(this.ss(t)))!==null;return rt(ys,`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return xe(ys,"Failed to get zombied client id.",i),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(t){xe("Failed to set zombie client id.",t)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function cc(r){return He(r,Zc)}function jf(r){return He(r,Sl)}function Sy(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Is=i,this.ds=a}static Es(t,e){let i=Dt(),a=Dt();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ry(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Cw()?8:sS(ld())>0?6:4}()}initialize(t,e){this.gs=t,this.indexManager=e,this.As=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.ps(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(t,e,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new eO;return this.ws(t,e,c).next(d=>{if(l.result=d,this.Rs)return this.Ss(t,e,c,d.size)})}).next(()=>l.result)}Ss(t,e,i,a){return i.documentReadCount<this.Vs?(ol()<=Bt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",ll(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(ol()<=Bt.DEBUG&&rt("QueryEngine","Query:",ll(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(ol()<=Bt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",ll(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Dn(e))):B.resolve())}ps(t,e){if(N0(e))return B.resolve(null);let i=Dn(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=_d(e,null,"F"),i=Dn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=Dt(...l);return this.gs.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(m=>{const p=this.bs(e,d);return this.Ds(e,p,c,m.readTime)?this.ps(t,_d(e,null,"F")):this.vs(t,p,e,m)}))})))}ys(t,e,i,a){return N0(e)||a.isEqual(bt.min())?B.resolve(null):this.gs.getDocuments(t,i).next(l=>{const c=this.bs(e,l);return this.Ds(e,c,i,a)?B.resolve(null):(ol()<=Bt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ll(e)),this.vs(t,c,e,eS(a,Tl)).next(d=>d))})}bs(t,e){let i=new ne(US(t));return e.forEach((a,l)=>{th(t,l)&&(i=i.add(l))}),i}Ds(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(t,e,i){return ol()<=Bt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",ll(e)),this.gs.getDocumentsMatchingQuery(t,e,Zn.min(),i)}vs(t,e,i,a){return this.gs.getDocumentsMatchingQuery(t,i,a).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="LocalStore",nO=3e8;class rO{constructor(t,e,i,a){this.persistence=t,this.Cs=e,this.serializer=a,this.Fs=new de(It),this.Ms=new Pi(l=>Ka(l),Wc),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(i)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new AR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Fs))}}function RR(r,t,e,i){return new rO(r,t,e,i)}async function IR(r,t){const e=gt(r);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,e.Ns(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let m=Dt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return e.localDocuments.getDocuments(i,m).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:d}))})})}function iO(r,t){const e=gt(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),l=e.Os.newChangeBuffer({trackRemovals:!0});return function(d,m,p,y){const T=p.batch,b=T.keys();let D=B.resolve();return b.forEach(j=>{D=D.next(()=>y.getEntry(m,j)).next(Q=>{const F=p.docVersions.get(j);Tt(F!==null,48541),Q.version.compareTo(F)<0&&(T.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),y.addEntry(Q)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Dt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function CR(r){const t=gt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function sO(r,t){const e=gt(r),i=t.snapshotVersion;let a=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.Os.newChangeBuffer({trackRemovals:!0});a=e.Fs;const d=[];t.targetChanges.forEach((y,T)=>{const b=a.get(T);if(!b)return;d.push(e.hi.removeMatchingKeys(l,y.removedDocuments,T).next(()=>e.hi.addMatchingKeys(l,y.addedDocuments,T)));let D=b.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(T)!==null?D=D.withResumeToken(Re.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,i)),a=a.insert(T,D),function(Q,F,ct){return Q.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=nO?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0}(b,D,y)&&d.push(e.hi.updateTargetData(l,D))});let m=Bn(),p=Dt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(DR(l,c,t.documentUpdates).next(y=>{m=y.Ls,p=y.ks})),!i.isEqual(bt.min())){const y=e.hi.getLastRemoteSnapshotVersion(l).next(T=>e.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return B.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(e.Fs=a,l))}function DR(r,t,e){let i=Dt(),a=Dt();return e.forEach(l=>i=i.add(l)),t.getEntries(r,i).next(l=>{let c=Bn();return e.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(bt.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):rt(Iy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Ls:c,ks:a}})}function aO(r,t){const e=gt(r);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Ss),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Nl(r,t){const e=gt(r);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.hi.getTargetData(i,t).next(l=>l?(a=l,B.resolve(a)):e.hi.allocateTargetId(i).next(c=>(a=new Si(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.hi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Fs=e.Fs.insert(i.targetId,i),e.Ms.set(t,i.targetId)),i})}async function Ol(r,t,e){const i=gt(r),a=i.Fs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Bs(c))throw c;rt(Iy,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Fs=i.Fs.remove(t),i.Ms.delete(a.target)}function bd(r,t,e){const i=gt(r);let a=bt.min(),l=Dt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,y){const T=gt(m),b=T.Ms.get(y);return b!==void 0?B.resolve(T.Fs.get(b)):T.hi.getTargetData(p,y)}(i,c,Dn(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,t,e?a:bt.min(),e?l:Dt())).next(d=>(NR(i,kS(t),d),{documents:d,qs:l})))}function xR(r,t){const e=gt(r),i=gt(e.hi),a=e.Fs.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",l=>i.Et(l,t).next(c=>c?c.target:null))}function VR(r,t){const e=gt(r),i=e.xs.get(t)||bt.min();return e.persistence.runTransaction("Get new document changes","readonly",a=>e.Os.getAllFromCollectionGroup(a,t,eS(i,Tl),Number.MAX_SAFE_INTEGER)).then(a=>(NR(e,t,a),a))}function NR(r,t,e){let i=r.xs.get(t)||bt.min();e.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.xs.set(t,i)}async function oO(r,t,e,i){const a=gt(r);let l=Dt(),c=Bn();for(const p of e){const y=t.Qs(p.metadata.name);p.document&&(l=l.add(y));const T=t.$s(p);T.setReadTime(t.Us(p.metadata.readTime)),c=c.insert(y,T)}const d=a.Os.newChangeBuffer({trackRemovals:!0}),m=await Nl(a,function(y){return Dn(ql(kt.fromString(`__bundle__/docs/${y}`)))}(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>DR(p,d,c).next(y=>(d.apply(p),y)).next(y=>a.hi.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.hi.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,y.Ls,y.ks)).next(()=>y.Ls)))}async function lO(r,t,e=Dt()){const i=await Nl(r,Dn(vy(t.bundledQuery))),a=gt(r);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=Ve(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return a.Ti.saveNamedQuery(l,t);const d=i.withResumeToken(Re.EMPTY_BYTE_STRING,c);return a.Fs=a.Fs.insert(d.targetId,d),a.hi.updateTargetData(l,d).next(()=>a.hi.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.hi.addMatchingKeys(l,e,i.targetId)).next(()=>a.Ti.saveNamedQuery(l,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="firestore_clients";function uA(r,t){return`${OR}_${r}_${t}`}const MR="firestore_mutations";function cA(r,t,e){let i=`${MR}_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}const PR="firestore_targets";function kp(r,t){return`${PR}_${r}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SharedClientState";class Ad{constructor(t,e,i,a){this.user=t,this.batchId=e,this.state=i,this.error=a}static Ks(t,e,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new nt(a.error.code,a.error.message))),c?new Ad(t,e,a.state,l):(xe(zr,`Failed to parse mutation state for ID '${e}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Rc{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ks(t,e){const i=JSON.parse(e);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new nt(i.error.code,i.error.message))),l?new Rc(t,i.state,a):(xe(zr,`Failed to parse target state for ID '${t}': ${e}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class wd{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ks(t,e){const i=JSON.parse(e);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=hy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=aS(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new wd(t,l):(xe(zr,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Cy{constructor(t,e){this.clientId=t,this.onlineState=e}static Ks(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Cy(e.clientId,e.onlineState):(xe(zr,`Failed to parse online state: ${t}`),null)}}class T_{constructor(){this.activeTargetIds=hy()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Up{constructor(t,e,i,a,l){this.window=t,this.Fi=e,this.persistenceKey=i,this.js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new de(It),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=uA(this.persistenceKey,this.js),this.eo=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new T_),this.no=new RegExp(`^${OR}_${c}_([^_]*)$`),this.ro=new RegExp(`^${MR}_${c}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${PR}_${c}_(\\d+)$`),this.so=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.oo=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ps();for(const i of t){if(i===this.js)continue;const a=this.getItem(uA(this.persistenceKey,i));if(a){const l=wd.Ks(i,a);l&&(this.Ys=this.Ys.insert(l.clientId,l))}}this._o();const e=this.storage.getItem(this.so);if(e){const i=this.ao(e);i&&this.uo(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.eo,JSON.stringify(t))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(t){let e=!1;return this.Ys.forEach((i,a)=>{a.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.lo(t,"pending")}updateMutationState(t,e,i){this.lo(t,e,i),this.ho(t)}addLocalQueryTarget(t,e=!0){let i="not-current";if(this.isActiveQueryTarget(t)){const a=this.storage.getItem(kp(this.persistenceKey,t));if(a){const l=Rc.Ks(t,a);l&&(i=l.state)}}return e&&this.Po.Gs(t),this._o(),i}removeLocalQueryTarget(t){this.Po.zs(t),this._o()}isLocalQueryTarget(t){return this.Po.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(kp(this.persistenceKey,t))}updateQueryState(t,e,i){this.To(t,e,i)}handleUserChange(t,e,i){e.forEach(a=>{this.ho(a)}),this.currentUser=t,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(t){this.Io(t)}notifyBundleLoaded(t){this.Eo(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return rt(zr,"READ",t,e),e}setItem(t,e){rt(zr,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){rt(zr,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const e=t;if(e.storageArea===this.storage){if(rt(zr,"EVENT",e.key,e.newValue),e.key===this.Xs)return void xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.no.test(e.key)){if(e.newValue==null){const i=this.Ao(e.key);return this.Ro(i,null)}{const i=this.Vo(e.key,e.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.ro.test(e.key)){if(e.newValue!==null){const i=this.mo(e.key,e.newValue);if(i)return this.fo(i)}}else if(this.io.test(e.key)){if(e.newValue!==null){const i=this.po(e.key,e.newValue);if(i)return this.yo(i)}}else if(e.key===this.so){if(e.newValue!==null){const i=this.ao(e.newValue);if(i)return this.uo(i)}}else if(e.key===this.eo){const i=function(l){let c=Un.ue;if(l!=null)try{const d=JSON.parse(l);Tt(typeof d=="number",30636,{wo:l}),c=d}catch(d){xe(zr,"Failed to read sequence number from WebStorage",d)}return c}(e.newValue);i!==Un.ue&&this.sequenceNumberHandler(i)}else if(e.key===this.oo){const i=this.So(e.newValue);await Promise.all(i.map(a=>this.syncEngine.bo(a)))}}}else this.Zs.push(e)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(t,e,i){const a=new Ad(this.currentUser,t,e,i),l=cA(this.persistenceKey,this.currentUser,t);this.setItem(l,a.Ws())}ho(t){const e=cA(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Io(t){const e={clientId:this.js,onlineState:t};this.storage.setItem(this.so,JSON.stringify(e))}To(t,e,i){const a=kp(this.persistenceKey,t),l=new Rc(t,e,i);this.setItem(a,l.Ws())}Eo(t){const e=JSON.stringify(Array.from(t));this.setItem(this.oo,e)}Ao(t){const e=this.no.exec(t);return e?e[1]:null}Vo(t,e){const i=this.Ao(t);return wd.Ks(i,e)}mo(t,e){const i=this.ro.exec(t),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Ad.Ks(new Je(l),a,e)}po(t,e){const i=this.io.exec(t),a=Number(i[1]);return Rc.Ks(a,e)}ao(t){return Cy.Ks(t)}So(t){return JSON.parse(t)}async fo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Do(t.batchId,t.state,t.error);rt(zr,`Ignoring mutation for non-active user ${t.user.uid}`)}yo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Ro(t,e){const i=e?this.Ys.insert(t,e):this.Ys.remove(t),a=this.co(this.Ys),l=this.co(i),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.Co(c,d).then(()=>{this.Ys=i})}uo(t){this.Ys.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}co(t){let e=hy();return t.forEach((i,a)=>{e=e.unionWith(a.activeTargetIds)}),e}}class kR{constructor(){this.Fo=new T_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,e,i){this.Mo[t]=e}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new T_,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="ConnectivityMonitor";class fA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){rt(hA,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){rt(hA,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function b_(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="RestConnection",cO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hO{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=e+"://"+t.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===md?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(t,e,i,a,l){const c=b_(),d=this.Go(t,e.toUriEncodedString());rt(Lp,`Sending RPC '${t}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:p}=new URL(d),y=$c(p);return this.jo(t,d,m,i,y).then(T=>(rt(Lp,`Received RPC '${t}' ${c}: `,T),T),T=>{throw Xn(Lp,`RPC '${t}' ${c} failed with error: `,T,"url: ",d,"request:",i),T})}Jo(t,e,i,a,l,c){return this.Wo(t,e,i,a,l)}zo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,l)=>t[l]=a),i&&i.headers.forEach((a,l)=>t[l]=a)}Go(t,e){const i=cO[t];return`${this.$o}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class dO extends hO{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,e,i,a,l){const c=b_();return new Promise((d,m)=>{const p=new Gw;p.setWithCredentials(!0),p.listenOnce(Hw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Kf.NO_ERROR:const T=p.getResponseJson();rt(mn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),d(T);break;case Kf.TIMEOUT:rt(mn,`RPC '${t}' ${c} timed out`),m(new nt(K.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const b=p.getStatus();if(rt(mn,`RPC '${t}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let D=p.getResponseJson();Array.isArray(D)&&(D=D[0]);const j=D==null?void 0:D.error;if(j&&j.status&&j.message){const Q=function(ct){const lt=ct.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(lt)>=0?lt:K.UNKNOWN}(j.status);m(new nt(Q,j.message))}else m(new nt(K.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new nt(K.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{c_:t,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{rt(mn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);rt(mn,`RPC '${t}' ${c} sending request:`,a),p.send(e,"POST",y,i,15)})}P_(t,e,i){const a=b_(),l=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=$w(),d=Qw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const y=l.join("");rt(mn,`Creating RPC '${t}' stream ${a}: ${y}`,m);const T=c.createWebChannel(y,m);this.T_(T);let b=!1,D=!1;const j=new fO({Ho:F=>{D?rt(mn,`Not sending because RPC '${t}' stream ${a} is closed:`,F):(b||(rt(mn,`Opening RPC '${t}' stream ${a} transport.`),T.open(),b=!0),rt(mn,`RPC '${t}' stream ${a} sending:`,F),T.send(F))},Yo:()=>T.close()}),Q=(F,ct,lt)=>{F.listen(ct,it=>{try{lt(it)}catch(dt){setTimeout(()=>{throw dt},0)}})};return Q(T,dc.EventType.OPEN,()=>{D||(rt(mn,`RPC '${t}' stream ${a} transport opened.`),j.s_())}),Q(T,dc.EventType.CLOSE,()=>{D||(D=!0,rt(mn,`RPC '${t}' stream ${a} transport closed`),j.__(),this.I_(T))}),Q(T,dc.EventType.ERROR,F=>{D||(D=!0,Xn(mn,`RPC '${t}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),j.__(new nt(K.UNAVAILABLE,"The operation could not be completed")))}),Q(T,dc.EventType.MESSAGE,F=>{var ct;if(!D){const lt=F.data[0];Tt(!!lt,16349);const it=lt,dt=(it==null?void 0:it.error)||((ct=it[0])===null||ct===void 0?void 0:ct.error);if(dt){rt(mn,`RPC '${t}' stream ${a} received error:`,dt);const ft=dt.status;let pt=function(I){const O=Le[I];if(O!==void 0)return XS(O)}(ft),x=dt.message;pt===void 0&&(pt=K.INTERNAL,x="Unknown error status: "+ft+" with message "+dt.message),D=!0,j.__(new nt(pt,x)),T.close()}else rt(mn,`RPC '${t}' stream ${a} received:`,lt),j.a_(lt)}}),Q(d,Kw.STAT_EVENT,F=>{F.stat===e_.PROXY?rt(mn,`RPC '${t}' stream ${a} detected buffering proxy`):F.stat===e_.NOPROXY&&rt(mn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{j.o_()},0),j}terminate(){this.u_.forEach(t=>t.close()),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter(e=>e===t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof window<"u"?window:null}function nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(r){return new yN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,e,i=1e3,a=1.5,l=6e4){this.Fi=t,this.timerId=e,this.d_=i,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,e-i);a>0&&rt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),t())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="PersistentStream";class LR{constructor(t,e,i,a,l,c,d,m){this.Fi=t,this.w_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dy(t,e)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():e&&e.code===K.RESOURCE_EXHAUSTED?(xe(e.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):e&&e.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(e)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),e=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.b_===e&&this.W_(i,a)},i=>{t(()=>{const a=new nt(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)})})}W_(t,e){const i=this.K_(this.b_);this.stream=this.z_(t,e),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{i(()=>this.G_(a))}),this.stream.onMessage(a=>{i(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(t){return rt(dA,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return e=>{this.Fi.enqueueAndForget(()=>this.b_===t?e():(rt(dA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mO extends LR{constructor(t,e,i,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}z_(t,e){return this.connection.P_("Listen",t,e)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const e=TN(this.serializer,t),i=function(l){if(!("targetChange"in l))return bt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?bt.min():c.readTime?Ve(c.readTime):bt.min()}(t);return this.listener.J_(e,i)}H_(t){const e={};e.database=p_(this.serializer),e.addTarget=function(l,c){let d;const m=c.target;if(d=gd(m)?{documents:sR(l,m)}:{query:aR(l,m).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=JS(l,c.resumeToken);const p=m_(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(bt.min())>0){d.readTime=Vl(l,c.snapshotVersion.toTimestamp());const p=m_(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const i=AN(this.serializer,t);i&&(e.labels=i),this.k_(e)}Y_(t){const e={};e.database=p_(this.serializer),e.removeTarget=t,this.k_(e)}}class gO extends LR{constructor(t,e,i,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,e){return this.connection.P_("Write",t,e)}j_(t){return Tt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Tt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Tt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const e=bN(t.writeResults,t.commitTime),i=Ve(t.commitTime);return this.listener.ta(i,e)}na(){const t={};t.database=p_(this.serializer),this.k_(t)}X_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>zc(this.serializer,i))};this.k_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{}class _O extends pO{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(t,g_(e,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new nt(K.UNKNOWN,l.toString())})}Jo(t,e,i,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(t,g_(e,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new nt(K.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class yO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xe(e),this._a=!1):rt("OnlineStateTracker",e)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="RemoteStore";class vO{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{zs(this)&&(rt(Wa,"Restarting streams for network reachability change."),await async function(m){const p=gt(m);p.Ia.add(4),await Hl(p),p.Aa.set("Unknown"),p.Ia.delete(4),await sh(p)}(this))})}),this.Aa=new yO(i,a)}}async function sh(r){if(zs(r))for(const t of r.da)await t(!0)}async function Hl(r){for(const t of r.da)await t(!1)}function Zd(r,t){const e=gt(r);e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),Ny(e)?Vy(e):Ql(e).x_()&&xy(e,t))}function Ml(r,t){const e=gt(r),i=Ql(e);e.Ta.delete(t),i.x_()&&BR(e,t),e.Ta.size===0&&(i.x_()?i.B_():zs(e)&&e.Aa.set("Unknown"))}function xy(r,t){if(r.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ql(r).H_(t)}function BR(r,t){r.Ra.$e(t),Ql(r).Y_(t)}function Vy(r){r.Ra=new mN({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>r.Ta.get(t)||null,lt:()=>r.datastore.serializer.databaseId}),Ql(r).start(),r.Aa.aa()}function Ny(r){return zs(r)&&!Ql(r).M_()&&r.Ta.size>0}function zs(r){return gt(r).Ia.size===0}function jR(r){r.Ra=void 0}async function EO(r){r.Aa.set("Online")}async function TO(r){r.Ta.forEach((t,e)=>{xy(r,t)})}async function bO(r,t){jR(r),Ny(r)?(r.Aa.la(t),Vy(r)):r.Aa.set("Unknown")}async function AO(r,t,e){if(r.Aa.set("Online"),t instanceof WS&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))}(r,t)}catch(i){rt(Wa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Sd(r,i)}else if(t instanceof td?r.Ra.Ye(t):t instanceof ZS?r.Ra.it(t):r.Ra.et(t),!e.isEqual(bt.min()))try{const i=await CR(r.localStore);e.compareTo(i)>=0&&await function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ta.get(p);y&&l.Ta.set(p,y.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const y=l.Ta.get(m);if(!y)return;l.Ta.set(m,y.withResumeToken(Re.EMPTY_BYTE_STRING,y.snapshotVersion)),BR(l,m);const T=new Si(y.target,m,p,y.sequenceNumber);xy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(r,e)}catch(i){rt(Wa,"Failed to raise snapshot:",i),await Sd(r,i)}}async function Sd(r,t,e){if(!Bs(t))throw t;r.Ia.add(1),await Hl(r),r.Aa.set("Offline"),e||(e=()=>CR(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{rt(Wa,"Retrying IndexedDB access"),await e(),r.Ia.delete(1),await sh(r)})}function zR(r,t){return t().catch(e=>Sd(r,e,t))}async function Kl(r){const t=gt(r),e=Ms(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Ss;for(;wO(t);)try{const a=await aO(t.localStore,i);if(a===null){t.Pa.length===0&&e.B_();break}i=a.batchId,SO(t,a)}catch(a){await Sd(t,a)}qR(t)&&FR(t)}function wO(r){return zs(r)&&r.Pa.length<10}function SO(r,t){r.Pa.push(t);const e=Ms(r);e.x_()&&e.Z_&&e.X_(t.mutations)}function qR(r){return zs(r)&&!Ms(r).M_()&&r.Pa.length>0}function FR(r){Ms(r).start()}async function RO(r){Ms(r).na()}async function IO(r){const t=Ms(r);for(const e of r.Pa)t.X_(e.mutations)}async function CO(r,t,e){const i=r.Pa.shift(),a=gy.from(i,t,e);await zR(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await Kl(r)}async function DO(r,t){t&&Ms(r).Z_&&await async function(i,a){if(function(c){return YS(c)&&c!==K.ABORTED}(a.code)){const l=i.Pa.shift();Ms(i).N_(),await zR(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Kl(i)}}(r,t),qR(r)&&FR(r)}async function mA(r,t){const e=gt(r);e.asyncQueue.verifyOperationInProgress(),rt(Wa,"RemoteStore received new credentials");const i=zs(e);e.Ia.add(3),await Hl(e),i&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await sh(e)}async function A_(r,t){const e=gt(r);t?(e.Ia.delete(2),await sh(e)):t||(e.Ia.add(2),await Hl(e),e.Aa.set("Unknown"))}function Ql(r){return r.Va||(r.Va=function(e,i,a){const l=gt(e);return l.ia(),new mO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Zo:EO.bind(null,r),e_:TO.bind(null,r),n_:bO.bind(null,r),J_:AO.bind(null,r)}),r.da.push(async t=>{t?(r.Va.N_(),Ny(r)?Vy(r):r.Aa.set("Unknown")):(await r.Va.stop(),jR(r))})),r.Va}function Ms(r){return r.ma||(r.ma=function(e,i,a){const l=gt(e);return l.ia(),new gO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:RO.bind(null,r),n_:DO.bind(null,r),ea:IO.bind(null,r),ta:CO.bind(null,r)}),r.da.push(async t=>{t?(r.ma.N_(),await Kl(r)):(await r.ma.stop(),r.Pa.length>0&&(rt(Wa,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const c=Date.now()+i,d=new Oy(t,e,c,a,l);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(r,t){if(xe("AsyncQueue",`${t}: ${r}`),Bs(r))return new nt(K.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(t){return new gl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||ht.comparator(e.key,i.key):(e,i)=>ht.comparator(e.key,i.key),this.keyedMap=mc(),this.sortedSet=new de(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof gl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new gl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.fa=new de(ht.comparator)}track(t){const e=t.doc.key,i=this.fa.get(e);i?t.type!==0&&i.type===3?this.fa=this.fa.insert(e,t):t.type===3&&i.type!==1?this.fa=this.fa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.fa=this.fa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.fa=this.fa.remove(e):t.type===1&&i.type===2?this.fa=this.fa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.fa=this.fa.insert(e,{type:2,doc:t.doc}):_t(63341,{At:t,ga:i}):this.fa=this.fa.insert(e,t)}pa(){const t=[];return this.fa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Pl{constructor(t,e,i,a,l,c,d,m,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,a,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new Pl(t,e,gl.emptySet(e),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Jc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(t=>t.ba())}}class VO{constructor(){this.queries=pA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(e,i){const a=gt(e),l=a.queries;a.queries=pA(),l.forEach((c,d)=>{for(const m of d.wa)m.onError(i)})})(this,new nt(K.ABORTED,"Firestore shutting down"))}}function pA(){return new Pi(r=>PS(r),Jc)}async function My(r,t){const e=gt(r);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.Sa()&&t.ba()&&(i=2):(l=new xO,i=t.ba()?0:1);try{switch(i){case 0:l.ya=await e.onListen(a,!0);break;case 1:l.ya=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const d=$l(c,`Initialization of query '${ll(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,l),l.wa.push(t),t.va(e.onlineState),l.ya&&t.Ca(l.ya)&&ky(e)}async function Py(r,t){const e=gt(r),i=t.query;let a=3;const l=e.queries.get(i);if(l){const c=l.wa.indexOf(t);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=t.ba()?0:1:!l.Sa()&&t.ba()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function NO(r,t){const e=gt(r);let i=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(i=!0);c.ya=a}}i&&ky(e)}function OO(r,t,e){const i=gt(r),a=i.queries.get(t);if(a)for(const l of a.wa)l.onError(e);i.queries.delete(t)}function ky(r){r.Da.forEach(t=>{t.next()})}var w_,_A;(_A=w_||(w_={})).Fa="default",_A.Cache="cache";class Uy{constructor(t,e,i){this.query=t,this.Ma=e,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Pl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),e=!0):this.Ba(t,this.onlineState)&&(this.La(t),e=!0),this.Oa=t,e}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let e=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),e=!0),e}Ba(t,e){if(!t.fromCache||!this.ba())return!0;const i=e!=="Offline";return(!this.options.ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const e=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}La(t){t=Pl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==w_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(t,e){this.qa=t,this.byteLength=e}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t){this.serializer=t}Qs(t){return Kr(this.serializer,t)}$s(t){return t.metadata.exists?iR(this.serializer,t.document,!1):me.newNoDocument(this.Qs(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return Ve(t)}}class PO{constructor(t,e){this.$a=t,this.serializer=e,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=GR(t)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Ua.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Ka.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++e;const i=kt.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.qa.document&&(this.Ka[this.Ka.length-1].document=t.qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ga(t){const e=new Map,i=new yA(this.serializer);for(const a of t)if(a.metadata.queries){const l=i.Qs(a.metadata.name);for(const c of a.metadata.queries){const d=(e.get(c)||Dt()).add(l);e.set(c,d)}}return e}async za(t){const e=await oO(t,new yA(this.serializer),this.Ka,this.$a.id),i=this.Ga(this.documents);for(const a of this.Ua)await lO(t,a,i.get(a.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:e}}}function GR(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t){this.key=t}}class KR{constructor(t){this.key=t}}class QR{constructor(t,e){this.query=t,this.Ha=e,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Dt(),this.mutatedKeys=Dt(),this.Xa=US(t),this.eu=new gl(this.Xa)}get tu(){return this.Ha}nu(t,e){const i=e?e.ru:new gA,a=e?e.eu:this.eu;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,T)=>{const b=a.get(y),D=th(this.query,T)?T:null,j=!!b&&this.mutatedKeys.has(b.key),Q=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let F=!1;b&&D?b.data.isEqual(D.data)?j!==Q&&(i.track({type:3,doc:D}),F=!0):this.iu(b,D)||(i.track({type:2,doc:D}),F=!0,(m&&this.Xa(D,m)>0||p&&this.Xa(D,p)<0)&&(d=!0)):!b&&D?(i.track({type:0,doc:D}),F=!0):b&&!D&&(i.track({type:1,doc:b}),F=!0,(m||p)&&(d=!0)),F&&(D?(c=c.add(D),l=Q?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort((y,T)=>function(D,j){const Q=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{At:F})}};return Q(D)-Q(j)}(y.type,T.type)||this.Xa(y.doc,T.doc)),this.su(i),a=a!=null&&a;const d=e&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,p=m!==this.Ya;return this.Ya=m,c.length!==0||p?{snapshot:new Pl(this.query,t.eu,l,c,t.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Dt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const e=[];return t.forEach(i=>{this.Za.has(i)||e.push(new KR(i))}),this.Za.forEach(i=>{t.has(i)||e.push(new HR(i))}),e}uu(t){this.Ha=t.qs,this.Za=Dt();const e=this.nu(t.documents);return this.applyChanges(e,!0)}cu(){return Pl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const qs="SyncEngine";class kO{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class UO{constructor(t){this.key=t,this.lu=!1}}class LO{constructor(t,e,i,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Pi(d=>PS(d),Jc),this.Tu=new Map,this.Iu=new Set,this.du=new de(ht.comparator),this.Eu=new Map,this.Au=new by,this.Ru={},this.Vu=new Map,this.mu=Za.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BO(r,t,e=!0){const i=Wd(r);let a;const l=i.Pu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await $R(i,t,e,!0),a}async function jO(r,t){const e=Wd(r);await $R(e,t,!0,!1)}async function $R(r,t,e,i){const a=await Nl(r.localStore,Dn(t)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,e);let d;return i&&(d=await Ly(r,t,l,c==="current",a.resumeToken)),r.isPrimaryClient&&e&&Zd(r.remoteStore,a),d}async function Ly(r,t,e,i,a){r.gu=(T,b,D)=>async function(Q,F,ct,lt){let it=F.view.nu(ct);it.Ds&&(it=await bd(Q.localStore,F.query,!1).then(({documents:x})=>F.view.nu(x,it)));const dt=lt&&lt.targetChanges.get(F.targetId),ft=lt&&lt.targetMismatches.get(F.targetId)!=null,pt=F.view.applyChanges(it,Q.isPrimaryClient,dt,ft);return S_(Q,F.targetId,pt._u),pt.snapshot}(r,T,b,D);const l=await bd(r.localStore,t,!0),c=new QR(t,l.qs),d=c.nu(l.documents),m=rh.createSynthesizedTargetChangeForCurrentChange(e,i&&r.onlineState!=="Offline",a),p=c.applyChanges(d,r.isPrimaryClient,m);S_(r,e,p._u);const y=new kO(t,e,c);return r.Pu.set(t,y),r.Tu.has(e)?r.Tu.get(e).push(t):r.Tu.set(e,[t]),p.snapshot}async function zO(r,t,e){const i=gt(r),a=i.Pu.get(t),l=i.Tu.get(a.targetId);if(l.length>1)return i.Tu.set(a.targetId,l.filter(c=>!Jc(c,t))),void i.Pu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ol(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Ml(i.remoteStore,a.targetId),kl(i,a.targetId)}).catch(Ls)):(kl(i,a.targetId),await Ol(i.localStore,a.targetId,!0))}async function qO(r,t){const e=gt(r),i=e.Pu.get(t),a=e.Tu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Ml(e.remoteStore,i.targetId))}async function FO(r,t,e){const i=qy(r);try{const a=await function(c,d){const m=gt(c),p=Wt.now(),y=d.reduce((D,j)=>D.add(j.key),Dt());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",D=>{let j=Bn(),Q=Dt();return m.Os.getEntries(D,y).next(F=>{j=F,j.forEach((ct,lt)=>{lt.isValidDocument()||(Q=Q.add(ct))})}).next(()=>m.localDocuments.getOverlayedDocuments(D,j)).next(F=>{T=F;const ct=[];for(const lt of d){const it=hN(lt,T.get(lt.key).overlayedDocument);it!=null&&ct.push(new ki(lt.key,it,RS(it.value.mapValue),Te.exists(!0)))}return m.mutationQueue.addMutationBatch(D,p,ct,d)}).next(F=>{b=F;const ct=F.applyToLocalDocumentSet(T,Q);return m.documentOverlayCache.saveOverlays(D,F.batchId,ct)})}).then(()=>({batchId:b.batchId,changes:BS(T)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Ru[c.currentUser.toKey()];p||(p=new de(It)),p=p.insert(d,m),c.Ru[c.currentUser.toKey()]=p}(i,a.batchId,e),await Ui(i,a.changes),await Kl(i.remoteStore)}catch(a){const l=$l(a,"Failed to persist write");e.reject(l)}}async function YR(r,t){const e=gt(r);try{const i=await sO(e.localStore,t);t.targetChanges.forEach((a,l)=>{const c=e.Eu.get(l);c&&(Tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?Tt(c.lu,14607):a.removedDocuments.size>0&&(Tt(c.lu,42227),c.lu=!1))}),await Ui(e,i,t)}catch(i){await Ls(i)}}function vA(r,t,e){const i=gt(r);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Pu.forEach((l,c)=>{const d=c.view.va(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=gt(c);m.onlineState=d;let p=!1;m.queries.forEach((y,T)=>{for(const b of T.wa)b.va(d)&&(p=!0)}),p&&ky(m)}(i.eventManager,t),a.length&&i.hu.J_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function GO(r,t,e){const i=gt(r);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Eu.get(t),l=a&&a.key;if(l){let c=new de(ht.comparator);c=c.insert(l,me.newNoDocument(l,bt.min()));const d=Dt().add(l),m=new nh(bt.min(),new Map,new de(It),c,d);await YR(i,m),i.du=i.du.remove(l),i.Eu.delete(t),zy(i)}else await Ol(i.localStore,t,!1).then(()=>kl(i,t,e)).catch(Ls)}async function HO(r,t){const e=gt(r),i=t.batch.batchId;try{const a=await iO(e.localStore,t);jy(e,i,null),By(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ui(e,a)}catch(a){await Ls(a)}}async function KO(r,t,e){const i=gt(r);try{const a=await function(c,d){const m=gt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(Tt(T!==null,37113),y=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(i.localStore,t);jy(i,t,e),By(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ui(i,a)}catch(a){await Ls(a)}}async function QO(r,t){const e=gt(r);zs(e.remoteStore)||rt(qs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(c){const d=gt(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(e.localStore);if(i===Ss)return void t.resolve();const a=e.Vu.get(i)||[];a.push(t),e.Vu.set(i,a)}catch(i){const a=$l(i,"Initialization of waitForPendingWrites() operation failed");t.reject(a)}}function By(r,t){(r.Vu.get(t)||[]).forEach(e=>{e.resolve()}),r.Vu.delete(t)}function jy(r,t,e){const i=gt(r);let a=i.Ru[i.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),i.Ru[i.currentUser.toKey()]=a}}function kl(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.Tu.get(t))r.Pu.delete(i),e&&r.hu.pu(i,e);r.Tu.delete(t),r.isPrimaryClient&&r.Au.zr(t).forEach(i=>{r.Au.containsKey(i)||XR(r,i)})}function XR(r,t){r.Iu.delete(t.path.canonicalString());const e=r.du.get(t);e!==null&&(Ml(r.remoteStore,e),r.du=r.du.remove(t),r.Eu.delete(e),zy(r))}function S_(r,t,e){for(const i of e)i instanceof HR?(r.Au.addReference(i.key,t),$O(r,i)):i instanceof KR?(rt(qs,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,t),r.Au.containsKey(i.key)||XR(r,i.key)):_t(19791,{yu:i})}function $O(r,t){const e=t.key,i=e.path.canonicalString();r.du.get(e)||r.Iu.has(i)||(rt(qs,"New document in limbo: "+e),r.Iu.add(i),zy(r))}function zy(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Iu.values().next().value;r.Iu.delete(t);const e=new ht(kt.fromString(t)),i=r.mu.next();r.Eu.set(i,new UO(e)),r.du=r.du.insert(e,i),Zd(r.remoteStore,new Si(Dn(ql(e.path)),i,"TargetPurposeLimboResolution",Un.ue))}}async function Ui(r,t,e){const i=gt(r),a=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((d,m)=>{c.push(i.gu(m,t,e).then(p=>{var y;if((p||e)&&i.isPrimaryClient){const T=p?!p.fromCache:(y=e==null?void 0:e.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=Ry.Es(m.targetId,p);l.push(T)}}))}),await Promise.all(c),i.hu.J_(a),await async function(m,p){const y=gt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>B.forEach(p,b=>B.forEach(b.Is,D=>y.persistence.referenceDelegate.addReference(T,b.targetId,D)).next(()=>B.forEach(b.ds,D=>y.persistence.referenceDelegate.removeReference(T,b.targetId,D)))))}catch(T){if(!Bs(T))throw T;rt(Iy,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const D=y.Fs.get(b),j=D.snapshotVersion,Q=D.withLastLimboFreeSnapshotVersion(j);y.Fs=y.Fs.insert(b,Q)}}}(i.localStore,l))}async function YO(r,t){const e=gt(r);if(!e.currentUser.isEqual(t)){rt(qs,"User change. New user:",t.toKey());const i=await IR(e.localStore,t);e.currentUser=t,function(l,c){l.Vu.forEach(d=>{d.forEach(m=>{m.reject(new nt(K.CANCELLED,c))})}),l.Vu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ui(e,i.Bs)}}function XO(r,t){const e=gt(r),i=e.Eu.get(t);if(i&&i.lu)return Dt().add(i.key);{let a=Dt();const l=e.Tu.get(t);if(!l)return a;for(const c of l){const d=e.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}async function ZO(r,t){const e=gt(r),i=await bd(e.localStore,t.query,!0),a=t.view.uu(i);return e.isPrimaryClient&&S_(e,t.targetId,a._u),a}async function WO(r,t){const e=gt(r);return VR(e.localStore,t).then(i=>Ui(e,i))}async function JO(r,t,e,i){const a=gt(r),l=await function(d,m){const p=gt(d),y=gt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>y.Xn(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):B.resolve(null)))}(a.localStore,t);l!==null?(e==="pending"?await Kl(a.remoteStore):e==="acknowledged"||e==="rejected"?(jy(a,t,i||null),By(a,t),function(d,m){gt(gt(d).mutationQueue).rr(m)}(a.localStore,t)):_t(6720,"Unknown batchState",{wu:e}),await Ui(a,l)):rt(qs,"Cannot apply mutation batch with id: "+t)}async function tM(r,t){const e=gt(r);if(Wd(e),qy(e),t===!0&&e.fu!==!0){const i=e.sharedClientState.getAllActiveQueryTargets(),a=await EA(e,i.toArray());e.fu=!0,await A_(e.remoteStore,!0);for(const l of a)Zd(e.remoteStore,l)}else if(t===!1&&e.fu!==!1){const i=[];let a=Promise.resolve();e.Tu.forEach((l,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then(()=>(kl(e,c),Ol(e.localStore,c,!0))),Ml(e.remoteStore,c)}),await a,await EA(e,i),function(c){const d=gt(c);d.Eu.forEach((m,p)=>{Ml(d.remoteStore,p)}),d.Au.jr(),d.Eu=new Map,d.du=new de(ht.comparator)}(e),e.fu=!1,await A_(e.remoteStore,!1)}}async function EA(r,t,e){const i=gt(r),a=[],l=[];for(const c of t){let d;const m=i.Tu.get(c);if(m&&m.length!==0){d=await Nl(i.localStore,Dn(m[0]));for(const p of m){const y=i.Pu.get(p),T=await ZO(i,y);T.snapshot&&l.push(T.snapshot)}}else{const p=await xR(i.localStore,c);d=await Nl(i.localStore,p),await Ly(i,ZR(p),c,!1,d.resumeToken)}a.push(d)}return i.hu.J_(l),a}function ZR(r){return MS(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function eM(r){return function(e){return gt(gt(e).persistence).Ps()}(gt(r).localStore)}async function nM(r,t,e,i){const a=gt(r);if(a.fu)return void rt(qs,"Ignoring unexpected query state notification.");const l=a.Tu.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const c=await VR(a.localStore,kS(l[0])),d=nh.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Re.EMPTY_BYTE_STRING);await Ui(a,c,d);break}case"rejected":await Ol(a.localStore,t,!0),kl(a,t,i);break;default:_t(64155,e)}}async function rM(r,t,e){const i=Wd(r);if(i.fu){for(const a of t){if(i.Tu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){rt(qs,"Adding an already active target "+a);continue}const l=await xR(i.localStore,a),c=await Nl(i.localStore,l);await Ly(i,ZR(l),c.targetId,!1,c.resumeToken),Zd(i.remoteStore,c)}for(const a of e)i.Tu.has(a)&&await Ol(i.localStore,a,!1).then(()=>{Ml(i.remoteStore,a),kl(i,a)}).catch(Ls)}}function Wd(r){const t=gt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=YR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GO.bind(null,t),t.hu.J_=NO.bind(null,t.eventManager),t.hu.pu=OO.bind(null,t.eventManager),t}function qy(r){const t=gt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=KO.bind(null,t),t}function iM(r,t,e){const i=gt(r);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(D,j){const Q=gt(D),F=Ve(j.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",ct=>Q.Ti.getBundleMetadata(ct,j.id)).then(ct=>!!ct&&ct.createTime.compareTo(F)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(GR(m));const p=new PO(m,c.serializer);let y=await c.Su();for(;y;){const b=await p.Wa(y);b&&d._updateProgress(b),y=await c.Su()}const T=await p.za(l.localStore);return await Ui(l,T.Ja,void 0),await function(D,j){const Q=gt(D);return Q.persistence.runTransaction("Save bundle","readwrite",F=>Q.Ti.saveBundleMetadata(F,j))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.ja)}catch(m){return Xn(qs,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(i,t,e).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ih(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,e){return null}Fu(t,e){return null}vu(t){return RR(this.persistence,new SR,t.initialUser,this.serializer)}Du(t){return new Ay(Xd.Vi,this.serializer)}bu(t){return new kR}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class sM extends qc{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,e){Tt(this.persistence.referenceDelegate instanceof Td,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new vR(i,t.asyncQueue,e)}Du(t){const e=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Ay(i=>Td.Vi(i,e),this.serializer)}}class WR extends qc{constructor(t,e,i){super(),this.Mu=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Mu.initialize(this,t),await qy(this.Mu.syncEngine),await Kl(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(t){return RR(this.persistence,new SR,t.initialUser,this.serializer)}Cu(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new vR(i,t.asyncQueue,e)}Fu(t,e){const i=new mV(e,this.persistence);return new dV(t.asyncQueue,i)}Du(t){const e=Sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new wy(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,UR(),nd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(t){return new kR}}class aM extends WR{constructor(t,e){super(t,e,!1),this.Mu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Mu.syncEngine;this.sharedClientState instanceof Up&&(this.sharedClientState.syncEngine={Do:JO.bind(null,e),vo:nM.bind(null,e),Co:rM.bind(null,e),Ps:eM.bind(null,e),bo:WO.bind(null,e)},await this.sharedClientState.start()),await this.persistence.ji(async i=>{await tM(this.Mu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}bu(t){const e=UR();if(!Up.C(e))throw new nt(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Up(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Fc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YO.bind(null,this.syncEngine),await A_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new VO}()}createDatastore(t){const e=ih(t.databaseInfo.databaseId),i=function(l){return new dO(l)}(t.databaseInfo);return function(l,c,d,m){return new _O(l,c,d,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,l,c,d){return new vO(i,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>vA(this.syncEngine,e,0),function(){return fA.C()?new fA:new uO}())}createSyncEngine(t,e){return function(a,l,c,d,m,p,y){const T=new LO(a,l,c,d,m,p);return y&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=gt(a);rt(Wa,"RemoteStore shutting down."),l.Ia.add(5),await Hl(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Fc.provider={build:()=>new Fc};function TA(r,t=10240){let e=0;return{async read(){if(e<r.byteLength){const i={value:r.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):xe("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(t,e){this.Nu=t,this.serializer=e,this.metadata=new ln,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(i=>{i&&i.Qa()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.qa)}`))},i=>this.metadata.reject(i))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const t=await this.ku();if(t===null)return null;const e=this.Bu.decode(t),i=Number(e);isNaN(i)&&this.qu(`length string (${e}) is not valid number`);const a=await this.Qu(i);return new MO(JSON.parse(a),t.length+i)}$u(){return this.buffer.findIndex(t=>t===123)}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Qu(t){for(;this.buffer.length<t;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const e=this.Bu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}qu(t){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Uu(){const t=await this.Nu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nt(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(a,l){const c=gt(a),d={documents:l.map(T=>jc(c.serializer,T))},m=await c.Jo("BatchGetDocuments",c.serializer.databaseId,kt.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=EN(c.serializer,T);p.set(b.key.toString(),b)});const y=[];return l.forEach(T=>{const b=p.get(T.toString());Tt(!!b,55234,{key:T}),y.push(b)}),y}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Gl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{const a=ht.fromPath(i);this.mutations.push(new dy(a,this.precondition(a)))}),await async function(i,a){const l=gt(i),c={writes:a.map(d=>zc(l.serializer,d))};await l.Wo("Commit",l.serializer.databaseId,kt.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _t(50498,{Wu:t.constructor.name});e=bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new nt(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(bt.min())?Te.exists(!1):Te.updateTime(e):Te.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(bt.min()))throw new nt(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Te.updateTime(e)}return Te.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(t,e,i,a,l){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=a,this.deferred=l,this.Gu=i.maxAttempts,this.F_=new Dy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const t=new lM(this.datastore),e=this.Ju(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.Hu(a)}))}).catch(i=>{this.Hu(i)})})}Ju(t){try{const e=this.updateFunction(t);return!Xc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Hu(t){this.Gu>0&&this.Yu(t)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(t)}Yu(t){if(t.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!YS(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class cM{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=Je.UNAUTHENTICATED,this.clientId=J_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{rt(Ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(rt(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=$l(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Bp(r,t){r.asyncQueue.verifyOperationInProgress(),rt(Ps,"Initializing OfflineComponentProvider");const e=r.configuration;await t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener(async a=>{i.isEqual(a)||(await IR(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>{Xn("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{rt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Xn("Terminating Firestore due to IndexedDb database deletion failed",a)})}),r._offlineComponents=t}async function bA(r,t){r.asyncQueue.verifyOperationInProgress();const e=await Fy(r);rt(Ps,"Initializing OnlineComponentProvider"),await t.initialize(e,r.configuration),r.setCredentialChangeListener(i=>mA(t.remoteStore,i)),r.setAppCheckTokenChangeListener((i,a)=>mA(t.remoteStore,a)),r._onlineComponents=t}async function Fy(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){rt(Ps,"Using user provided OfflineComponentProvider");try{await Bp(r,r._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Xn("Error using user provided cache. Falling back to memory cache: "+e),await Bp(r,new qc)}}else rt(Ps,"Using default OfflineComponentProvider"),await Bp(r,new sM(void 0));return r._offlineComponents}async function tm(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(rt(Ps,"Using user provided OnlineComponentProvider"),await bA(r,r._uninitializedComponentsProvider._online)):(rt(Ps,"Using default OnlineComponentProvider"),await bA(r,new Fc))),r._onlineComponents}function JR(r){return Fy(r).then(t=>t.persistence)}function Gy(r){return Fy(r).then(t=>t.localStore)}function t1(r){return tm(r).then(t=>t.remoteStore)}function Hy(r){return tm(r).then(t=>t.syncEngine)}function hM(r){return tm(r).then(t=>t.datastore)}async function Ul(r){const t=await tm(r),e=t.eventManager;return e.onListen=BO.bind(null,t.syncEngine),e.onUnlisten=zO.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=jO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=qO.bind(null,t.syncEngine),e}function fM(r){return r.asyncQueue.enqueue(async()=>{const t=await JR(r),e=await t1(r);return t.setNetworkEnabled(!0),function(a){const l=gt(a);return l.Ia.delete(0),sh(l)}(e)})}function dM(r){return r.asyncQueue.enqueue(async()=>{const t=await JR(r),e=await t1(r);return t.setNetworkEnabled(!1),async function(a){const l=gt(a);l.Ia.add(0),await Hl(l),l.Aa.set("Offline")}(e)})}function mM(r,t){const e=new ln;return r.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,y){const T=gt(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,y))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new nt(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=$l(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await Gy(r),t,e)),e.promise}function e1(r,t,e={}){const i=new ln;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const y=new Jd({next:b=>{y.Ou(),c.enqueueAndForget(()=>Py(l,T));const D=b.docs.has(d);!D&&b.fromCache?p.reject(new nt(K.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&m&&m.source==="server"?p.reject(new nt(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Uy(ql(d.path),y,{includeMetadataChanges:!0,ka:!0});return My(l,T)}(await Ul(r),r.asyncQueue,t,e,i)),i.promise}function gM(r,t){const e=new ln;return r.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await bd(a,l,!0),m=new QR(l,d.qs),p=m.nu(d.documents),y=m.applyChanges(p,!1);c.resolve(y.snapshot)}catch(d){const m=$l(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await Gy(r),t,e)),e.promise}function n1(r,t,e={}){const i=new ln;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const y=new Jd({next:b=>{y.Ou(),c.enqueueAndForget(()=>Py(l,T)),b.fromCache&&m.source==="server"?p.reject(new nt(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Uy(d,y,{includeMetadataChanges:!0,ka:!0});return My(l,T)}(await Ul(r),r.asyncQueue,t,e,i)),i.promise}function pM(r,t){const e=new Jd(t);return r.asyncQueue.enqueueAndForget(async()=>function(a,l){gt(a).Da.add(l),l.next()}(await Ul(r),e)),()=>{e.Ou(),r.asyncQueue.enqueueAndForget(async()=>function(a,l){gt(a).Da.delete(l)}(await Ul(r),e))}}function _M(r,t,e,i){const a=function(c,d){let m;return m=typeof c=="string"?W_().encode(c):c,function(y,T){return new oM(y,T)}(function(y,T){if(y instanceof Uint8Array)return TA(y,T);if(y instanceof ArrayBuffer)return TA(new Uint8Array(y),T);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(e,ih(t));r.asyncQueue.enqueueAndForget(async()=>{iM(await Hy(r),a,i)})}function yM(r,t){return r.asyncQueue.enqueue(async()=>function(i,a){const l=gt(i);return l.persistence.runTransaction("Get named query","readonly",c=>l.Ti.getNamedQuery(c,a))}(await Gy(r),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="firestore.googleapis.com",wA=!0;class SA{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new nt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i1,this.ssl=wA}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:wA;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gR;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<BN)throw new nt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ww("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r1((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ah{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SA(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nV;switch(i.type){case"firstParty":return new aV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new nt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=AA.get(e);i&&(rt("ComponentProvider","Removing Datastore"),AA.delete(e),i.terminate())}(this),Promise.resolve()}}function s1(r,t,e,i={}){var a;r=Qt(r,ah);const l=$c(t),c=r._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${t}:${e}`;l&&(Aw(`https://${m}`),Sw("Firestore",!0)),c.host!==i1&&c.host!==m&&Xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!_l(p,d)&&(r._setSettings(p),i.mockUserToken)){let y,T;if(typeof i.mockUserToken=="string")y=i.mockUserToken,T=Je.MOCK_USER;else{y=ww(i.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new nt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Je(b)}r._authCredentials=new rV(new Xw(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class a1{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new a1(this.firestore,t,this._query)}},fe=class _c{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _c(this.firestore,t,this._key)}toJSON(){return{type:_c._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Yc(e,_c._jsonSchema))return new _c(t,i||null,new ht(kt.fromString(e.referencePath)))}};fe._jsonSchemaVersion="firestore/documentReference/1.0",fe._jsonSchema={type:Be("string",fe._jsonSchemaVersion),referencePath:Be("string")};let Rs=class o1 extends xn{constructor(t,e,i){super(t,e,ql(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fe(this.firestore,null,new ht(t))}withConverter(t){return new o1(this.firestore,t,this._path)}};function Rd(r,t,...e){if(r=re(r),ty("collection","path",t),r instanceof ah){const i=kt.fromString(t,...e);return d0(i),new Rs(r,null,i)}{if(!(r instanceof fe||r instanceof Rs))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(kt.fromString(t,...e));return d0(i),new Rs(r.firestore,null,i)}}function vM(r,t){if(r=Qt(r,ah),ty("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nt(K.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xn(r,null,function(i){return new Mi(kt.emptyPath(),i)}(t))}function Ll(r,t,...e){if(r=re(r),arguments.length===1&&(t=J_.newId()),ty("doc","path",t),r instanceof ah){const i=kt.fromString(t,...e);return f0(i),new fe(r,null,new ht(i))}{if(!(r instanceof fe||r instanceof Rs))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(kt.fromString(t,...e));return f0(i),new fe(r.firestore,r instanceof Rs?r.converter:null,new ht(i))}}function l1(r,t){return r=re(r),t=re(t),(r instanceof fe||r instanceof Rs)&&(t instanceof fe||t instanceof Rs)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function u1(r,t){return r=re(r),t=re(t),r instanceof xn&&t instanceof xn&&r.firestore===t.firestore&&Jc(r._query,t._query)&&r.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="AsyncQueue";class IA{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dy(this,"async_queue_retry"),this.oc=()=>{const i=nd();i&&rt(RA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=t;const e=nd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=nd();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise(()=>{});const e=new ln;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Zu.push(t),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Bs(t))throw t;rt(RA,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(t){const e=this._c.then(()=>(this.nc=!0,t().catch(i=>{throw this.tc=i,this.nc=!1,xe("INTERNAL UNHANDLED ERROR: ",CA(i)),i}).then(i=>(this.nc=!1,i))));return this._c=e,e}enqueueAfterDelay(t,e,i){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const a=Oy.createAndSchedule(this,t,e,i,l=>this.lc(l));return this.ec.push(a),a}ac(){this.tc&&_t(47125,{hc:CA(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then(()=>{this.ec.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()})}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function CA(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r){return function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class EM{constructor(){this._progressObserver={},this._taskCompletionResolver=new ln,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=-1;let Oe=class extends ah{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new IA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new IA(t),this._firestoreClient=void 0,await t}}};function bM(r,t){const e=typeof r=="object"?r:Y_(),i=typeof r=="string"?r:md,a=Pd(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Tw("firestore");l&&s1(a,...l)}return a}function vn(r){if(r._terminated)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||c1(r),r._firestoreClient}function c1(r){var t,e,i;const a=r._freezeSettings(),l=function(d,m,p,y){return new FV(d,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,r1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new cM(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(r._componentsProvider))}function AM(r,t){Xn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();return h1(r,Fc.provider,{build:i=>new WR(i,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function wM(r){Xn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();h1(r,Fc.provider,{build:e=>new aM(e,t.cacheSizeBytes)})}function h1(r,t,e){if((r=Qt(r,Oe))._firestoreClient||r._terminated)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new nt(K.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:t,_offline:e},c1(r)}function SM(r){if(r._initialized&&!r._terminated)throw new nt(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ln;return r._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Hr.C())return Promise.resolve();const a=i+wR;await Hr.delete(a)}(Sy(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function RM(r){return function(e){const i=new ln;return e.asyncQueue.enqueueAndForget(async()=>QO(await Hy(e),i)),i.promise}(vn(r=Qt(r,Oe)))}function IM(r){return fM(vn(r=Qt(r,Oe)))}function CM(r){return dM(vn(r=Qt(r,Oe)))}function DM(r,t){const e=vn(r=Qt(r,Oe)),i=new EM;return _M(e,r._databaseId,t,i),i}function xM(r,t){return yM(vn(r=Qt(r,Oe)),t).then(e=>e?new xn(r,null,e.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new pn(Re.fromBase64String(t))}catch(e){throw new nt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new pn(Re.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yc(t,pn._jsonSchema))return pn.fromBase64String(t.bytes)}}pn._jsonSchemaVersion="firestore/bytes/1.0",pn._jsonSchema={type:Be("string",pn._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ks=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new nt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new nt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new nt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return It(this._lat,t._lat)||It(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(t){if(Yc(t,br._jsonSchema))return new br(t.latitude,t.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:Be("string",br._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yc(t,Qr._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Qr(t.vectorValues);throw new nt(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:Be("string",Qr._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^__.*__$/;class NM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ki(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fl(t,this.data,e,this.fieldTransforms)}}class f1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ki(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function d1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ec:r})}}class em{constructor(t,e,i,a,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new em(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Rc({path:i,mc:!1});return a.fc(t),a}gc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return Id(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(d1(this.Ec)&&VM.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class OM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ih(t)}Dc(t,e,i,a=!1){return new em({Ec:t,methodName:e,bc:i,path:Ee.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(r){const t=r._freezeSettings(),e=ih(r._databaseId);return new OM(r._databaseId,!!t.ignoreUndefinedProperties,e)}function nm(r,t,e,i,a,l={}){const c=r.Dc(l.merge||l.mergeFields?2:0,t,e,a);Wy("Data must be an object, but it was:",c,i);const d=p1(i,c);let m,p;if(l.merge)m=new Ln(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const b=I_(t,T,e);if(!c.contains(b))throw new nt(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);y1(y,b)||y.push(b)}m=new Ln(y),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new NM(new on(d),m,p)}class oh extends eo{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oh}}function m1(r,t,e){return new em({Ec:3,bc:t.settings.bc,methodName:r._methodName,mc:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ky extends eo{_toFieldTransform(t){return new eh(t.path,new Dl)}isEqual(t){return t instanceof Ky}}class Qy extends eo{constructor(t,e){super(t),this.vc=e}_toFieldTransform(t){const e=m1(this,t,!0),i=this.vc.map(l=>ro(l,e)),a=new Qa(i);return new eh(t.path,a)}isEqual(t){return t instanceof Qy&&_l(this.vc,t.vc)}}class $y extends eo{constructor(t,e){super(t),this.vc=e}_toFieldTransform(t){const e=m1(this,t,!0),i=this.vc.map(l=>ro(l,e)),a=new $a(i);return new eh(t.path,a)}isEqual(t){return t instanceof $y&&_l(this.vc,t.vc)}}class Yy extends eo{constructor(t,e){super(t),this.Cc=e}_toFieldTransform(t){const e=new xl(t.serializer,qS(t.serializer,this.Cc));return new eh(t.path,e)}isEqual(t){return t instanceof Yy&&this.Cc===t.Cc}}function Xy(r,t,e,i){const a=r.Dc(1,t,e);Wy("Data must be an object, but it was:",a,i);const l=[],c=on.empty();js(i,(m,p)=>{const y=Jy(t,m,e);p=re(p);const T=a.gc(y);if(p instanceof oh)l.push(y);else{const b=ro(p,T);b!=null&&(l.push(y),c.set(y,b))}});const d=new Ln(l);return new f1(c,d,a.fieldTransforms)}function Zy(r,t,e,i,a,l){const c=r.Dc(1,t,e),d=[I_(t,i,e)],m=[a];if(l.length%2!=0)throw new nt(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(I_(t,l[b])),m.push(l[b+1]);const p=[],y=on.empty();for(let b=d.length-1;b>=0;--b)if(!y1(p,d[b])){const D=d[b];let j=m[b];j=re(j);const Q=c.gc(D);if(j instanceof oh)p.push(D);else{const F=ro(j,Q);F!=null&&(p.push(D),y.set(D,F))}}const T=new Ln(p);return new f1(y,T,c.fieldTransforms)}function g1(r,t,e,i=!1){return ro(e,r.Dc(i?4:3,t))}function ro(r,t){if(_1(r=re(r)))return Wy("Unsupported field value:",t,r),p1(r,t);if(r instanceof eo)return function(i,a){if(!d1(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let m=ro(d,a.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(r,t)}return function(i,a){if((i=re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qS(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Wt.fromDate(i);return{timestampValue:Vl(a.serializer,l)}}if(i instanceof Wt){const l=new Wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vl(a.serializer,l)}}if(i instanceof br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pn)return{bytesValue:JS(a.serializer,i._byteString)};if(i instanceof fe){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Qr)return function(c,d){return{mapValue:{fields:{[oy]:{stringValue:ly},[Rl]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return fy(d.serializer,p)})}}}}}}(i,a);throw a.wc(`Unsupported field value: ${Ld(i)}`)}(r,t)}function p1(r,t){const e={};return _S(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):js(r,(i,a)=>{const l=ro(a,t.Vc(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function _1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Wt||r instanceof br||r instanceof pn||r instanceof fe||r instanceof eo||r instanceof Qr)}function Wy(r,t,e){if(!_1(e)||!Jw(e)){const i=Ld(e);throw i==="an object"?t.wc(r+" a custom object"):t.wc(r+" "+i)}}function I_(r,t,e){if((t=re(t))instanceof ks)return t._internalPath;if(typeof t=="string")return Jy(r,t);throw Id("Field path arguments must be of type string or ",r,!1,void 0,e)}const MM=new RegExp("[~\\*/\\[\\]]");function Jy(r,t,e){if(t.search(MM)>=0)throw Id(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new ks(...t.split("."))._internalPath}catch{throw Id(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function Id(r,t,e,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new nt(K.INVALID_ARGUMENT,d+r+m)}function y1(r,t){return r.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class PM extends Gc{data(){return super.data()}}function rm(r,t){return typeof t=="string"?Jy(r,t):t instanceof ks?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new nt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class lh extends tv{}function Ai(r,t,...e){let i=[];t instanceof tv&&i.push(t),i=i.concat(e),function(l){const c=l.filter(m=>m instanceof ev).length,d=l.filter(m=>m instanceof im).length;if(c>1||c>0&&d>0)throw new nt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)r=a._apply(r);return r}class im extends lh{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new im(t,e,i)}_apply(t){const e=this._parse(t);return b1(t._query,e),new xn(t.firestore,t.converter,d_(t._query,e))}_parse(t){const e=no(t.firestore);return function(l,c,d,m,p,y,T){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new nt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){xA(T,y);const j=[];for(const Q of T)j.push(DA(m,l,Q));b={arrayValue:{values:j}}}else b=DA(m,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||xA(T,y),b=g1(d,c,T,y==="in"||y==="not-in");return Lt.create(p,y,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function E1(r,t,e){const i=t,a=rm("where",r);return im._create(a,i,e)}class ev extends tv{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ev(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ee.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)b1(c,m),c=d_(c,m)}(t._query,e),new xn(t.firestore,t.converter,d_(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nv extends lh{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new nv(t,e)}_apply(t){const e=function(a,l,c){if(a.startAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bc(l,c)}(t._query,this._field,this._direction);return new xn(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Mi(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,e))}}function kM(r,t="asc"){const e=t,i=rm("orderBy",r);return nv._create(i,e)}class sm extends lh{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new sm(t,e,i)}_apply(t){return new xn(t.firestore,t.converter,_d(t._query,this._limit,this._limitType))}}function UM(r){return tS("limit",r),sm._create("limit",r,"F")}function LM(r){return tS("limitToLast",r),sm._create("limitToLast",r,"L")}class am extends lh{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new am(t,e,i)}_apply(t){const e=T1(t,this.type,this._docOrFields,this._inclusive);return new xn(t.firestore,t.converter,function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(t._query,e))}}function BM(...r){return am._create("startAt",r,!0)}function jM(...r){return am._create("startAfter",r,!1)}class om extends lh{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new om(t,e,i)}_apply(t){const e=T1(t,this.type,this._docOrFields,this._inclusive);return new xn(t.firestore,t.converter,function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(t._query,e))}}function zM(...r){return om._create("endBefore",r,!1)}function qM(...r){return om._create("endAt",r,!0)}function T1(r,t,e,i){if(e[0]=re(e[0]),e[0]instanceof Gc)return function(l,c,d,m,p){if(!m)throw new nt(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const y=[];for(const T of ml(l))if(T.field.isKeyField())y.push(Ha(c,m.key));else{const b=m.data.field(T.field);if(Fd(b))throw new nt(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const D=T.field.canonicalString();throw new nt(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}y.push(b)}return new Os(y,p)}(r._query,r.firestore._databaseId,t,e[0]._document,i);{const a=no(r.firestore);return function(c,d,m,p,y,T){const b=c.explicitOrderBy;if(y.length>b.length)throw new nt(K.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let j=0;j<y.length;j++){const Q=y[j];if(b[j].field.isKeyField()){if(typeof Q!="string")throw new nt(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof Q}`);if(!cy(c)&&Q.indexOf("/")!==-1)throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${Q}' contains a slash.`);const F=c.path.child(kt.fromString(Q));if(!ht.isDocumentKey(F))throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const ct=new ht(F);D.push(Ha(d,ct))}else{const F=g1(m,p,Q);D.push(F)}}return new Os(D,T)}(r._query,r.firestore._databaseId,a,t,e,i)}}function DA(r,t,e){if(typeof(e=re(e))=="string"){if(e==="")throw new nt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cy(t)&&e.indexOf("/")!==-1)throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(kt.fromString(e));if(!ht.isDocumentKey(i))throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ha(r,new ht(i))}if(e instanceof fe)return Ha(r,e._key);throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(e)}.`)}function xA(r,t){if(!Array.isArray(r)||r.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function b1(r,t){const e=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class rv{convertValue(t,e="none"){switch(Vs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ni(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return js(t,(a,l)=>{i[a]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,a;const l=(a=(i=(e=t.fields)===null||e===void 0?void 0:e[Rl].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>ve(c.doubleValue));return new Qr(l)}convertGeoPoint(t){return new br(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Gd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(kc(t));default:return null}}convertTimestamp(t){const e=Vi(t);return new Wt(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=kt.fromString(t);Tt(cR(i),9688,{name:t});const a=new xs(i.get(1),i.get(3)),l=new ht(i.popFirst(5));return a.isEqual(e)||xe(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class FM extends rv{constructor(t){super(),this.firestore=t}convertBytes(t){return new pn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,e)}}class Ba{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let dr=class A1 extends Gc{constructor(t,e,i,a,l,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(rm("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=A1._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",dr._jsonSchema={type:Be("string",dr._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};let Ic=class extends dr{data(t={}){return super.data(t)}},Ar=class w1{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Ba(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Ic(this._firestore,this._userDataWriter,i.key,i,new Ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Ic(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ba(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Ic(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ba(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:GM(d.type),doc:m,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=w1._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=J_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(e.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function GM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:r})}}function S1(r,t){return r instanceof dr&&t instanceof dr?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(r._document===null?t._document===null:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof Ar&&t instanceof Ar&&r._firestore===t._firestore&&u1(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(r){r=Qt(r,fe);const t=Qt(r.firestore,Oe);return e1(vn(t),r._key).then(e=>iv(t,r,e))}Ar._jsonSchemaVersion="firestore/querySnapshot/1.0",Ar._jsonSchema={type:Be("string",Ar._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class io extends rv{constructor(t){super(),this.firestore=t}convertBytes(t){return new pn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,e)}}function KM(r){r=Qt(r,fe);const t=Qt(r.firestore,Oe),e=vn(t),i=new io(t);return mM(e,r._key).then(a=>new dr(t,i,r._key,a,new Ba(a!==null&&a.hasLocalMutations,!0),r.converter))}function QM(r){r=Qt(r,fe);const t=Qt(r.firestore,Oe);return e1(vn(t),r._key,{source:"server"}).then(e=>iv(t,r,e))}function R1(r){r=Qt(r,xn);const t=Qt(r.firestore,Oe),e=vn(t),i=new io(t);return v1(r._query),n1(e,r._query).then(a=>new Ar(t,i,r,a))}function $M(r){r=Qt(r,xn);const t=Qt(r.firestore,Oe),e=vn(t),i=new io(t);return gM(e,r._query).then(a=>new Ar(t,i,r,a))}function YM(r){r=Qt(r,xn);const t=Qt(r.firestore,Oe),e=vn(t),i=new io(t);return n1(e,r._query,{source:"server"}).then(a=>new Ar(t,i,r,a))}function VA(r,t,e){r=Qt(r,fe);const i=Qt(r.firestore,Oe),a=lm(r.converter,t,e);return uh(i,[nm(no(i),"setDoc",r._key,a,r.converter!==null,e).toMutation(r._key,Te.none())])}function Cd(r,t,e,...i){r=Qt(r,fe);const a=Qt(r.firestore,Oe),l=no(a);let c;return c=typeof(t=re(t))=="string"||t instanceof ks?Zy(l,"updateDoc",r._key,t,e,i):Xy(l,"updateDoc",r._key,t),uh(a,[c.toMutation(r._key,Te.exists(!0))])}function XM(r){return uh(Qt(r.firestore,Oe),[new Gl(r._key,Te.none())])}function I1(r,t){const e=Qt(r.firestore,Oe),i=Ll(r),a=lm(r.converter,t);return uh(e,[nm(no(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,Te.exists(!1))]).then(()=>i)}function C1(r,...t){var e,i,a;r=re(r);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||R_(t[c])||(l=t[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(R_(t[c])){const T=t[c];t[c]=(e=T.next)===null||e===void 0?void 0:e.bind(T),t[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),t[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,y;if(r instanceof fe)p=Qt(r.firestore,Oe),y=ql(r._key.path),m={next:T=>{t[c]&&t[c](iv(p,r,T))},error:t[c+1],complete:t[c+2]};else{const T=Qt(r,xn);p=Qt(T.firestore,Oe),y=T._query;const b=new io(p);m={next:D=>{t[c]&&t[c](new Ar(p,b,T,D))},error:t[c+1],complete:t[c+2]},v1(r._query)}return function(b,D,j,Q){const F=new Jd(Q),ct=new Uy(D,F,j);return b.asyncQueue.enqueueAndForget(async()=>My(await Ul(b),ct)),()=>{F.Ou(),b.asyncQueue.enqueueAndForget(async()=>Py(await Ul(b),ct))}}(vn(p),y,d,m)}function ZM(r,t){return pM(vn(r=Qt(r,Oe)),R_(t)?t:{next:t})}function uh(r,t){return function(i,a){const l=new ln;return i.asyncQueue.enqueueAndForget(async()=>FO(await Hy(i),a,l)),l.promise}(vn(r),t)}function iv(r,t,e){const i=e.docs.get(t._key),a=new io(r);return new dr(r,a,t._key,i,new Ba(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JM=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=no(t)}set(t,e,i){this._verifyNotCommitted();const a=bs(t,this._firestore),l=lm(a.converter,e,i),c=nm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Te.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const l=bs(t,this._firestore);let c;return c=typeof(e=re(e))=="string"||e instanceof ks?Zy(this._dataReader,"WriteBatch.update",l._key,e,i,a):Xy(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,Te.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=bs(t,this._firestore);return this._mutations=this._mutations.concat(new Gl(e._key,Te.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function bs(r,t){if((r=re(r)).firestore!==t)throw new nt(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=no(t)}get(t){const e=bs(t,this._firestore),i=new FM(this._firestore);return this._transaction.lookup([e._key]).then(a=>{if(!a||a.length!==1)return _t(24041);const l=a[0];if(l.isFoundDocument())return new Gc(this._firestore,i,l.key,l,e.converter);if(l.isNoDocument())return new Gc(this._firestore,i,e._key,null,e.converter);throw _t(18433,{doc:l})})}set(t,e,i){const a=bs(t,this._firestore),l=lm(a.converter,e,i),c=nm(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(t,e,i,...a){const l=bs(t,this._firestore);let c;return c=typeof(e=re(e))=="string"||e instanceof ks?Zy(this._dataReader,"Transaction.update",l._key,e,i,a):Xy(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,c),this}delete(t){const e=bs(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e4=class extends t4{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=bs(t,this._firestore),i=new io(this._firestore);return super.get(t).then(a=>new dr(this._firestore,i,e._key,a._document,new Ba(!1,!1),e.converter))}};function n4(r,t,e){r=Qt(r,Oe);const i=Object.assign(Object.assign({},WM),e);return function(l){if(l.maxAttempts<1)throw new nt(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,c,d){const m=new ln;return l.asyncQueue.enqueueAndForget(async()=>{const p=await hM(l);new uM(l.asyncQueue,p,d,c,m).zu()}),m.promise}(vn(r),a=>t(new e4(r,a)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){return new oh("deleteField")}function i4(){return new Ky("serverTimestamp")}function s4(...r){return new Qy("arrayUnion",r)}function a4(...r){return new $y("arrayRemove",r)}function o4(r){return new Yy("increment",r)}(function(t,e=!0){(function(a){zl=a})(kd),Ga(new Di("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Oe(new iV(i.getProvider("auth-internal")),new oV(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new nt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Tr(o0,l0,t),Tr(o0,l0,"esm2017")})();const l4="@firebase/firestore-compat",u4="0.3.53";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(r,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new nt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){if(typeof Uint8Array>"u")throw new nt("unimplemented","Uint8Arrays are not available in this environment.")}function OA(){if(!zV())throw new nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}let D1=class C_{constructor(t){this._delegate=t}static fromBase64String(t){return OA(),new C_(pn.fromBase64String(t))}static fromUint8Array(t){return NA(),new C_(pn.fromUint8Array(t))}toBase64(){return OA(),this._delegate.toBase64()}toUint8Array(){return NA(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(r){return c4(r,["next","error","complete"])}function c4(r,t){if(typeof r!="object"||r===null)return!1;const e=r;for(const i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{enableIndexedDbPersistence(t,e){return AM(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return wM(t._delegate)}clearIndexedDbPersistence(t){return SM(t._delegate)}}class x1{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof xs||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Xn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){s1(this._delegate,t,e,i)}enableNetwork(){return IM(this._delegate)}disableNetwork(){return CM(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Ww("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RM(this._delegate)}onSnapshotsInSync(t){return ZM(this._delegate,t)}get app(){if(!this._appCompat)throw new nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Bl(this,Rd(this._delegate,t))}catch(e){throw In(e,"collection()","Firestore.collection()")}}doc(t){try{return new cr(this,Ll(this._delegate,t))}catch(e){throw In(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Rn(this,vM(this._delegate,t))}catch(e){throw In(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return n4(this._delegate,e=>t(new V1(this,e)))}batch(){return vn(this._delegate),new N1(new JM(this._delegate,t=>uh(this._delegate,t)))}loadBundle(t){return DM(this._delegate,t)}namedQuery(t){return xM(this._delegate,t).then(e=>e?new Rn(this,e):null)}}class um extends rv{constructor(t){super(),this.firestore=t}convertBytes(t){return new D1(new pn(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return cr.forKey(e,this.firestore,null)}}function f4(r){tV(r)}class V1{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new um(t)}get(t){const e=ja(t);return this._delegate.get(e).then(i=>new Hc(this._firestore,new dr(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const a=ja(t);return i?(sv("Transaction.set",i),this._delegate.set(a,e,i)):this._delegate.set(a,e),this}update(t,e,i,...a){const l=ja(t);return arguments.length===2?this._delegate.update(l,e):this._delegate.update(l,e,i,...a),this}delete(t){const e=ja(t);return this._delegate.delete(e),this}}class N1{constructor(t){this._delegate=t}set(t,e,i){const a=ja(t);return i?(sv("WriteBatch.set",i),this._delegate.set(a,e,i)):this._delegate.set(a,e),this}update(t,e,i,...a){const l=ja(t);return arguments.length===2?this._delegate.update(l,e):this._delegate.update(l,e,i,...a),this}delete(t){const e=ja(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ja{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Ic(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Kc(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Ja.INSTANCES;let a=i.get(t);a||(a=new WeakMap,i.set(t,a));let l=a.get(e);return l||(l=new Ja(t,new um(t),e),a.set(e,l)),l}}Ja.INSTANCES=new WeakMap;class cr{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new um(t)}static forPath(t,e,i){if(t.length%2!==0)throw new nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new cr(e,new fe(e._delegate,i,new ht(t)))}static forKey(t,e,i){return new cr(e,new fe(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Bl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Bl(this.firestore,Rd(this._delegate,t))}catch(e){throw In(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=re(t),t instanceof fe?l1(this._delegate,t):!1}set(t,e){e=sv("DocumentReference.set",e);try{return e?VA(this._delegate,t,e):VA(this._delegate,t)}catch(i){throw In(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?Cd(this._delegate,t):Cd(this._delegate,t,e,...i)}catch(a){throw In(a,"updateDoc()","DocumentReference.update()")}}delete(){return XM(this._delegate)}onSnapshot(...t){const e=O1(t),i=M1(t,a=>new Hc(this.firestore,new dr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return C1(this._delegate,e,i)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=KM(this._delegate):(t==null?void 0:t.source)==="server"?e=QM(this._delegate):e=HM(this._delegate),e.then(i=>new Hc(this.firestore,new dr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new cr(this.firestore,t?this._delegate.withConverter(Ja.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function In(r,t,e){return r.message=r.message.replace(t,e),r}function O1(r){for(const t of r)if(typeof t=="object"&&!D_(t))return t;return{}}function M1(r,t){var e,i;let a;return D_(r[0])?a=r[0]:D_(r[1])?a=r[1]:typeof r[0]=="function"?a={next:r[0],error:r[1],complete:r[2]}:a={next:r[1],error:r[2],complete:r[3]},{next:l=>{a.next&&a.next(t(l))},error:(e=a.error)===null||e===void 0?void 0:e.bind(a),complete:(i=a.complete)===null||i===void 0?void 0:i.bind(a)}}class Hc{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new cr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return S1(this._delegate,t._delegate)}}class Kc extends Hc{data(t){const e=this._delegate.data(t);return this._delegate._converter||eV(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class Rn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new um(t)}where(t,e,i){try{return new Rn(this.firestore,Ai(this._delegate,E1(t,e,i)))}catch(a){throw In(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Rn(this.firestore,Ai(this._delegate,kM(t,e)))}catch(i){throw In(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Rn(this.firestore,Ai(this._delegate,UM(t)))}catch(e){throw In(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Rn(this.firestore,Ai(this._delegate,LM(t)))}catch(e){throw In(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Rn(this.firestore,Ai(this._delegate,BM(...t)))}catch(e){throw In(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Rn(this.firestore,Ai(this._delegate,jM(...t)))}catch(e){throw In(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Rn(this.firestore,Ai(this._delegate,zM(...t)))}catch(e){throw In(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Rn(this.firestore,Ai(this._delegate,qM(...t)))}catch(e){throw In(e,"endAt()","Query.endAt()")}}isEqual(t){return u1(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=$M(this._delegate):(t==null?void 0:t.source)==="server"?e=YM(this._delegate):e=R1(this._delegate),e.then(i=>new x_(this.firestore,new Ar(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=O1(t),i=M1(t,a=>new x_(this.firestore,new Ar(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return C1(this._delegate,e,i)}withConverter(t){return new Rn(this.firestore,t?this._delegate.withConverter(Ja.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class d4{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Kc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class x_{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Rn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Kc(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new d4(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new Kc(this._firestore,i))})}isEqual(t){return S1(this._delegate,t._delegate)}}class Bl extends Rn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new cr(this.firestore,t):null}doc(t){try{return t===void 0?new cr(this.firestore,Ll(this._delegate)):new cr(this.firestore,Ll(this._delegate,t))}catch(e){throw In(e,"doc()","CollectionReference.doc()")}}add(t){return I1(this._delegate,t).then(e=>new cr(this.firestore,e))}isEqual(t){return l1(this._delegate,t._delegate)}withConverter(t){return new Bl(this.firestore,t?this._delegate.withConverter(Ja.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function ja(r){return Qt(r,fe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(...t){this._delegate=new ks(...t)}static documentId(){return new av(Ee.keyField().canonicalString())}isEqual(t){return t=re(t),t instanceof ks?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{static serverTimestamp(){const t=i4();return t._methodName="FieldValue.serverTimestamp",new ka(t)}static delete(){const t=r4();return t._methodName="FieldValue.delete",new ka(t)}static arrayUnion(...t){const e=s4(...t);return e._methodName="FieldValue.arrayUnion",new ka(e)}static arrayRemove(...t){const e=a4(...t);return e._methodName="FieldValue.arrayRemove",new ka(e)}static increment(t){const e=o4(t);return e._methodName="FieldValue.increment",new ka(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={Firestore:x1,GeoPoint:br,Timestamp:Wt,Blob:D1,Transaction:V1,WriteBatch:N1,DocumentReference:cr,DocumentSnapshot:Hc,Query:Rn,QueryDocumentSnapshot:Kc,QuerySnapshot:x_,CollectionReference:Bl,FieldPath:av,FieldValue:ka,setLogLevel:f4,CACHE_SIZE_UNLIMITED:TM};function g4(r,t){r.INTERNAL.registerComponent(new Di("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),a=e.getProvider("firestore").getImmediate();return t(i,a)},"PUBLIC").setServiceProps(Object.assign({},m4)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(r){g4(r,(t,e)=>new x1(t,e,new h4)),r.registerVersion(l4,u4)}p4(Ud);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebasestorage.googleapis.com",k1="storageBucket",_4=2*60*1e3,y4=10*60*1e3,v4=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends Us{constructor(t,e,i=0){super(jp(t),`Firebase Storage: ${e} (${jp(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ae.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return jp(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ge;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ge||(ge={}));function jp(r){return"storage/"+r}function ov(){const r="An unknown error occurred, please check the error payload for server response.";return new Ae(ge.UNKNOWN,r)}function E4(r){return new Ae(ge.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function T4(r){return new Ae(ge.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function b4(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ae(ge.UNAUTHENTICATED,r)}function A4(){return new Ae(ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function w4(r){return new Ae(ge.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function U1(){return new Ae(ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function L1(){return new Ae(ge.CANCELED,"User canceled the upload/download.")}function S4(r){return new Ae(ge.INVALID_URL,"Invalid URL '"+r+"'.")}function R4(r){return new Ae(ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function I4(){return new Ae(ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+k1+"' property when initializing the app?")}function B1(){return new Ae(ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C4(){return new Ae(ge.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function D4(){return new Ae(ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function x4(r){return new Ae(ge.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pl(r){return new Ae(ge.INVALID_ARGUMENT,r)}function j1(){return new Ae(ge.APP_DELETED,"The Firebase app was deleted.")}function z1(r){return new Ae(ge.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cc(r,t){return new Ae(ge.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function hc(r){throw new Ae(ge.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=_n.makeFromUrl(t,e)}catch{return new _n(t,"")}if(i.path==="")return i;throw R4(t)}static makeFromUrl(t,e){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(dt){dt.path.charAt(dt.path.length-1)==="/"&&(dt.path_=dt.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(dt){dt.path_=decodeURIComponent(dt.path)}const y="v[A-Za-z0-9_]+",T=e.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",D=new RegExp(`^https?://${T}/${y}/b/${a}/o${b}`,"i"),j={bucket:1,path:3},Q=e===P1?"(?:storage.googleapis.com|storage.cloud.google.com)":e,F="([^?#]*)",ct=new RegExp(`^https?://${Q}/${a}/${F}`,"i"),it=[{regex:d,indices:m,postModify:l},{regex:D,indices:j,postModify:p},{regex:ct,indices:{bucket:1,path:2},postModify:p}];for(let dt=0;dt<it.length;dt++){const ft=it[dt],pt=ft.regex.exec(t);if(pt){const x=pt[ft.indices.bucket];let S=pt[ft.indices.path];S||(S=""),i=new _n(x,S),ft.postModify(i);break}}if(i==null)throw S4(t);return i}}class V4{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(r,t,e){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let p=!1;function y(...F){p||(p=!0,t.apply(null,F))}function T(F){a=setTimeout(()=>{a=null,r(D,m())},F)}function b(){l&&clearTimeout(l)}function D(F,...ct){if(p){b();return}if(F){b(),y.call(null,F,...ct);return}if(m()||c){b(),y.call(null,F,...ct);return}i<64&&(i*=2);let it;d===1?(d=2,it=0):it=(i+Math.random())*1e3,T(it)}let j=!1;function Q(F){j||(j=!0,b(),!p&&(a!==null?(F||(d=2),clearTimeout(a),T(0)):F||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,Q(!0)},e),Q}function O4(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(r){return r!==void 0}function P4(r){return typeof r=="function"}function k4(r){return typeof r=="object"&&!Array.isArray(r)}function cm(r){return typeof r=="string"||r instanceof String}function MA(r){return lv()&&r instanceof Blob}function lv(){return typeof Blob<"u"}function V_(r,t,e,i){if(i<t)throw pl(`Invalid value for '${r}'. Expected ${t} or greater.`);if(i>e)throw pl(`Invalid value for '${r}'. Expected ${e} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(r,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${r}`}function q1(r){const t=encodeURIComponent;let e="?";for(const i in r)if(r.hasOwnProperty(i)){const a=t(i)+"="+t(r[i]);e=e+a+"&"}return e=e.slice(0,-1),e}var Fa;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Fa||(Fa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(r,t){const e=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=t.indexOf(r)!==-1;return e||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(t,e,i,a,l,c,d,m,p,y,T,b=!0,D=!1){this.url_=t,this.method_=e,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=T,this.retry=b,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,Q)=>{this.resolve_=j,this.reject_=Q,this.start_()})}start_(){const t=(i,a)=>{if(a){i(!1,new qf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Fa.NO_ERROR,m=l.getStatus();if(!d||F1(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Fa.ABORT;i(!1,new qf(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;i(!0,new qf(p,l))})},e=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());M4(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=ov();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?j1():L1();c(m)}else{const m=U1();c(m)}};this.canceled_?e(!1,new qf(!1,null,!0)):this.backoffId_=N4(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&O4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qf{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function L4(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function B4(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function j4(r,t){t&&(r["X-Firebase-GMPID"]=t)}function z4(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function q4(r,t,e,i,a,l,c=!0,d=!1){const m=q1(r.urlParams),p=r.url+m,y=Object.assign({},r.headers);return j4(y,t),L4(y,e),B4(y,l),z4(y,i),new U4(p,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G4(...r){const t=F4();if(t!==void 0){const e=new t;for(let i=0;i<r.length;i++)e.append(r[i]);return e.getBlob()}else{if(lv())return new Blob(r);throw new Ae(ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function H4(r,t,e){return r.webkitSlice?r.webkitSlice(t,e):r.mozSlice?r.mozSlice(t,e):r.slice?r.slice(t,e):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(r){if(typeof atob>"u")throw x4("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zp{constructor(t,e){this.data=t,this.contentType=e||null}}function G1(r,t){switch(r){case hr.RAW:return new zp(H1(t));case hr.BASE64:case hr.BASE64URL:return new zp(K1(r,t));case hr.DATA_URL:return new zp($4(t),Y4(t))}throw ov()}function H1(r){const t=[];for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<r.length-1&&(r.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const l=i,c=r.charCodeAt(++e);i=65536|(l&1023)<<10|c&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function Q4(r){let t;try{t=decodeURIComponent(r)}catch{throw Cc(hr.DATA_URL,"Malformed data URL.")}return H1(t)}function K1(r,t){switch(r){case hr.BASE64:{const a=t.indexOf("-")!==-1,l=t.indexOf("_")!==-1;if(a||l)throw Cc(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case hr.BASE64URL:{const a=t.indexOf("+")!==-1,l=t.indexOf("/")!==-1;if(a||l)throw Cc(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=K4(t)}catch(a){throw a.message.includes("polyfill")?a:Cc(r,"Invalid character found")}const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}class Q1{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw Cc(hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;i!=null&&(this.base64=X4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function $4(r){const t=new Q1(r);return t.base64?K1(hr.BASE64,t.rest):Q4(t.rest)}function Y4(r){return new Q1(r).contentType}function X4(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,e){let i=0,a="";MA(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,e){if(MA(this.data_)){const i=this.data_,a=H4(i,t,e);return a===null?null:new wi(a)}else{const i=new Uint8Array(this.data_.buffer,t,e-t);return new wi(i,!0)}}static getBlob(...t){if(lv()){const e=t.map(i=>i instanceof wi?i.data_:i);return new wi(G4.apply(null,e))}else{const e=t.map(c=>cm(c)?G1(hr.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new wi(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){let t;try{t=JSON.parse(r)}catch{return null}return k4(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function W4(r,t){const e=t.split("/").filter(i=>i.length>0).join("/");return r.length===0?e:r+"/"+e}function $1(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(r,t){return t}class Sn{constructor(t,e,i,a){this.server=t,this.local=e||t,this.writable=!!i,this.xform=a||J4}}let Ff=null;function tP(r){return!cm(r)||r.length<2?r:$1(r)}function hm(){if(Ff)return Ff;const r=[];r.push(new Sn("bucket")),r.push(new Sn("generation")),r.push(new Sn("metageneration")),r.push(new Sn("name","fullPath",!0));function t(l,c){return tP(c)}const e=new Sn("name");e.xform=t,r.push(e);function i(l,c){return c!==void 0?Number(c):c}const a=new Sn("size");return a.xform=i,r.push(a),r.push(new Sn("timeCreated")),r.push(new Sn("updated")),r.push(new Sn("md5Hash",null,!0)),r.push(new Sn("cacheControl",null,!0)),r.push(new Sn("contentDisposition",null,!0)),r.push(new Sn("contentEncoding",null,!0)),r.push(new Sn("contentLanguage",null,!0)),r.push(new Sn("contentType",null,!0)),r.push(new Sn("metadata","customMetadata",!0)),Ff=r,Ff}function eP(r,t){function e(){const i=r.bucket,a=r.fullPath,l=new _n(i,a);return t._makeStorageReference(l)}Object.defineProperty(r,"ref",{get:e})}function nP(r,t,e){const i={};i.type="file";const a=e.length;for(let l=0;l<a;l++){const c=e[l];i[c.local]=c.xform(i,t[c.server])}return eP(i,r),i}function Y1(r,t,e){const i=uv(t);return i===null?null:nP(r,i,e)}function rP(r,t,e,i){const a=uv(t);if(a===null||!cm(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=r.bucket,T=r.fullPath,b="/b/"+c(y)+"/o/"+c(T),D=Fs(b,e,i),j=q1({alt:"media",token:p});return D+j})[0]}function cv(r,t){const e={},i=t.length;for(let a=0;a<i;a++){const l=t[a];l.writable&&(e[l.server]=r[l.local])}return JSON.stringify(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="prefixes",kA="items";function iP(r,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[PA])for(const a of e[PA]){const l=a.replace(/\/$/,""),c=r._makeStorageReference(new _n(t,l));i.prefixes.push(c)}if(e[kA])for(const a of e[kA]){const l=r._makeStorageReference(new _n(t,a.name));i.items.push(l)}return i}function sP(r,t,e){const i=uv(e);return i===null?null:iP(r,t,i)}class Li{constructor(t,e,i,a){this.url=t,this.method=e,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(r){if(!r)throw ov()}function fm(r,t){function e(i,a){const l=Y1(r,a,t);return $r(l!==null),l}return e}function aP(r,t){function e(i,a){const l=sP(r,t,a);return $r(l!==null),l}return e}function oP(r,t){function e(i,a){const l=Y1(r,a,t);return $r(l!==null),rP(l,a,r.host,r._protocol)}return e}function Yl(r){function t(e,i){let a;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?a=A4():a=b4():e.getStatus()===402?a=T4(r.bucket):e.getStatus()===403?a=w4(r.path):a=i,a.status=e.getStatus(),a.serverResponse=i.serverResponse,a}return t}function dm(r){const t=Yl(r);function e(i,a){let l=t(i,a);return i.getStatus()===404&&(l=E4(r.path)),l.serverResponse=a.serverResponse,l}return e}function X1(r,t,e){const i=t.fullServerUrl(),a=Fs(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,d=new Li(a,l,fm(r,e),c);return d.errorHandler=dm(t),d}function lP(r,t,e,i,a){const l={};t.isRoot?l.prefix="":l.prefix=t.path+"/",e.length>0&&(l.delimiter=e),i&&(l.pageToken=i),a&&(l.maxResults=a);const c=t.bucketOnlyServerUrl(),d=Fs(c,r.host,r._protocol),m="GET",p=r.maxOperationRetryTime,y=new Li(d,m,aP(r,t.bucket),p);return y.urlParams=l,y.errorHandler=Yl(t),y}function uP(r,t,e){const i=t.fullServerUrl(),a=Fs(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,d=new Li(a,l,oP(r,e),c);return d.errorHandler=dm(t),d}function cP(r,t,e,i){const a=t.fullServerUrl(),l=Fs(a,r.host,r._protocol),c="PATCH",d=cv(e,i),m={"Content-Type":"application/json; charset=utf-8"},p=r.maxOperationRetryTime,y=new Li(l,c,fm(r,i),p);return y.headers=m,y.body=d,y.errorHandler=dm(t),y}function hP(r,t){const e=t.fullServerUrl(),i=Fs(e,r.host,r._protocol),a="DELETE",l=r.maxOperationRetryTime;function c(m,p){}const d=new Li(i,a,c,l);return d.successCodes=[200,204],d.errorHandler=dm(t),d}function fP(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function Z1(r,t,e){const i=Object.assign({},e);return i.fullPath=r.path,i.size=t.size(),i.contentType||(i.contentType=fP(null,t)),i}function dP(r,t,e,i,a){const l=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let it="";for(let dt=0;dt<2;dt++)it=it+Math.random().toString().slice(2);return it}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const p=Z1(t,i,a),y=cv(p,e),T="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+p.contentType+`\r
\r
`,b=`\r
--`+m+"--",D=wi.getBlob(T,i,b);if(D===null)throw B1();const j={name:p.fullPath},Q=Fs(l,r.host,r._protocol),F="POST",ct=r.maxUploadRetryTime,lt=new Li(Q,F,fm(r,e),ct);return lt.urlParams=j,lt.headers=c,lt.body=D.uploadData(),lt.errorHandler=Yl(t),lt}class Dd{constructor(t,e,i,a){this.current=t,this.total=e,this.finalized=!!i,this.metadata=a||null}}function hv(r,t){let e=null;try{e=r.getResponseHeader("X-Goog-Upload-Status")}catch{$r(!1)}return $r(!!e&&(t||["active"]).indexOf(e)!==-1),e}function mP(r,t,e,i,a){const l=t.bucketOnlyServerUrl(),c=Z1(t,i,a),d={name:c.fullPath},m=Fs(l,r.host,r._protocol),p="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=cv(c,e),b=r.maxUploadRetryTime;function D(Q){hv(Q);let F;try{F=Q.getResponseHeader("X-Goog-Upload-URL")}catch{$r(!1)}return $r(cm(F)),F}const j=new Li(m,p,D,b);return j.urlParams=d,j.headers=y,j.body=T,j.errorHandler=Yl(t),j}function gP(r,t,e,i){const a={"X-Goog-Upload-Command":"query"};function l(p){const y=hv(p,["active","final"]);let T=null;try{T=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$r(!1)}T||$r(!1);const b=Number(T);return $r(!isNaN(b)),new Dd(b,i.size(),y==="final")}const c="POST",d=r.maxUploadRetryTime,m=new Li(e,c,l,d);return m.headers=a,m.errorHandler=Yl(t),m}const UA=256*1024;function pP(r,t,e,i,a,l,c,d){const m=new Dd(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw C4();const p=m.total-m.current;let y=p;a>0&&(y=Math.min(y,a));const T=m.current,b=T+y;let D="";y===0?D="finalize":p===y?D="upload, finalize":D="upload";const j={"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":`${m.current}`},Q=i.slice(T,b);if(Q===null)throw B1();function F(dt,ft){const pt=hv(dt,["active","final"]),x=m.current+y,S=i.size();let I;return pt==="final"?I=fm(t,l)(dt,ft):I=null,new Dd(x,S,pt==="final",I)}const ct="POST",lt=t.maxUploadRetryTime,it=new Li(e,ct,F,lt);return it.headers=j,it.body=Q.uploadData(),it.progressCallback=d||null,it.errorHandler=Yl(r),it}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={STATE_CHANGED:"state_changed"},Cn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qp(r){switch(r){case"running":case"pausing":case"canceling":return Cn.RUNNING;case"paused":return Cn.PAUSED;case"success":return Cn.SUCCESS;case"canceled":return Cn.CANCELED;case"error":return Cn.ERROR;default:return Cn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(t,e,i){if(P4(t)||e!=null||i!=null)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(r){return(...t)=>{Promise.resolve().then(()=>r(...t))}}class vP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fa.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fa.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fa.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,a,l){if(this.sent_)throw hc("cannot .send() more than once");if($c(t)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(e,t,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class EP extends vP{initXhr(){this.xhr_.responseType="text"}}function qr(){return new EP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=hm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(ge.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(F1(a.status,[]))if(l)a=U1();else{this.sleepTime=Math.max(this.sleepTime*2,v4),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(ge.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,e)=>{const i=mP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,qr,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const a=gP(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(a,qr,e,i);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=UA*this._chunkMultiplier,e=new Dd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=pP(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const d=this._ref.storage._makeRequest(c,qr,a,l,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){UA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=X1(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(i,qr,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=dP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,qr,t,e);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e=this._state==="paused";this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=L1(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=qp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,a){const l=new yP(e||void 0,i||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);e!==-1&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(qp(this._state)){case Cn.SUCCESS:al(this._resolve.bind(null,this.snapshot))();break;case Cn.CANCELED:case Cn.ERROR:const e=this._reject;al(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(qp(this._state)){case Cn.RUNNING:case Cn.PAUSED:t.next&&al(t.next.bind(t,this.snapshot))();break;case Cn.SUCCESS:t.complete&&al(t.complete.bind(t))();break;case Cn.CANCELED:case Cn.ERROR:t.error&&al(t.error.bind(t,this._error))();break;default:t.error&&al(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,e){this._service=t,e instanceof _n?this._location=e:this._location=_n.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new to(t,e)}get root(){const t=new _n(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $1(this._location.path)}get storage(){return this._service}get parent(){const t=Z4(this._location.path);if(t===null)return null;const e=new _n(this._location.bucket,t);return new to(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw z1(t)}}function TP(r,t,e){return r._throwIfRoot("uploadBytesResumable"),new W1(r,new wi(t),e)}function bP(r){const t={prefixes:[],items:[]};return J1(r,t).then(()=>t)}async function J1(r,t,e){const a=await tI(r,{pageToken:e});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await J1(r,t,a.nextPageToken)}function tI(r,t){t!=null&&typeof t.maxResults=="number"&&V_("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=lP(r.storage,r._location,"/",e.pageToken,e.maxResults);return r.storage.makeRequestWithTokens(i,qr)}function AP(r){r._throwIfRoot("getMetadata");const t=X1(r.storage,r._location,hm());return r.storage.makeRequestWithTokens(t,qr)}function wP(r,t){r._throwIfRoot("updateMetadata");const e=cP(r.storage,r._location,t,hm());return r.storage.makeRequestWithTokens(e,qr)}function SP(r){r._throwIfRoot("getDownloadURL");const t=uP(r.storage,r._location,hm());return r.storage.makeRequestWithTokens(t,qr).then(e=>{if(e===null)throw D4();return e})}function RP(r){r._throwIfRoot("deleteObject");const t=hP(r.storage,r._location);return r.storage.makeRequestWithTokens(t,qr)}function eI(r,t){const e=W4(r._location.path,t),i=new _n(r._location.bucket,e);return new to(r.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(r){return/^[A-Za-z]+:\/\//.test(r)}function CP(r,t){return new to(r,t)}function nI(r,t){if(r instanceof fv){const e=r;if(e._bucket==null)throw I4();const i=new to(e,e._bucket);return t!=null?nI(i,t):i}else return t!==void 0?eI(r,t):r}function DP(r,t){if(t&&IP(t)){if(r instanceof fv)return CP(r,t);throw pl("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(r,t)}function LA(r,t){const e=t==null?void 0:t[k1];return e==null?null:_n.makeFromBucketSpec(e,r)}function xP(r,t,e,i={}){r.host=`${t}:${e}`;const a=$c(t);a&&(Aw(`https://${r.host}/b`),Sw("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:ww(l,r.app.options.projectId))}class fv{constructor(t,e,i,a,l,c=!1){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=P1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_4,this._maxUploadRetryTime=y4,this._requests=new Set,a!=null?this._bucket=_n.makeFromBucketSpec(a,this._host):this._bucket=LA(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,t):this._bucket=LA(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){V_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){V_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(Q_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new to(this,t)}_makeRequest(t,e,i,a,l=!0){if(this._deleted)return new V4(j1());{const c=q4(t,this._appId,i,a,e,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,e){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,a).getPromise()}}const BA="@firebase/storage",jA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="storage";function VP(r,t,e){return r=re(r),TP(r,t,e)}function NP(r){return r=re(r),AP(r)}function OP(r,t){return r=re(r),wP(r,t)}function MP(r,t){return r=re(r),tI(r,t)}function PP(r){return r=re(r),bP(r)}function kP(r){return r=re(r),SP(r)}function UP(r){return r=re(r),RP(r)}function zA(r,t){return r=re(r),DP(r,t)}function LP(r,t){return eI(r,t)}function BP(r=Y_(),t){r=re(r);const i=Pd(r,rI).getImmediate({identifier:t}),a=Tw("storage");return a&&iI(i,...a),i}function iI(r,t,e,i={}){xP(r,t,e,i)}function jP(r,{instanceIdentifier:t}){const e=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new fv(e,i,a,t,kd)}function zP(){Ga(new Di(rI,jP,"PUBLIC").setMultipleInstances(!0)),Tr(BA,jA,""),Tr(BA,jA,"esm2017")}zP();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Gf(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new Gf(i,this,this._ref))},e)}on(t,e,i,a){let l;return e&&(typeof e=="function"?l=c=>e(new Gf(c,this,this._ref)):l={next:e.next?c=>e.next(new Gf(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,i||void 0,a||void 0)}}class FA{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ii(t,this._service))}get items(){return this._delegate.items.map(t=>new Ii(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=LP(this._delegate,t);return new Ii(e,this.storage)}get root(){return new Ii(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return t==null?null:new Ii(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new qA(VP(this._delegate,t,e),this)}putString(t,e=hr.RAW,i){this._throwIfRoot("putString");const a=G1(e,t),l=Object.assign({},i);return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),new qA(new W1(this._delegate,new wi(a.data,!0),l),this)}listAll(){return PP(this._delegate).then(t=>new FA(t,this.storage))}list(t){return MP(this._delegate,t||void 0).then(e=>new FA(e,this.storage))}getMetadata(){return NP(this._delegate)}updateMetadata(t){return OP(this._delegate,t)}getDownloadURL(){return kP(this._delegate)}delete(){return this._throwIfRoot("delete"),UP(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw z1(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(GA(t))throw pl("ref() expected a child path but got a URL, use refFromURL instead.");return new Ii(zA(this._delegate,t),this)}refFromURL(t){if(!GA(t))throw pl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_n.makeFromUrl(t,this._delegate.host)}catch{throw pl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ii(zA(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){iI(this._delegate,t,e,i)}}function GA(r){return/^[A-Za-z]+:\/\//.test(r)}const qP="@firebase/storage-compat",FP="0.3.24";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="storage-compat";function HP(r,{instanceIdentifier:t}){const e=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:t});return new sI(e,i)}function KP(r){const t={TaskState:Cn,TaskEvent:_P,StringFormat:hr,Storage:sI,Reference:Ii};r.INTERNAL.registerComponent(new Di(GP,HP,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),r.registerVersion(qP,FP)}KP(Ud);const aI=Ud.initializeApp({apiKey:"AIzaSyCjqookaK8rIjkwvFhLp4mLULO_BQ6-GBM",authDomain:"realcontrol-31b06.firebaseapp.com",projectId:"realcontrol-31b06",storageBucket:"realcontrol-31b06.appspot.com",messagingSenderId:"630118428029",appId:"1:630118428029:web:c27e90db601c10cb54b014"}),Hf=bM(aI);BP(aI);const Fp=r=>new Date(r).toLocaleString();function QP(){const[r,t]=Y.useState([]);console.log(r);const e=Ai(Rd(Hf,"tasksRealControl"),E1("asignadoPara","==",localStorage.getItem("user"))),[i,a]=Y.useState(!0);Y.useEffect(()=>{R1(e).then(Z=>{Z.size===0&&console.log("No results!");const yt=Z.docs.map(Ht=>({id:Ht.id,...Ht.data()}));t(yt)}).catch(Z=>{console.log("Error searching items",Z)})},[i]);const l=async(Z,yt)=>{if(confirm("Marcar como Servicio Iniciado")){yt.completed=!0,yt.completedTime=Date.now(),delete yt.id;const Ht=Ll(Hf,"tasksRealControl",Z);try{await Cd(Ht,yt)}catch(jt){console.error(jt)}a(!i)}},c=async(Z,yt)=>{if(confirm("Firmar como Servicio Realizado")){yt.signedCustomer=!0,yt.signedCustomerTime=Date.now(),delete yt.id;const Ht=Ll(Hf,"tasksRealControl",Z);try{await Cd(Ht,yt)}catch(jt){console.error(jt)}a(!i)}},[d,m]=Y.useState(!1),p=()=>m(!1),y=()=>m(!0),[T,b]=Y.useState(),[D,j]=Y.useState(),Q=()=>{localStorage.user===void 0?(T==="admin"&&(D==="admin"?(localStorage.setItem("user",T),p(),setTimeout(()=>{location.reload()},600)):alert("Clave Incorrecta")),T==="usuario1"&&(D==="koko"?(localStorage.setItem("user",T),p(),setTimeout(()=>{location.reload()},1600)):alert("Clave Incorrecta")),T==="usuario2"&&(D==="lima"?(localStorage.setItem("user",T),p(),setTimeout(()=>{location.reload()},1600)):alert("Clave Incorrecta")),T==="usuario3"&&(D==="lona"?(localStorage.setItem("user",T),p(),setTimeout(()=>{location.reload()},1600)):alert("Clave Incorrecta"))):(localStorage.removeItem("user"),setTimeout(()=>{location.reload()},1600))},[F,ct]=Y.useState({asignadoPara:"",comentarios:"",consumibles:"",direccionCliente:"",fechaMeta:"",nombreCliente:"",servicioDescripcion:"",tipoDeServicio:"",correoCliente:"",telefonoCliente:""}),{asignadoPara:lt,comentarios:it,consumibles:dt,direccionCliente:ft,fechaMeta:pt,nombreCliente:x,servicioDescripcion:S,tipoDeServicio:I,correoCliente:O,telefonoCliente:M}=F,P=({target:Z})=>{const{name:yt,value:Ht}=Z;ct({...F,[yt]:Ht})},C=Rd(Hf,"tasksRealControl"),pe=()=>{if(lt.trim()===""||O.trim()===""||M.trim()===""||it.trim()===""||dt.trim()===""||ft.trim()===""||pt.trim()===""||x.trim()===""||S.trim()===""||I.trim()===""){alert("Algun Campo esta Vacio");return}confirm("Crear Servicio")&&(F.createdAt=Date.now(),F.completed=!1,F.signedCustomer=!1,I1(C,F),ct({asignadoPara:"",correoCliente:"",telefonoCliente:"",comentarios:"",consumibles:"",direccionCliente:"",fechaMeta:"",nombreCliente:"",servicioDescripcion:"",tipoDeServicio:""}))},[$t,X]=Y.useState(!0),[at,mt]=Y.useState(0);let xt=4;const[V,tt]=Y.useState(""),[ot,st]=Y.useState("");console.log(ot);const vt=Z=>{let yt=Date.parse(Z.target.value.replace("-","/").replace("-","/"));st(yt)};return k.jsxs(k.Fragment,{children:[k.jsxs(Sa,{variant:"primary",onClick:y,className:"botonEntrar",children:[localStorage.user," ",localStorage.user?"➪":"Entrar"]}),k.jsxs(sc,{show:d,onHide:p,children:[k.jsx(sc.Header,{closeButton:!0,children:k.jsxs(sc.Title,{children:[" ",localStorage.user?localStorage.user:"Entrar"]})}),localStorage.user?"":k.jsxs(sc.Body,{children:[k.jsx(le.Label,{children:"Usuarios:"}),k.jsxs(le.Select,{value:T,name:"usuario",onChange:Z=>b(Z.target.value),children:[k.jsx("option",{}),k.jsx("option",{value:"admin",children:"Admin"}),k.jsx("option",{value:"usuario1",children:"Usuario 1"}),k.jsx("option",{value:"usuario2",children:"Usuario 2"}),k.jsx("option",{value:"usuario3",children:"Usuario 3"})]}),k.jsx(le.Label,{children:"Clave:"}),k.jsx(le.Control,{type:"password",onChange:Z=>j(Z.target.value)})]}),k.jsx(sc.Footer,{children:k.jsx(Sa,{variant:"primary",onClick:Q,children:localStorage.user?"Salir ➪":"Entrar"})})]}),localStorage.user==="admin"?k.jsxs(Xp,{children:[k.jsx("h2",{children:"Creador de Servicios"}),k.jsx(Zp,{children:k.jsxs(dl,{children:[k.jsxs(le,{children:[k.jsxs(le.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[k.jsx(le.Label,{children:"Nombre de Cliente"}),k.jsx(le.Control,{type:"text",name:"nombreCliente",value:x,onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Direccion de Cliente"}),k.jsx(le.Control,{type:"text",name:"direccionCliente",value:ft,onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Telefono de Cliente"}),k.jsx(le.Control,{type:"text",name:"telefonoCliente",value:M,onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Correo de Cliente"}),k.jsx(le.Control,{type:"mail",name:"correoCliente",value:O,placeholder:"@",onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Descripción del Servicio"}),k.jsx(le.Control,{type:"text",name:"servicioDescripcion",value:S,onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Fecha y Hora"}),k.jsx(le.Control,{type:"text",name:"fechaMeta",value:pt,onChange:Z=>P(Z)}),k.jsx(le.Label,{children:"Tipo de Servicio"}),k.jsxs(le.Select,{value:I,name:"tipoDeServicio",onChange:Z=>P(Z),children:[k.jsx("option",{}),k.jsx("option",{value:"domestica chica",children:"Domestica Chica"}),k.jsx("option",{value:"comercial chica",children:"Comercial Chica"}),k.jsx("option",{value:"industrial chica",children:"Industrial Chica"}),k.jsx("hr",{}),k.jsx("option",{value:"domestica mediana",children:"Domestica Mediana"}),k.jsx("option",{value:"comercial mediana",children:"Comercial Mediana"}),k.jsx("option",{value:"industrial mediana",children:"Industrial Mediana"}),k.jsx("hr",{}),k.jsx("option",{value:"domestica grande",children:"Domestica Grande"}),k.jsx("option",{value:"comercial grande",children:"Comercial Grande"}),k.jsx("option",{value:"industrial grande",children:"Industrial Grande"})]}),k.jsx(le.Label,{children:"Consumibles a Utilizar"}),k.jsxs(le.Select,{value:dt,name:"consumibles",onChange:Z=>P(Z),children:[k.jsx("option",{}),k.jsx("option",{value:"Cipermetrina - ELegy",children:"Cipermetrina - ELegy"}),k.jsx("option",{value:"Pybuthrin",children:"Pybuthrin"}),k.jsx("option",{value:"Biothrine",children:"Biothrine"}),k.jsx("option",{value:"Ficam w",children:"Ficam w"}),k.jsx("hr",{}),k.jsx("option",{value:"Max force",children:"Max force"}),k.jsx("option",{value:"Starycide",children:"Starycide"}),k.jsx("option",{value:"Demand 2.5 CS",children:"Demand 2.5 CS"}),k.jsx("hr",{}),k.jsx("option",{value:"Termidor Duo",children:"Termidor Duo"}),k.jsx("option",{value:"Racumid",children:"Racumid"}),k.jsx("option",{value:"Contrac Blox",children:"Contrac Blox"}),k.jsx("hr",{}),k.jsx("option",{value:"Vastrap Pegamento",children:"Vastrap Pegamento"}),k.jsx("option",{value:"Trampa para ratones con pedal",children:"Trampa para ratones con pedal"}),k.jsx("option",{value:"Trampa De Captura Múltiple",children:"Trampa De Captura Múltiple"})]}),k.jsx(le.Label,{children:"Asignar a:"}),k.jsxs(le.Select,{value:lt,name:"asignadoPara",onChange:Z=>P(Z),children:[k.jsx("option",{}),k.jsx("option",{value:"usuario1",children:"Usuario 1"}),k.jsx("option",{value:"usuario2",children:"Usuario 2"}),k.jsx("option",{value:"usuario3",children:"Usuario 3"})]})]}),k.jsx(le.Label,{children:"Comentarios"}),k.jsx(le.Control,{as:"textarea",name:"comentarios",value:it,onChange:Z=>P(Z)})]}),k.jsx(Sa,{variant:"primary",onClick:pe,children:"GUARDAR"}),k.jsx("br",{}),k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})," ",k.jsx("br",{})]})})]}):k.jsxs(Xp,{children:[localStorage.user!=="admin"&&localStorage.user!==void 0?k.jsxs("div",{children:[k.jsxs(dl,{children:[k.jsx(le.Label,{htmlFor:"inputPassword5",children:"Selecciona una Fecha:"}),k.jsx(le.Control,{type:"date",onChange:Z=>vt(Z)})]}),k.jsx(dl,{children:k.jsx(Sa,{className:"mb-1 w-100",variant:"dark",onClick:()=>{X(!$t),mt(0)},children:$t?"INICIADOS":"PENDIENTES"})})]}):"",k.jsx(Zp,{children:k.jsx(dl,{children:r==null?void 0:r.slice(at,at+xt).filter(Z=>Z.createdAt>ot).filter(Z=>Z.createdAt<ot+864e5).filter(Z=>Z.completed===$t).map((Z,yt)=>k.jsxs("div",{className:"item",children:[k.jsx("hr",{}),k.jsxs("p",{children:[k.jsx("span",{children:"Cliente:"})," ",Z.nombreCliente]}),k.jsxs("p",{children:[k.jsx("span",{children:"Direccion:"})," ",Z.direccionCliente]}),k.jsxs("p",{children:[k.jsx("span",{children:"Correo:"})," ",Z.correoCliente]}),k.jsxs("p",{children:[k.jsx("span",{children:"Telefono:"})," ",Z.telefonoCliente]}),k.jsxs("p",{children:[k.jsx("span",{children:"Servicio:"})," ",Z.servicioDescripcion]}),k.jsxs("p",{children:[k.jsx("span",{children:"Hora:"})," ",Z.fechaMeta]}),k.jsxs("p",{children:[k.jsx("span",{children:"Tipo:"})," ",Z.tipoDeServicio]}),k.jsxs("p",{children:[k.jsx("span",{children:"Consumibles:"})," ",Z.consumibles]}),k.jsxs("p",{children:[k.jsx("span",{children:"Comentarios:"})," ",Z.comentarios]}),k.jsxs("p",{children:[k.jsx("span",{children:"Tarea Creada el:"})," ",Fp(Z.createdAt)]}),k.jsx(Sa,{disabled:Z.completed,variant:"primary",className:Z.completed?"":"red",onClick:()=>l(Z.id,Z),children:Z.completed?"Iniciado":"Pendiente"}),k.jsxs("p",{className:Z!=null&&Z.completedTime?"warning":"d-none",children:["Iniciado el: ",Fp(Z==null?void 0:Z.completedTime)]}),k.jsx(Sa,{disabled:Z.signedCustomer,variant:"primary",className:Z.signedCustomer?"":"red",onClick:()=>c(Z.id,Z),children:Z.signedCustomer?"Firmado":"Firmar"}),k.jsxs("p",{className:Z!=null&&Z.signedCustomerTime?"warning":"d-none",children:["Firmado el: ",Fp(Z==null?void 0:Z.signedCustomerTime)]}),k.jsx("hr",{})]},yt))})}),localStorage.user!=="admin"&&localStorage.user!==void 0?k.jsx("div",{children:k.jsxs("div",{className:"sliceButtons",children:[k.jsx("button",{className:at===0?"d-none":"button",onClick:()=>{at>0&&(mt(at-xt),window.scrollTo(0,0))},children:"⇦ Anterior"}),k.jsx("button",{className:at===xt||at===0?"d-none":"button",onClick:()=>{mt(0),window.scrollTo(0,0)},children:"0"}),k.jsx("button",{className:"button my-5",onClick:()=>{r.filter(Z=>Z.createdAt>ot).filter(Z=>Z.createdAt<ot+864e5).filter(Z=>Z.completed===$t).length>at+xt?(mt(at+xt),window.scrollTo(0,0)):(tt(" No Hay Mas Servicios En Esta Lista"),setTimeout(()=>{tt("")},2500))},children:"Siguiente ⇨"}),k.jsx("span",{className:"sliceAlert",children:V})]})}):""]})]})}BC.createRoot(document.getElementById("root")).render(k.jsx(Y.StrictMode,{children:k.jsx(QP,{})}));
